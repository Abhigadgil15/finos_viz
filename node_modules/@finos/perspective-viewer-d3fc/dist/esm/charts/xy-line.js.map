{"version":3,"sources":["../../../src/js/charts/xy-line.js"],"names":["fc","transposeData","axisFactory","chartSvgFactory","symbolTypeFromGroups","lineSeries","xySplitData","seriesColorsFromGroups","colorGroupLegend","filterDataByGroup","withGridLines","hardLimitZeroPadding","zoomableChart","nearbyTip","xyLine","container","settings","data","color","symbols","legend","domain","length","scale","series","seriesSvgRepeat","orient","paddingStrategy","pad","padUnit","xAxisFactory","settingName","settingValue","mainValues","name","valueName","yAxisFactory","yAxis","xAxis","plotSeries","chart","xLabel","yLabel","plotArea","xNice","yNice","zoomChart","xScale","yScale","toolTip","datum","call","plugin","type","max_cells","max_columns","render_warning","initial","count","names","selectMode"],"mappings":"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","sourcesContent":["/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport * as fc from \"d3fc\";\nimport {transposeData} from \"../data/transposeData\";\nimport {axisFactory} from \"../axis/axisFactory\";\nimport {chartSvgFactory} from \"../axis/chartFactory\";\nimport {symbolTypeFromGroups} from \"../series/pointSeriesCanvas\";\nimport {lineSeries} from \"../series/lineSeries\";\nimport {xySplitData} from \"../data/xySplitData\";\nimport {seriesColorsFromGroups} from \"../series/seriesColors\";\nimport {colorGroupLegend} from \"../legend/legend\";\nimport {filterDataByGroup} from \"../legend/filter\";\nimport withGridLines from \"../gridlines/gridlines\";\nimport {hardLimitZeroPadding} from \"../d3fc/padding/hardLimitZero\";\nimport zoomableChart from \"../zoom/zoomableChart\";\nimport nearbyTip from \"../tooltip/nearbyTip\";\n\nfunction xyLine(container, settings) {\n    const data = transposeData(xySplitData(settings, filterDataByGroup(settings)));\n\n    const color = seriesColorsFromGroups(settings);\n    const symbols = symbolTypeFromGroups(settings);\n\n    let legend = null;\n    if (color.domain().length > 2) {\n        legend = colorGroupLegend()\n            .settings(settings)\n            .scale(symbols)\n            .color(color);\n    }\n\n    const series = fc\n        .seriesSvgRepeat()\n        .series(lineSeries(settings, color))\n        .orient(\"horizontal\");\n\n    const paddingStrategy = hardLimitZeroPadding()\n        .pad([0.1, 0.1])\n        .padUnit(\"percent\");\n\n    const xAxisFactory = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .settingValue(settings.mainValues[0].name)\n        .valueName(\"crossValue\")\n        .paddingStrategy(paddingStrategy);\n\n    const yAxisFactory = axisFactory(settings)\n        .settingName(\"mainValues\")\n        .settingValue(settings.mainValues[1].name)\n        .valueName(\"mainValue\")\n        .orient(\"vertical\")\n        .paddingStrategy(paddingStrategy);\n\n    const yAxis = yAxisFactory(data);\n    const xAxis = xAxisFactory(data);\n\n    const plotSeries = withGridLines(series, settings).orient(\"vertical\");\n\n    const chart = chartSvgFactory(xAxis, yAxis)\n        .xLabel(settings.mainValues[0].name)\n        .yLabel(settings.mainValues[1].name)\n        .plotArea(plotSeries);\n\n    chart.xNice && chart.xNice();\n    chart.yNice && chart.yNice();\n\n    const zoomChart = zoomableChart()\n        .chart(chart)\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis.scale);\n\n    const toolTip = nearbyTip()\n        .settings(settings)\n        .xScale(xAxis.scale)\n        .yScale(yAxis.scale)\n        .color(color)\n        .data(data);\n\n    container.datum(data).call(zoomChart);\n    container.call(toolTip);\n    if (legend) {\n        container.call(legend);\n    }\n}\n\nxyLine.plugin = {\n    type: \"d3_xy_line\",\n    name: \"X/Y Line Chart\",\n    max_cells: 50000,\n    max_columns: 50,\n    render_warning: true,\n    initial: {\n        type: \"number\",\n        count: 2,\n        names: [\"X Axis\", \"Y Axis\"]\n    },\n    selectMode: \"toggle\"\n};\n\nexport default xyLine;\n"],"file":"xy-line.js"}