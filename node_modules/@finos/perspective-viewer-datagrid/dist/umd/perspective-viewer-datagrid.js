/*! For license information please see perspective-viewer-datagrid.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["perspective-viewer-datagrid"]=e():t["perspective-viewer-datagrid"]=e()}(self,(function(){return(()=>{var t={5394:function(t,e,r){var n;t=r.nmd(t),function(){var r,o,a,i,s,l,c,u,f,d,h,p,_,g,b,m,v,y,w,x,E,k,L,M,S,O,A,z,C,P,T,N,j,I,D,R,F,W,H,G,$,B,V,Y,q,U,X,K,J,Z,Q,tt,et,rt,nt,ot,at,it,st,lt,ct,ut,ft,dt,ht,pt,_t,gt,bt,mt,vt,yt,wt,xt,Et,kt,Lt,Mt,St,Ot,At=[].slice;kt=function(){var t,e,r,n,o;for(t={},n=0,e=(o="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<e;n++)r=o[n],t["[object "+r+"]"]=r.toLowerCase();return function(e){var r;return r=Object.prototype.toString.call(e),t[r]||"object"}}(),X=function(t,e,r){return null==e&&(e=0),null==r&&(r=1),t<e&&(t=e),t>r&&(t=r),t},Lt=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},E=function(t){var e,r;for(t._clipped=!1,t._unclipped=t.slice(0),e=r=0;r<3;e=++r)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},i=Math.PI,vt=Math.round,L=Math.cos,z=Math.floor,nt=Math.pow,K=Math.log,wt=Math.sin,xt=Math.sqrt,g=Math.atan2,Q=Math.max,_=Math.abs,c=2*i,s=i/3,o=i/180,l=180/i,(x=function(){return arguments[0]instanceof r?arguments[0]:function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,arguments,(function(){}))}).default=x,p=[],null!==t&&null!=t.exports&&(t.exports=x),void 0===(n=function(){return x}.apply(e,[]))||(t.exports=n),x.version="1.4.1",h={},f=[],d=!1,r=function(){function t(){var t,e,r,n,o,a,i,s,l;for(a=this,e=[],s=0,n=arguments.length;s<n;s++)null!=(t=arguments[s])&&e.push(t);if(e.length>1&&(i=e[e.length-1]),null!=h[i])a._rgb=E(h[i](Lt(e.slice(0,-1))));else{for(d||(f=f.sort((function(t,e){return e.p-t.p})),d=!0),l=0,o=f.length;l<o&&!(i=(r=f[l]).test.apply(r,e));l++);i&&(a._rgb=E(h[i].apply(h,e)))}null==a._rgb&&console.warn("unknown format: "+e),null==a._rgb&&(a._rgb=[0,0,0]),3===a._rgb.length&&a._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),x._input=h,x.brewer=y={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],y)e.push(y[t.toLowerCase()]=y[t])}(),x.colors=Mt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},B=function(){var t,e,r,n,o,i,s;return n=(e=Lt(arguments))[0],t=e[1],r=e[2],i=(n+16)/116,o=isNaN(t)?i:i+t/500,s=isNaN(r)?i:i-r/200,i=a.Yn*V(i),o=a.Xn*V(o),s=a.Zn*V(s),[Ot(3.2404542*o-1.5371385*i-.4985314*s),Ot(-.969266*o+1.8760108*i+.041556*s),r=Ot(.0556434*o-.2040259*i+1.0572252*s),e.length>3?e[3]:1]},Ot=function(t){return 255*(t<=.00304?12.92*t:1.055*nt(t,1/2.4)-.055)},V=function(t){return t>a.t1?t*t*t:a.t2*(t-a.t0)},a={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ft=function(){var t,e,r,n,o,a,i;return r=(n=Lt(arguments))[0],e=n[1],t=n[2],a=(o=gt(r,e,t))[0],[116*(i=o[1])-16,500*(a-i),200*(i-o[2])]},bt=function(t){return(t/=255)<=.04045?t/12.92:nt((t+.055)/1.055,2.4)},St=function(t){return t>a.t3?nt(t,1/3):t/a.t2+a.t0},gt=function(){var t,e,r,n;return r=(n=Lt(arguments))[0],e=n[1],t=n[2],r=bt(r),e=bt(e),t=bt(t),[St((.4124564*r+.3575761*e+.1804375*t)/a.Xn),St((.2126729*r+.7151522*e+.072175*t)/a.Yn),St((.0193339*r+.119192*e+.9503041*t)/a.Zn)]},x.lab=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["lab"]),(function(){}))},h.lab=B,r.prototype.lab=function(){return ft(this._rgb)},b=function(t){var e,r,n,o,a,i,s,l,c,u,f;return 2===(t=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)o=t[r],n.push(x(o));return n}()).length?(c=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)o=t[r],n.push(o.lab());return n}(),a=c[0],i=c[1],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push(a[e]+t*(i[e]-a[e]));return n}(),x.lab.apply(x,r)}):3===t.length?(u=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)o=t[r],n.push(o.lab());return n}(),a=u[0],i=u[1],s=u[2],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*a[e]+2*(1-t)*t*i[e]+t*t*s[e]);return n}(),x.lab.apply(x,r)}):4===t.length?(f=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)o=t[r],n.push(o.lab());return n}(),a=f[0],i=f[1],s=f[2],l=f[3],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*(1-t)*a[e]+3*(1-t)*(1-t)*t*i[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]);return n}(),x.lab.apply(x,r)}):5===t.length&&(r=b(t.slice(0,3)),n=b(t.slice(2,5)),e=function(t){return t<.5?r(2*t):n(2*(t-.5))}),e},x.bezier=function(t){var e;return(e=b(t)).scale=function(){return x.scale(e)},e},x.cubehelix=function(t,e,r,n,o){var a,i,s;return null==t&&(t=300),null==e&&(e=-1.5),null==r&&(r=1),null==n&&(n=1),null==o&&(o=[0,1]),a=0,"array"===kt(o)?i=o[1]-o[0]:(i=0,o=[o,o]),(s=function(s){var l,u,f,d,h;return l=c*((t+120)/360+e*s),d=nt(o[0]+i*s,n),u=(0!==a?r[0]+s*a:r)*d*(1-d)/2,f=L(l),h=wt(l),x(E([255*(d+u*(-.14861*f+1.78277*h)),255*(d+u*(-.29227*f-.90649*h)),255*(d+u*(1.97294*f)),1]))}).start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?n:(n=t,s)},s.hue=function(t){return null==t?r:("array"===kt(r=t)?0===(a=r[1]-r[0])&&(r=r[1]):a=0,s)},s.lightness=function(t){return null==t?o:("array"===kt(t)?(o=t,i=t[1]-t[0]):(o=[t,t],i=0),s)},s.scale=function(){return x.scale(s)},s.hue(r),s},x.random=function(){var t,e;for("0123456789abcdef",t="#",e=0;e<6;++e)t+="0123456789abcdef".charAt(z(16*Math.random()));return new r(t)},p=[],D=function(t,e,r,n){var o,a,i,s;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==kt(t)&&(t=x(t)),"object"!==kt(e)&&(e=x(e)),i=0,a=p.length;i<a;i++)if(n===(o=p[i])[0]){s=o[1](t,e,r,n);break}if(null==s)throw"color mode "+n+" is not supported";return s.alpha(t.alpha()+r*(e.alpha()-t.alpha()))},x.interpolate=D,r.prototype.interpolate=function(t,e,r){return D(this,t,e,r)},x.mix=D,r.prototype.mix=r.prototype.interpolate,h.rgb=function(){var t,e,r,n;for(t in r=[],e=Lt(arguments))n=e[t],r.push(n);return r},x.rgb=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["rgb"]),(function(){}))},r.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},r.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},f.push({p:3,test:function(t){var e;return e=Lt(arguments),"array"===kt(e)&&3===e.length||4===e.length&&"number"===kt(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),h.lrgb=h.rgb,W=function(t,e,n,o){var a,i;return a=t._rgb,i=e._rgb,new r(xt(nt(a[0],2)*(1-n)+nt(i[0],2)*n),xt(nt(a[1],2)*(1-n)+nt(i[1],2)*n),xt(nt(a[2],2)*(1-n)+nt(i[2],2)*n),o)},u=function(t){var e,n,o,a,i;for(e=1/t.length,i=[0,0,0,0],o=0,n=t.length;o<n;o++)a=t[o]._rgb,i[0]+=nt(a[0],2)*e,i[1]+=nt(a[1],2)*e,i[2]+=nt(a[2],2)*e,i[3]+=a[3]*e;return i[0]=xt(i[0]),i[1]=xt(i[1]),i[2]=xt(i[2]),i[3]>1&&(i[3]=1),new r(E(i))},p.push(["lrgb",W]),x.average=function(t,e){var r,n,o,a,s,l,c,f,d,h,p,_,b;if(null==e&&(e="rgb"),d=t.length,c=(t=t.map((function(t){return x(t)}))).splice(0,1)[0],"lrgb"===e)return u(t);for(f in a=[],s=0,l=0,_=c.get(e))_[f]=_[f]||0,a.push(isNaN(_[f])?0:1),"h"!==e.charAt(f)||isNaN(_[f])||(r=_[f]/180*i,s+=L(r),l+=wt(r));for(n=c.alpha(),p=0,h=t.length;p<h;p++)for(f in b=(o=t[p]).get(e),n+=o.alpha(),_)isNaN(b[f])||(a[f]+=1,"h"===e.charAt(f)?(r=b[f]/180*i,s+=L(r),l+=wt(r)):_[f]+=b[f]);for(f in _)if("h"===e.charAt(f)){for(r=g(l/a[f],s/a[f])/i*180;r<0;)r+=360;for(;r>=360;)r-=360;_[f]=r}else _[f]=_[f]/a[f];return x(_,e).alpha(n/d)},P=function(t){var e,r;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(r=parseInt(t,16))>>16,r>>8&255,255&r,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(r=parseInt(t,16))>>24&255,r>>16&255,r>>8&255,vt((255&r)/255*100)/100];if(null!=h.css&&(e=h.css(t)))return e;throw"unknown color: "+t},st=function(t,e){var r,n,o,a,i,s;return null==e&&(e="auto"),i=t[0],o=t[1],n=t[2],r=t[3],"auto"===e&&(e=r<1?"rgba":"rgb"),i=Math.round(i),o=Math.round(o),n=Math.round(n),s=(s="000000"+(i<<16|o<<8|n).toString(16)).substr(s.length-6),a=(a="0"+vt(255*r).toString(16)).substr(a.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return s+a;case"argb":return a+s;default:return s}}()},h.hex=function(t){return P(t)},x.hex=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["hex"]),(function(){}))},r.prototype.hex=function(t){return null==t&&(t="auto"),st(this._rgb,t)},f.push({p:4,test:function(t){if(1===arguments.length&&"string"===kt(t))return"hex"}}),j=function(){var t,e,r,n,o,a,i,s,l,c,u,f,d,h;if(o=(t=Lt(arguments))[0],u=t[1],i=t[2],0===u)l=n=e=255*i;else{for(r=[0,0,0],f=2*i-(d=i<.5?i*(1+u):i+u-i*u),(h=[0,0,0])[0]=(o/=360)+1/3,h[1]=o,h[2]=o-1/3,a=s=0;s<=2;a=++s)h[a]<0&&(h[a]+=1),h[a]>1&&(h[a]-=1),6*h[a]<1?r[a]=f+6*(d-f)*h[a]:2*h[a]<1?r[a]=d:3*h[a]<2?r[a]=f+(d-f)*(2/3-h[a])*6:r[a]=f;l=(c=[vt(255*r[0]),vt(255*r[1]),vt(255*r[2])])[0],n=c[1],e=c[2]}return t.length>3?[l,n,e,t[3]]:[l,n,e]},ct=function(t,e,r){var n,o,a,i,s;return void 0!==t&&t.length>=3&&(t=(i=t)[0],e=i[1],r=i[2]),t/=255,e/=255,r/=255,a=Math.min(t,e,r),o=((Q=Math.max(t,e,r))+a)/2,Q===a?(s=0,n=Number.NaN):s=o<.5?(Q-a)/(Q+a):(Q-a)/(2-Q-a),t===Q?n=(e-r)/(Q-a):e===Q?n=2+(r-t)/(Q-a):r===Q&&(n=4+(t-e)/(Q-a)),(n*=60)<0&&(n+=360),[n,s,o]},x.hsl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["hsl"]),(function(){}))},h.hsl=j,r.prototype.hsl=function(){return ct(this._rgb)},I=function(){var t,e,r,n,o,a,i,s,l,c,u,f,d,h,p,_,g,b;if(o=(t=Lt(arguments))[0],_=t[1],b=t[2],b*=255,0===_)l=n=e=b;else switch(360===o&&(o=0),o>360&&(o-=360),o<0&&(o+=360),i=b*(1-_),s=b*(1-_*(r=(o/=60)-(a=z(o)))),g=b*(1-_*(1-r)),a){case 0:l=(c=[b,g,i])[0],n=c[1],e=c[2];break;case 1:l=(u=[s,b,i])[0],n=u[1],e=u[2];break;case 2:l=(f=[i,b,g])[0],n=f[1],e=f[2];break;case 3:l=(d=[i,s,b])[0],n=d[1],e=d[2];break;case 4:l=(h=[g,i,b])[0],n=h[1],e=h[2];break;case 5:l=(p=[b,i,s])[0],n=p[1],e=p[2]}return[l,n,e,t.length>3?t[3]:1]},ut=function(){var t,e,r,n,o,a,i,s,l;return a=(i=Lt(arguments))[0],r=i[1],t=i[2],o=Math.min(a,r,t),e=(Q=Math.max(a,r,t))-o,l=Q/255,0===Q?(n=Number.NaN,s=0):(s=e/Q,a===Q&&(n=(r-t)/e),r===Q&&(n=2+(t-a)/e),t===Q&&(n=4+(a-r)/e),(n*=60)<0&&(n+=360)),[n,s,l]},x.hsv=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["hsv"]),(function(){}))},h.hsv=I,r.prototype.hsv=function(){return ut(this._rgb)},et=function(t){return"number"===kt(t)&&t>=0&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},pt=function(){var t;return((t=Lt(arguments))[0]<<16)+(t[1]<<8)+t[2]},x.num=function(t){return new r(t,"num")},r.prototype.num=function(t){return null==t&&(t="rgb"),pt(this._rgb,t)},h.num=et,f.push({p:1,test:function(t){if(1===arguments.length&&"number"===kt(t)&&t>=0&&t<=16777215)return"num"}}),C=function(){var t,e,r,n,o,a,i,s,l,c,u,f,d,h,p,_,g,b,m,v;if(s=(r=Lt(arguments))[0],o=r[1],e=r[2],i=i/100*255,t=255*(o/=100),0===o)f=i=n=e;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),u=(c=e*(1-o))+t*(1-(a=(s/=60)-(l=z(s)))),m=c+t*a,v=c+t,l){case 0:f=(d=[v,m,c])[0],i=d[1],n=d[2];break;case 1:f=(h=[u,v,c])[0],i=h[1],n=h[2];break;case 2:f=(p=[c,v,m])[0],i=p[1],n=p[2];break;case 3:f=(_=[c,u,v])[0],i=_[1],n=_[2];break;case 4:f=(g=[m,c,v])[0],i=g[1],n=g[2];break;case 5:f=(b=[v,c,u])[0],i=b[1],n=b[2]}return[f,i,n,r.length>3?r[3]:1]},it=function(){var t,e,r,n,o,a,i,s,l;return s=(l=Lt(arguments))[0],o=l[1],e=l[2],i=Math.min(s,o,e),r=100*(n=(Q=Math.max(s,o,e))-i)/255,t=i/(255-n)*100,0===n?a=Number.NaN:(s===Q&&(a=(o-e)/n),o===Q&&(a=2+(e-s)/n),e===Q&&(a=4+(s-o)/n),(a*=60)<0&&(a+=360)),[a,r,t]},x.hcg=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["hcg"]),(function(){}))},h.hcg=C,r.prototype.hcg=function(){return it(this._rgb)},M=function(t){var e,r,n,o,a,i,s,l;if(t=t.toLowerCase(),null!=x.colors&&x.colors[t])return P(x.colors[t]);if(a=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=a.slice(1,4),o=i=0;i<=2;o=++i)s[o]=+s[o];s[3]=1}else if(a=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=a.slice(1,5),o=l=0;l<=3;o=++l)s[o]=+s[o];else if(a=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=a.slice(1,4),o=e=0;e<=2;o=++e)s[o]=vt(2.55*s[o]);s[3]=1}else if(a=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=a.slice(1,5),o=r=0;r<=2;o=++r)s[o]=vt(2.55*s[o]);s[3]=+s[3]}else(a=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=a.slice(1,4))[1]*=.01,n[2]*=.01,(s=j(n))[3]=1):(a=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=a.slice(1,4))[1]*=.01,n[2]*=.01,(s=j(n))[3]=+a[4]);return s},at=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(vt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(vt).join(",")+","+t[3]+")":void 0},mt=function(t){return vt(100*t)/100},N=function(t,e){var r;return r=e<1?"hsla":"hsl",t[0]=mt(t[0]||0),t[1]=mt(100*t[1])+"%",t[2]=mt(100*t[2])+"%","hsla"===r&&(t[3]=e),r+"("+t.join(",")+")"},h.css=function(t){return M(t)},x.css=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["css"]),(function(){}))},r.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?at(this._rgb):"hsl"===t.slice(0,3)?N(this.hsl(),this.alpha()):void 0},h.named=function(t){return P(Mt[t])},f.push({p:5,test:function(t){if(1===arguments.length&&null!=Mt[t])return"named"}}),r.prototype.name=function(t){var e,r;for(r in arguments.length&&(Mt[t]&&(this._rgb=P(Mt[t])),this._rgb[3]=1),e=this.hex("rgb"),Mt)if(e===Mt[r])return r;return e},Y=function(){var t,e,r,n;return r=(n=Lt(arguments))[0],t=n[1],e=n[2],[r,L(e*=o)*t,wt(e)*t]},q=function(){var t,e,r,n,o,a,i,s,l;return i=(r=Lt(arguments))[0],o=r[1],a=r[2],t=(s=Y(i,o,a))[0],e=s[1],n=s[2],[(l=B(t,e,n))[0],l[1],n=l[2],r.length>3?r[3]:1]},$=function(){var t,e,r,n,o,a;return o=(a=Lt(arguments))[0],t=a[1],e=a[2],r=xt(t*t+e*e),n=(g(e,t)*l+360)%360,0===vt(1e4*r)&&(n=Number.NaN),[o,r,n]},dt=function(){var t,e,r,n,o,a,i;return o=(a=Lt(arguments))[0],r=a[1],e=a[2],n=(i=ft(o,r,e))[0],t=i[1],e=i[2],$(n,t,e)},x.lch=function(){var t;return t=Lt(arguments),new r(t,"lch")},x.hcl=function(){var t;return t=Lt(arguments),new r(t,"hcl")},h.lch=q,h.hcl=function(){var t,e,r,n;return e=(n=Lt(arguments))[0],t=n[1],r=n[2],q([r,t,e])},r.prototype.lch=function(){return dt(this._rgb)},r.prototype.hcl=function(){return dt(this._rgb).reverse()},ot=function(t){var e,r,n,o,a,i;return null==t&&(t="rgb"),a=(i=Lt(arguments))[0],n=i[1],e=i[2],n/=255,e/=255,[(1-(a/=255)-(o=1-Math.max(a,Math.max(n,e))))*(r=o<1?1/(1-o):0),(1-n-o)*r,(1-e-o)*r,o]},k=function(){var t,e,r,n,o,a;return r=(e=Lt(arguments))[0],o=e[1],a=e[2],n=e[3],t=e.length>4?e[4]:1,1===n?[0,0,0,t]:[r>=1?0:255*(1-r)*(1-n),o>=1?0:255*(1-o)*(1-n),a>=1?0:255*(1-a)*(1-n),t]},h.cmyk=function(){return k(Lt(arguments))},x.cmyk=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["cmyk"]),(function(){}))},r.prototype.cmyk=function(){return ot(this._rgb)},h.gl=function(){var t,e,r,n,o;for(n=function(){var t,r;for(e in r=[],t=Lt(arguments))o=t[e],r.push(o);return r}.apply(this,arguments),t=r=0;r<=2;t=++r)n[t]*=255;return n},x.gl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["gl"]),(function(){}))},r.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},ht=function(t,e,r){var n;return t=(n=Lt(arguments))[0],e=n[1],r=n[2],.2126*(t=J(t))+.7152*(e=J(e))+.0722*(r=J(r))},J=function(t){return(t/=255)<=.03928?t/12.92:nt((t+.055)/1.055,2.4)},G=function(t,e,n,o){var a,i;return a=t._rgb,i=e._rgb,new r(a[0]+n*(i[0]-a[0]),a[1]+n*(i[1]-a[1]),a[2]+n*(i[2]-a[2]),o)},p.push(["rgb",G]),r.prototype.luminance=function(t,e){var r,n,o,a,i;return null==e&&(e="rgb"),arguments.length?(a=this._rgb,0===t?a=[0,0,0,this._rgb[3]]:1===t?a=[255,255,255,this[3]]:(r=ht(this._rgb),n=1e-7,o=20,i=function(r,a){var s,l;return s=(l=r.interpolate(a,.5,e)).luminance(),Math.abs(t-s)<n||!o--?l:s>t?i(r,l):i(l,a)},a=r>t?i(x("black"),this).rgba():i(this,x("white")).rgba()),x(a).alpha(this.alpha())):ht(this._rgb)},Et=function(t){var e,r,n,o;return(o=t/100)<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=o-2)+104.49216199393888*K(r),e=o<20?0:.8274096064007395*(e=o-10)-254.76935184120902+115.67994401066147*K(e)):(n=351.97690566805693+.114206453784165*(n=o-55)-40.25366309332127*K(n),r=325.4494125711974+.07943456536662342*(r=o-50)-28.0852963507957*K(r),e=255),[n,r,e]},_t=function(){var t,e,r,n,o,a,i,s;for(o=(a=Lt(arguments))[0],a[1],t=a[2],n=1e3,r=4e4,e=.4;r-n>e;)(i=Et(s=.5*(r+n)))[2]/i[0]>=t/o?r=s:n=s;return vt(s)},x.temperature=x.kelvin=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["temperature"]),(function(){}))},h.temperature=h.kelvin=h.K=Et,r.prototype.temperature=function(){return _t(this._rgb)},r.prototype.kelvin=r.prototype.temperature,x.contrast=function(t,e){var n,o,a,i;return"string"!==(a=kt(t))&&"number"!==a||(t=new r(t)),"string"!==(i=kt(e))&&"number"!==i||(e=new r(e)),(n=t.luminance())>(o=e.luminance())?(n+.05)/(o+.05):(o+.05)/(n+.05)},x.distance=function(t,e,n){var o,a,i,s,l,c,u;for(a in null==n&&(n="lab"),"string"!==(l=kt(t))&&"number"!==l||(t=new r(t)),"string"!==(c=kt(e))&&"number"!==c||(e=new r(e)),i=t.get(n),s=e.get(n),u=0,i)u+=(o=(i[a]||0)-(s[a]||0))*o;return Math.sqrt(u)},x.deltaE=function(t,e,n,o){var a,s,l,c,u,f,d,h,p,b,m,v,y,w,x,E,k,M,S,O,A,z,C,P;for(null==n&&(n=1),null==o&&(o=1),"string"!==(x=kt(t))&&"number"!==x||(t=new r(t)),"string"!==(E=kt(e))&&"number"!==E||(e=new r(e)),a=(k=t.lab())[0],l=k[1],u=k[2],s=(M=e.lab())[0],c=M[1],f=M[2],d=xt(l*l+u*u),h=xt(c*c+f*f),O=a<16?.511:.040975*a/(1+.01765*a),S=.0638*d/(1+.0131*d)+.638,w=d<1e-6?0:180*g(u,l)/i;w<0;)w+=360;for(;w>=360;)w-=360;return A=w>=164&&w<=345?.56+_(.2*L(i*(w+168)/180)):.36+_(.4*L(i*(w+35)/180)),y=xt((p=d*d*d*d)/(p+1900)),xt((z=(a-s)/(n*O))*z+(C=(v=d-h)/(o*S))*C+((b=l-c)*b+(m=u-f)*m-v*v)/((P=S*(y*A+1-y))*P))},r.prototype.get=function(t){var e,r,n,o,a;return this,n=(o=t.split("."))[0],e=o[1],a=this[n](),e?(r=n.indexOf(e))>-1?a[r]:console.warn("unknown channel "+e+" in mode "+n):a},r.prototype.set=function(t,e){var r,n,o,a,i;if(this,o=(a=t.split("."))[0],r=a[1])if(i=this[o](),(n=o.indexOf(r))>-1)if("string"===kt(e))switch(e.charAt(0)){case"+":case"-":i[n]+=+e;break;case"*":i[n]*=+e.substr(1);break;case"/":i[n]/=+e.substr(1);break;default:i[n]=+e}else i[n]=e;else console.warn("unknown channel "+r+" in mode "+o);else i=e;return x(i,o).alpha(this.alpha())},r.prototype.clipped=function(){return this._rgb._clipped||!1},r.prototype.alpha=function(t){return arguments.length?x.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},r.prototype.darken=function(t){var e;return null==t&&(t=1),this,(e=this.lab())[0]-=a.Kn*t,x.lab(e).alpha(this.alpha())},r.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},r.prototype.darker=r.prototype.darken,r.prototype.brighter=r.prototype.brighten,r.prototype.saturate=function(t){var e;return null==t&&(t=1),this,(e=this.lch())[1]+=t*a.Kn,e[1]<0&&(e[1]=0),x.lch(e).alpha(this.alpha())},r.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},r.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),x(e[0]*t,e[1]*t,e[2]*t,t)},tt=function(t,e){return t*e/255},S=function(t,e){return t>e?e:t},U=function(t,e){return t>e?t:e},yt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},rt=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},w=function(t,e){return 255*(1-(1-e/255)/(t/255))},O=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t},(m=function(t,e,r){if(!m[r])throw"unknown blend mode "+r;return m[r](t,e)}).normal=(v=function(t){return function(e,r){var n,o;return n=x(r).rgb(),o=x(e).rgb(),x(t(n,o),"rgb")}})((A=function(t){return function(e,r){var n,o,a;for(a=[],n=o=0;o<=3;n=++o)a[n]=t(e[n],r[n]);return a}})((function(t,e){return t}))),m.multiply=v(A(tt)),m.screen=v(A(yt)),m.overlay=v(A(rt)),m.darken=v(A(S)),m.lighten=v(A(U)),m.dodge=v(A(O)),m.burn=v(A(w)),x.blend=m,x.analyze=function(t){var e,r,n,o;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,e=t.length;r<e;r++)null==(o=t[r])||isNaN(o)||(n.values.push(o),n.sum+=o,o<n.min&&(n.min=o),o>n.max&&(n.max=o),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return x.limits(n,t,e)},n},x.scale=function(t,e){var r,n,o,a,i,s,l,c,u,f,d,h,p,_,g,b,m,v,y,w,E;return u="rgb",f=x("#ccc"),_=0,!1,i=[0,1],p=[],h=[0,0],r=!1,o=[],d=!1,c=0,l=1,a=!1,n={},g=!0,s=1,w=function(t){var e,r,n,a,i,s;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===kt(t)&&null!=x.brewer&&(t=x.brewer[t]||x.brewer[t.toLowerCase()]||t),"array"===kt(t)){for(1===t.length&&(t=[t[0],t[0]]),e=n=0,a=(t=t.slice(0)).length-1;0<=a?n<=a:n>=a;e=0<=a?++n:--n)r=t[e],"string"===kt(r)&&(t[e]=x(r));for(p.length=0,e=s=0,i=t.length-1;0<=i?s<=i:s>=i;e=0<=i?++s:--s)p.push(e/(t.length-1))}return y(),o=t},m=function(t){var e,n;if(null!=r){for(n=r.length-1,e=0;e<n&&t>=r[e];)e++;return e-1}return 0},E=function(t){return t},function(t){var e,n,o,a,i;return i=t,r.length>2&&(a=r.length-1,e=m(t),o=r[0]+(r[1]-r[0])*(0+.5*_),n=r[a-1]+(r[a]-r[a-1])*(1-.5*_),i=c+(r[e]+.5*(r[e+1]-r[e])-o)/(n-o)*(l-c)),i},v=function(t,e){var a,i,d,_,b,v,y;if(null==e&&(e=!1),isNaN(t)||null===t)return f;if(y=e?t:r&&r.length>2?m(t)/(r.length-2):l!==c?(t-c)/(l-c):1,e||(y=E(y)),1!==s&&(y=nt(y,s)),y=h[0]+y*(1-h[0]-h[1]),y=Math.min(1,Math.max(0,y)),d=Math.floor(1e4*y),g&&n[d])a=n[d];else{if("array"===kt(o))for(i=_=0,v=p.length-1;0<=v?_<=v:_>=v;i=0<=v?++_:--_){if(y<=(b=p[i])){a=o[i];break}if(y>=b&&i===p.length-1){a=o[i];break}if(y>b&&y<p[i+1]){y=(y-b)/(p[i+1]-b),a=x.interpolate(o[i],o[i+1],y,u);break}}else"function"===kt(o)&&(a=o(y));g&&(n[d]=a)}return a},y=function(){return n={}},w(t),(b=function(t){var e;return e=x(v(t)),d&&e[d]?e[d]():e}).classes=function(t){var e;return null!=t?("array"===kt(t)?(r=t,i=[t[0],t[t.length-1]]):(e=x.analyze(i),r=0===t?[e.min,e.max]:x.limits(e,"e",t)),b):r},b.domain=function(t){var e,r,n,a,s,u,f;if(!arguments.length)return i;if(c=t[0],l=t[t.length-1],p=[],n=o.length,t.length===n&&c!==l)for(s=0,a=t.length;s<a;s++)r=t[s],p.push((r-c)/(l-c));else for(e=f=0,u=n-1;0<=u?f<=u:f>=u;e=0<=u?++f:--f)p.push(e/(n-1));return i=[c,l],b},b.mode=function(t){return arguments.length?(u=t,y(),b):u},b.range=function(t,e){return w(t),b},b.out=function(t){return d=t,b},b.spread=function(t){return arguments.length?(_=t,b):_},b.correctLightness=function(t){return null==t&&(t=!0),a=t,y(),E=a?function(t){var e,r,n,o,a,i,s,l,c;for(e=v(0,!0).lab()[0],r=v(1,!0).lab()[0],s=e>r,n=v(t,!0).lab()[0],o=n-(a=e+(r-e)*t),l=0,c=1,i=20;Math.abs(o)>.01&&i-- >0;)s&&(o*=-1),o<0?(l=t,t+=.5*(c-t)):(c=t,t+=.5*(l-t)),n=v(t,!0).lab()[0],o=n-a;return t}:function(t){return t},b},b.padding=function(t){return null!=t?("number"===kt(t)&&(t=[t,t]),h=t,b):h},b.colors=function(e,n){var a,s,l,c,u,f,d,h;if(arguments.length<2&&(n="hex"),u=[],0===arguments.length)u=o.slice(0);else if(1===e)u=[b(.5)];else if(e>1)s=i[0],a=i[1]-s,u=function(){f=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)f.push(t);return f}.apply(this).map((function(t){return b(s+t/(e-1)*a)}));else{if(t=[],d=[],r&&r.length>2)for(l=h=1,c=r.length;1<=c?h<c:h>c;l=1<=c?++h:--h)d.push(.5*(r[l-1]+r[l]));else d=i;u=d.map((function(t){return b(t)}))}return x[n]&&(u=u.map((function(t){return t[n]()}))),u},b.cache=function(t){return null!=t?(g=t,b):g},b.gamma=function(t){return null!=t?(s=t,b):s},b.nodata=function(t){return null!=t?(f=x(t),b):f},b},null==x.scales&&(x.scales={}),x.scales.cool=function(){return x.scale([x.hsl(180,1,.9),x.hsl(250,.7,.4)])},x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},x.analyze=function(t,e,r){var n,o,a,i,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(t){null==t||isNaN(t)||(s.values.push(t),s.sum+=t,t<s.min&&(s.min=t),t>s.max&&(s.max=t),s.count+=1)},l=function(t,o){if(r(t,o))return null!=e&&"function"===kt(e)?n(e(t)):null!=e&&"string"===kt(e)||"number"===kt(e)?n(t[e]):n(t)},"array"===kt(t))for(i=0,a=t.length;i<a;i++)l(t[i]);else for(o in t)l(t[o],o);return s.domain=[s.min,s.max],s.limits=function(t,e){return x.limits(s,t,e)},s},x.limits=function(t,e,r){var n,o,a,i,s,l,c,u,f,d,h,p,g,b,m,v,y,w,E,k,L,M,S,O,A,C,P,T,N,j,I,D,R,F,W,H,G,$,B,V,Y,q,U,X,J,Z,tt,et,rt,ot,at,it,st,lt,ct;if(null==e&&(e="equal"),null==r&&(r=7),"array"===kt(t)&&(t=x.analyze(t)),A=t.min,Q=t.max,t.sum,lt=t.values.sort((function(t,e){return t-e})),1===r)return[A,Q];if(S=[],"c"===e.substr(0,1)&&(S.push(A),S.push(Q)),"e"===e.substr(0,1)){for(S.push(A),k=I=1,W=r-1;1<=W?I<=W:I>=W;k=1<=W?++I:--I)S.push(A+k/r*(Q-A));S.push(Q)}else if("l"===e.substr(0,1)){if(A<=0)throw"Logarithmic scales are only possible for values > 0";for(C=Math.LOG10E*K(A),O=Math.LOG10E*K(Q),S.push(A),k=ct=1,H=r-1;1<=H?ct<=H:ct>=H;k=1<=H?++ct:--ct)S.push(nt(10,C+k/r*(O-C)));S.push(Q)}else if("q"===e.substr(0,1)){for(S.push(A),k=n=1,q=r-1;1<=q?n<=q:n>=q;k=1<=q?++n:--n)D=(lt.length-1)*k/r,(R=z(D))===D?S.push(lt[R]):(F=D-R,S.push(lt[R]*(1-F)+lt[R+1]*F));S.push(Q)}else if("k"===e.substr(0,1)){for(T=lt.length,b=new Array(T),w=new Array(r),ot=!0,N=0,v=null,(v=[]).push(A),k=o=1,U=r-1;1<=U?o<=U:o>=U;k=1<=U?++o:--o)v.push(A+k/r*(Q-A));for(v.push(Q);ot;){for(L=a=0,X=r-1;0<=X?a<=X:a>=X;L=0<=X?++a:--a)w[L]=0;for(k=i=0,J=T-1;0<=J?i<=J:i>=J;k=0<=J?++i:--i){for(st=lt[k],P=Number.MAX_VALUE,L=s=0,Z=r-1;0<=Z?s<=Z:s>=Z;L=0<=Z?++s:--s)(E=_(v[L]-st))<P&&(P=E,m=L);w[m]++,b[k]=m}for(j=new Array(r),L=l=0,tt=r-1;0<=tt?l<=tt:l>=tt;L=0<=tt?++l:--l)j[L]=null;for(k=c=0,et=T-1;0<=et?c<=et:c>=et;k=0<=et?++c:--c)null===j[y=b[k]]?j[y]=lt[k]:j[y]+=lt[k];for(L=u=0,rt=r-1;0<=rt?u<=rt:u>=rt;L=0<=rt?++u:--u)j[L]*=1/w[L];for(ot=!1,L=f=0,G=r-1;0<=G?f<=G:f>=G;L=0<=G?++f:--f)if(j[L]!==v[k]){ot=!0;break}v=j,++N>200&&(ot=!1)}for(M={},L=d=0,$=r-1;0<=$?d<=$:d>=$;L=0<=$?++d:--d)M[L]=[];for(k=h=0,B=T-1;0<=B?h<=B:h>=B;k=0<=B?++h:--h)M[y=b[k]].push(lt[k]);for(at=[],L=p=0,V=r-1;0<=V?p<=V:p>=V;L=0<=V?++p:--p)at.push(M[L][0]),at.push(M[L][M[L].length-1]);for(at=at.sort((function(t,e){return t-e})),S.push(at[0]),k=g=1,Y=at.length-1;g<=Y;k=g+=2)it=at[k],isNaN(it)||-1!==S.indexOf(it)||S.push(it)}return S},T=function(t,e,r){var n,o,a,i;return t=(n=Lt(arguments))[0],e=n[1],r=n[2],isNaN(t)&&(t=0),(t/=360)<1/3?a=1-((o=(1-e)/3)+(i=(1+e*L(c*t)/L(s-c*t))/3)):t<2/3?o=1-((i=(1-e)/3)+(a=(1+e*L(c*(t-=1/3))/L(s-c*t))/3)):i=1-((a=(1-e)/3)+(o=(1+e*L(c*(t-=2/3))/L(s-c*t))/3)),[255*(i=X(r*i*3)),255*(a=X(r*a*3)),255*(o=X(r*o*3)),n.length>3?n[3]:1]},lt=function(){var t,e,r,n,o,a,i;return o=(a=Lt(arguments))[0],e=a[1],t=a[2],c=2*Math.PI,o/=255,e/=255,t/=255,0===(i=1-Math.min(o,e,t)/(n=(o+e+t)/3))?r=0:(r=(o-e+(o-t))/2,r/=Math.sqrt((o-e)*(o-e)+(o-t)*(e-t)),r=Math.acos(r),t>e&&(r=c-r),r/=c),[360*r,i,n]},x.hsi=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,o=t.apply(n,e);return Object(o)===o?o:n}(r,At.call(arguments).concat(["hsi"]),(function(){}))},h.hsi=T,r.prototype.hsi=function(){return lt(this._rgb)},R=function(t,e,r,n){var o,a,i,s,l,c,u,f,d,h;return"hsl"===n?(d=t.hsl(),h=e.hsl()):"hsv"===n?(d=t.hsv(),h=e.hsv()):"hcg"===n?(d=t.hcg(),h=e.hcg()):"hsi"===n?(d=t.hsi(),h=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",d=t.hcl(),h=e.hcl()),"h"===n.substr(0,1)&&(a=d[0],u=d[1],s=d[2],i=h[0],f=h[1],l=h[2]),isNaN(a)||isNaN(i)?isNaN(a)?isNaN(i)?o=Number.NaN:(o=i,1!==s&&0!==s||"hsv"===n||(c=f)):(o=a,1!==l&&0!==l||"hsv"===n||(c=u)):o=a+r*(i>a&&i-a>180?i-(a+360):i<a&&a-i>180?i+360-a:i-a),null==c&&(c=u+r*(f-u)),x[n](o,c,s+r*(l-s))},H=function(t,e,r,n){var o,a;return o=t.num(),a=e.num(),x.num(o+(a-o)*r,"num")},(p=p.concat(function(){var t,e,r,n;for(n=[],e=0,t=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)Z=r[e],n.push([Z,R]);return n}())).push(["num",H]),F=function(t,e,n,o){var a,i;return a=t.lab(),i=e.lab(),new r(a[0]+n*(i[0]-a[0]),a[1]+n*(i[1]-a[1]),a[2]+n*(i[2]-a[2]),o)},p.push(["lab",F])}.call(this)},3819:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},8505:(t,e,r)=>{var n=r(5052);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},9736:(t,e,r)=>{var n=r(95),o=r(2391),a=r(1787),i=n("unscopables"),s=Array.prototype;null==s[i]&&a.f(s,i,{configurable:!0,value:o(null)}),t.exports=function(t){s[i][t]=!0}},6637:(t,e,r)=>{"use strict";var n=r(966).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},1176:(t,e,r)=>{var n=r(5052);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},9540:(t,e,r)=>{var n=r(905),o=r(4237),a=r(3231),i=function(t){return function(e,r,i){var s,l=n(e),c=o(l.length),u=a(i,c);if(t&&r!=r){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===r)return t||u||0;return!t&&-1}};t.exports={includes:i(!0),indexOf:i(!1)}},6038:(t,e,r)=>{"use strict";var n=r(4229);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},3037:(t,e,r)=>{var n=r(7400),o=r(4229),a=r(816),i=Object.defineProperty,s={},l=function(t){throw t};t.exports=function(t,e){if(a(s,t))return s[t];e||(e={});var r=[][t],c=!!a(e,"ACCESSORS")&&e.ACCESSORS,u=a(e,0)?e[0]:l,f=a(e,1)?e[1]:void 0;return s[t]=!!r&&!o((function(){if(c&&!n)return!0;var t={length:-1};c?i(t,1,{enumerable:!0,get:l}):t[1]=1,r.call(t,u,f)}))}},3143:(t,e,r)=>{var n=r(3819),o=r(2991),a=r(9337),i=r(4237),s=function(t){return function(e,r,s,l){n(r);var c=o(e),u=a(c),f=i(c.length),d=t?f-1:0,h=t?-1:1;if(s<2)for(;;){if(d in u){l=u[d],d+=h;break}if(d+=h,t?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=h)d in u&&(l=r(l,u[d],d,c));return l}};t.exports={left:s(!1),right:s(!0)}},7079:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},7081:(t,e,r)=>{var n=r(816),o=r(4826),a=r(7933),i=r(1787);t.exports=function(t,e){for(var r=o(e),s=i.f,l=a.f,c=0;c<r.length;c++){var u=r[c];n(t,u)||s(t,u,l(e,u))}}},7528:(t,e,r)=>{var n=r(4229);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},3723:(t,e,r)=>{"use strict";var n=r(693).IteratorPrototype,o=r(2391),a=r(5358),i=r(4555),s=r(5495),l=function(){return this};t.exports=function(t,e,r){var c=e+" Iterator";return t.prototype=o(n,{next:a(1,r)}),i(t,c,!1,!0),s[c]=l,t}},5762:(t,e,r)=>{var n=r(7400),o=r(1787),a=r(5358);t.exports=n?function(t,e,r){return o.f(t,e,a(1,r))}:function(t,e,r){return t[e]=r,t}},5358:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7675:(t,e,r)=>{"use strict";var n=r(3103),o=r(3723),a=r(7567),i=r(6540),s=r(4555),l=r(5762),c=r(7487),u=r(95),f=r(4231),d=r(5495),h=r(693),p=h.IteratorPrototype,_=h.BUGGY_SAFARI_ITERATORS,g=u("iterator"),b="keys",m="values",v="entries",y=function(){return this};t.exports=function(t,e,r,u,h,w,x){o(r,e,u);var E,k,L,M=function(t){if(t===h&&C)return C;if(!_&&t in A)return A[t];switch(t){case b:case m:case v:return function(){return new r(this,t)}}return function(){return new r(this)}},S=e+" Iterator",O=!1,A=t.prototype,z=A[g]||A["@@iterator"]||h&&A[h],C=!_&&z||M(h),P="Array"==e&&A.entries||z;if(P&&(E=a(P.call(new t)),p!==Object.prototype&&E.next&&(f||a(E)===p||(i?i(E,p):"function"!=typeof E[g]&&l(E,g,y)),s(E,S,!0,!0),f&&(d[S]=y))),h==m&&z&&z.name!==m&&(O=!0,C=function(){return z.call(this)}),f&&!x||A[g]===C||l(A,g,C),d[e]=C,h)if(k={values:M(m),keys:w?C:M(b),entries:M(v)},x)for(L in k)(_||O||!(L in A))&&c(A,L,k[L]);else n({target:e,proto:!0,forced:_||O},k);return k}},7400:(t,e,r)=>{var n=r(4229);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2635:(t,e,r)=>{var n=r(9859),o=r(5052),a=n.document,i=o(a)&&o(a.createElement);t.exports=function(t){return i?a.createElement(t):{}}},5694:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8801:(t,e,r)=>{var n=r(7079),o=r(9859);t.exports="process"==n(o.process)},598:(t,e,r)=>{var n=r(1333);t.exports=n("navigator","userAgent")||""},6358:(t,e,r)=>{var n,o,a=r(9859),i=r(598),s=a.process,l=s&&s.versions,c=l&&l.v8;c?o=(n=c.split("."))[0]+n[1]:i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(o=n[1]),t.exports=o&&+o},3837:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(t,e,r)=>{var n=r(9859),o=r(7933).f,a=r(5762),i=r(7487),s=r(2079),l=r(7081),c=r(6541);t.exports=function(t,e){var r,u,f,d,h,p=t.target,_=t.global,g=t.stat;if(r=_?n:g?n[p]||s(p,{}):(n[p]||{}).prototype)for(u in e){if(d=e[u],f=t.noTargetGet?(h=o(r,u))&&h.value:r[u],!c(_?u:p+(g?".":"#")+u,t.forced)&&void 0!==f){if(typeof d==typeof f)continue;l(d,f)}(t.sham||f&&f.sham)&&a(d,"sham",!0),i(r,u,d,t)}}},4229:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},4954:(t,e,r)=>{"use strict";r(7950);var n=r(7487),o=r(4229),a=r(95),i=r(3466),s=r(5762),l=a("species"),c=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u="$0"==="a".replace(/./,"$0"),f=a("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),h=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,f){var p=a(t),_=!o((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),g=_&&!o((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[l]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return e=!0,null},r[p](""),!e}));if(!_||!g||"replace"===t&&(!c||!u||d)||"split"===t&&!h){var b=/./[p],m=r(p,""[t],(function(t,e,r,n,o){return e.exec===i?_&&!o?{done:!0,value:b.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),v=m[0],y=m[1];n(String.prototype,t,v),n(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}f&&s(RegExp.prototype[p],"sham",!0)}},1333:(t,e,r)=>{var n=r(9276),o=r(9859),a=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?a(n[t])||a(o[t]):n[t]&&n[t][e]||o[t]&&o[t][e]}},17:(t,e,r)=>{var n=r(2991),o=Math.floor,a="".replace,i=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,r,l,c,u){var f=r+t.length,d=l.length,h=s;return void 0!==c&&(c=n(c),h=i),a.call(u,h,(function(n,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(f);case"<":i=c[a.slice(1,-1)];break;default:var s=+a;if(0===s)return n;if(s>d){var u=o(s/10);return 0===u?n:u<=d?void 0===l[u-1]?a.charAt(1):l[u-1]+a.charAt(1):n}i=l[s-1]}return void 0===i?"":i}))}},9859:(t,e,r)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},816:t=>{var e={}.hasOwnProperty;t.exports=function(t,r){return e.call(t,r)}},5977:t=>{t.exports={}},3777:(t,e,r)=>{var n=r(1333);t.exports=n("document","documentElement")},4394:(t,e,r)=>{var n=r(7400),o=r(4229),a=r(2635);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},9337:(t,e,r)=>{var n=r(4229),o=r(7079),a="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?a.call(t,""):Object(t)}:Object},8511:(t,e,r)=>{var n=r(5353),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return o.call(t)}),t.exports=n.inspectSource},6407:(t,e,r)=>{var n,o,a,i=r(8694),s=r(9859),l=r(5052),c=r(5762),u=r(816),f=r(5353),d=r(4399),h=r(5977),p=s.WeakMap;if(i){var _=f.state||(f.state=new p),g=_.get,b=_.has,m=_.set;n=function(t,e){return e.facade=t,m.call(_,t,e),e},o=function(t){return g.call(_,t)||{}},a=function(t){return b.call(_,t)}}else{var v=d("state");h[v]=!0,n=function(t,e){return e.facade=t,c(t,v,e),e},o=function(t){return u(t,v)?t[v]:{}},a=function(t){return u(t,v)}}t.exports={set:n,get:o,has:a,enforce:function(t){return a(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!l(e)||(r=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},6541:(t,e,r)=>{var n=r(4229),o=/#|\.prototype\./,a=function(t,e){var r=s[i(t)];return r==c||r!=l&&("function"==typeof e?n(e):!!e)},i=a.normalize=function(t){return String(t).replace(o,".").toLowerCase()},s=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},5052:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},4231:t=>{t.exports=!1},693:(t,e,r)=>{"use strict";var n,o,a,i=r(7567),s=r(5762),l=r(816),c=r(95),u=r(4231),f=c("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(o=i(i(a)))!==Object.prototype&&(n=o):d=!0),null==n&&(n={}),u||l(n,f)||s(n,f,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},5495:t=>{t.exports={}},3839:(t,e,r)=>{var n=r(4229);t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},8694:(t,e,r)=>{var n=r(9859),o=r(8511),a=n.WeakMap;t.exports="function"==typeof a&&/native code/.test(o(a))},2391:(t,e,r)=>{var n,o=r(1176),a=r(219),i=r(3837),s=r(5977),l=r(3777),c=r(2635),u=r(4399),f=u("IE_PROTO"),d=function(){},h=function(t){return"<script>"+t+"</"+"script>"},p=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=n?function(t){t.write(h("")),t.close();var e=t.parentWindow.Object;return t=null,e}(n):((e=c("iframe")).style.display="none",l.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(h("document.F=Object")),t.close(),t.F);for(var r=i.length;r--;)delete p.prototype[i[r]];return p()};s[f]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(d.prototype=o(t),r=new d,d.prototype=null,r[f]=t):r=p(),void 0===e?r:a(r,e)}},219:(t,e,r)=>{var n=r(7400),o=r(1787),a=r(1176),i=r(5632);t.exports=n?Object.defineProperties:function(t,e){a(t);for(var r,n=i(e),s=n.length,l=0;s>l;)o.f(t,r=n[l++],e[r]);return t}},1787:(t,e,r)=>{var n=r(7400),o=r(4394),a=r(1176),i=r(2066),s=Object.defineProperty;e.f=n?s:function(t,e,r){if(a(t),e=i(e,!0),a(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},7933:(t,e,r)=>{var n=r(7400),o=r(9195),a=r(5358),i=r(905),s=r(2066),l=r(816),c=r(4394),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=i(t),e=s(e,!0),c)try{return u(t,e)}catch(t){}if(l(t,e))return a(!o.f.call(t,e),t[e])}},8151:(t,e,r)=>{var n=r(140),o=r(3837).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},894:(t,e)=>{e.f=Object.getOwnPropertySymbols},7567:(t,e,r)=>{var n=r(816),o=r(2991),a=r(4399),i=r(7528),s=a("IE_PROTO"),l=Object.prototype;t.exports=i?Object.getPrototypeOf:function(t){return t=o(t),n(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},140:(t,e,r)=>{var n=r(816),o=r(905),a=r(9540).indexOf,i=r(5977);t.exports=function(t,e){var r,s=o(t),l=0,c=[];for(r in s)!n(i,r)&&n(s,r)&&c.push(r);for(;e.length>l;)n(s,r=e[l++])&&(~a(c,r)||c.push(r));return c}},5632:(t,e,r)=>{var n=r(140),o=r(3837);t.exports=Object.keys||function(t){return n(t,o)}},9195:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},6540:(t,e,r)=>{var n=r(1176),o=r(8505);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,a){return n(r),o(a),e?t.call(r,a):r.__proto__=a,r}}():void 0)},4826:(t,e,r)=>{var n=r(1333),o=r(8151),a=r(894),i=r(1176);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(i(t)),r=a.f;return r?e.concat(r(t)):e}},9276:(t,e,r)=>{var n=r(9859);t.exports=n},7487:(t,e,r)=>{var n=r(9859),o=r(5762),a=r(816),i=r(2079),s=r(8511),l=r(6407),c=l.get,u=l.enforce,f=String(String).split("String");(t.exports=function(t,e,r,s){var l,c=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof e||a(r,"name")||o(r,"name",e),(l=u(r)).source||(l.source=f.join("string"==typeof e?e:""))),t!==n?(c?!h&&t[e]&&(d=!0):delete t[e],d?t[e]=r:o(t,e,r)):d?t[e]=r:i(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},8115:(t,e,r)=>{var n=r(7079),o=r(3466);t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var a=r.call(t,e);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},3466:(t,e,r)=>{"use strict";var n,o,a=r(895),i=r(5650),s=RegExp.prototype.exec,l=String.prototype.replace,c=s,u=(n=/a/,o=/b*/g,s.call(n,"a"),s.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),f=i.UNSUPPORTED_Y||i.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(u||d||f)&&(c=function(t){var e,r,n,o,i=this,c=f&&i.sticky,h=a.call(i),p=i.source,_=0,g=t;return c&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),g=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,_++),r=new RegExp("^(?:"+p+")",h)),d&&(r=new RegExp("^"+p+"$(?!\\s)",h)),u&&(e=i.lastIndex),n=s.call(c?r:i,g),c?n?(n.input=n.input.slice(_),n[0]=n[0].slice(_),n.index=i.lastIndex,i.lastIndex+=n[0].length):i.lastIndex=0:u&&n&&(i.lastIndex=i.global?n.index+n[0].length:e),d&&n&&n.length>1&&l.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n}),t.exports=c},895:(t,e,r)=>{"use strict";var n=r(1176);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},5650:(t,e,r)=>{"use strict";var n=r(4229);function o(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},8885:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},2079:(t,e,r)=>{var n=r(9859),o=r(5762);t.exports=function(t,e){try{o(n,t,e)}catch(r){n[t]=e}return e}},4555:(t,e,r)=>{var n=r(1787).f,o=r(816),a=r(95)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,a)&&n(t,a,{configurable:!0,value:e})}},4399:(t,e,r)=>{var n=r(3036),o=r(1441),a=n("keys");t.exports=function(t){return a[t]||(a[t]=o(t))}},5353:(t,e,r)=>{var n=r(9859),o=r(2079),a="__core-js_shared__",i=n[a]||o(a,{});t.exports=i},3036:(t,e,r)=>{var n=r(4231),o=r(5353);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.2",mode:n?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},966:(t,e,r)=>{var n=r(6051),o=r(8885),a=function(t){return function(e,r){var a,i,s=String(o(e)),l=n(r),c=s.length;return l<0||l>=c?t?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===c||(i=s.charCodeAt(l+1))<56320||i>57343?t?s.charAt(l):a:t?s.slice(l,l+2):i-56320+(a-55296<<10)+65536}};t.exports={codeAt:a(!1),charAt:a(!0)}},3231:(t,e,r)=>{var n=r(6051),o=Math.max,a=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):a(r,e)}},905:(t,e,r)=>{var n=r(9337),o=r(8885);t.exports=function(t){return n(o(t))}},6051:t=>{var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},4237:(t,e,r)=>{var n=r(6051),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},2991:(t,e,r)=>{var n=r(8885);t.exports=function(t){return Object(n(t))}},2066:(t,e,r)=>{var n=r(5052);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},1441:t=>{var e=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+r).toString(36)}},6969:(t,e,r)=>{var n=r(3839);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},95:(t,e,r)=>{var n=r(9859),o=r(3036),a=r(816),i=r(1441),s=r(3839),l=r(6969),c=o("wks"),u=n.Symbol,f=l?u:u&&u.withoutSetter||i;t.exports=function(t){return a(c,t)||(s&&a(u,t)?c[t]=u[t]:c[t]=f("Symbol."+t)),c[t]}},5735:(t,e,r)=>{"use strict";var n=r(905),o=r(9736),a=r(5495),i=r(6407),s=r(7675),l="Array Iterator",c=i.set,u=i.getterFor(l);t.exports=s(Array,"Array",(function(t,e){c(this,{type:l,target:n(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},3108:(t,e,r)=>{"use strict";var n=r(3103),o=r(3143).left,a=r(6038),i=r(3037),s=r(6358),l=r(8801),c=a("reduce"),u=i("reduce",{1:0});n({target:"Array",proto:!0,forced:!c||!u||!l&&s>79&&s<83},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},7950:(t,e,r)=>{"use strict";var n=r(3103),o=r(3466);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},5940:(t,e,r)=>{"use strict";var n=r(4954),o=r(1176),a=r(4237),i=r(6051),s=r(8885),l=r(6637),c=r(17),u=r(8115),f=Math.max,d=Math.min;n("replace",2,(function(t,e,r,n){var h=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=n.REPLACE_KEEPS_$0,_=h?"$":"$0";return[function(r,n){var o=s(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,n):e.call(String(o),r,n)},function(t,n){if(!h&&p||"string"==typeof n&&-1===n.indexOf(_)){var s=r(e,t,this,n);if(s.done)return s.value}var g=o(t),b=String(this),m="function"==typeof n;m||(n=String(n));var v=g.global;if(v){var y=g.unicode;g.lastIndex=0}for(var w=[];;){var x=u(g,b);if(null===x)break;if(w.push(x),!v)break;""===String(x[0])&&(g.lastIndex=l(b,a(g.lastIndex),y))}for(var E,k="",L=0,M=0;M<w.length;M++){x=w[M];for(var S=String(x[0]),O=f(d(i(x.index),b.length),0),A=[],z=1;z<x.length;z++)A.push(void 0===(E=x[z])?E:String(E));var C=x.groups;if(m){var P=[S].concat(A,O,b);void 0!==C&&P.push(C);var T=String(n.apply(void 0,P))}else T=c(S,b,O,A,C,n);O>=L&&(k+=b.slice(L,O)+T,L=O+S.length)}return k+b.slice(L)}]}))},6886:(t,e,r)=>{var n=r(9859),o=r(5694),a=r(5735),i=r(5762),s=r(95),l=s("iterator"),c=s("toStringTag"),u=a.values;for(var f in o){var d=n[f],h=d&&d.prototype;if(h){if(h[l]!==u)try{i(h,l,u)}catch(t){h[l]=u}if(h[c]||i(h,c,f),o[f])for(var p in a)if(h[p]!==a[p])try{i(h,p,a[p])}catch(t){h[p]=a[p]}}}},8889:()=>{const t=new WeakMap,e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?5e6:1e7;function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e,r,n,o){var a={};return Object.keys(n).forEach((function(t){a[t]=n[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}class o{constructor(t,e,r){this._column_sizes=t,this._container=e,this.table=r,this.cells=[],this.rows=[]}num_columns(){return this._get_row(Math.max(0,this.rows.length-1)).row_container.length}num_rows(){return this.cells.length}_set_metadata(e,r){t.set(e,r)}_get_or_create_metadata(e){if(void 0===e)return{};if(t.has(e))return t.get(e);{const r={};return t.set(e,r),r}}_replace_cell(t,e){const{tr:r,row_container:n}=this._get_row(t);let o=n[e];return o&&(r.removeChild(o),n.splice(e,1,void 0)),o}_fetch_cell(t,e){if(t<0||e<0)return;const{row_container:r}=this._get_row(t);return r[e]}_get_cell(t="TD",e,r){const{tr:n,row_container:o}=this._get_row(e);let a=o[r];if(a||(r<o.length?(a=o[r]=document.createElement(t),n.insertBefore(a,o.slice(r+1).find((t=>t)))):(a=o[r]=document.createElement(t),n.appendChild(a))),a.tagName!==t){const o=document.createElement(t);n.replaceChild(o,a),this.cells[e].splice(r,1,o),a=o}return a}_get_row(t){let e=this.rows[t];e||(e=this.rows[t]=document.createElement("tr"),this.table.appendChild(e));let r=this.cells[t];return r||(r=this.cells[t]=[]),{tr:e,row_container:r}}_clean_columns(t){for(let e=0;e<this.rows.length;e++){const r=this.rows[e],n=this.cells[e];this.cells[e]=n.slice(0,t[e]||t);const o=this.cells[e].filter((t=>void 0!==t)).length;for(;r.children[o];)r.removeChild(r.children[o])}}_clean_rows(t){for(;this.table.children[t];)this.table.removeChild(this.table.children[t]);this.rows=this.rows.slice(0,t),this.cells=this.cells.slice(0,t)}}class a extends o{constructor(...t){super(...t),r(this,"_group_header_cache",[]),r(this,"_offset_cache",[])}_draw_group_th(t,e,r){const n=this._get_cell("TH",e,t[e]||0);if(t[e]+=1,n.removeAttribute("colspan"),n.style.minWidth="0",n.textContent="",r instanceof HTMLElement)n.appendChild(r);else{const t=document.createElement("span");t.textContent=r,n.appendChild(t)}const o=document.createElement("span");return o.className="rt-column-resize",n.appendChild(o),n}_draw_group(t,e,r){const n=this._get_or_create_metadata(r);return n.column_header=t,n.value=e,n.value=e,n}_draw_th(t,e,r,n,o){const a=this._get_or_create_metadata(r);if(a.column_header=t,a.value=e,a.size_key=o.length?o[0]:o,!(o.length>1)){const t=this._column_sizes.override[a.size_key],e=this._column_sizes.auto[a.size_key];t?(r.classList.toggle("rt-cell-clip",e>t),r.style.minWidth=t+"px",r.style.maxWidth=t+"px"):e?(r.classList.remove("rt-cell-clip"),r.style.maxWidth="",r.style.minWidth=e+"px"):(r.style.maxWidth="",r.style.maxWidth="")}return a}get_column_header(t){return this._get_cell("TH",this.num_rows()-1,t)}draw(t,e,r,n,o,a,i){const s=null==e?void 0:e.length;if(0===s)return{};let l,c,u;for(let p=0;p<s;p++){if(u=e[p]?e[p]:"",this._offset_cache[p]=this._offset_cache[p]||0,p<s-1){var f,d,h;(null===(f=this._group_header_cache)||void 0===f||null===(d=f[p])||void 0===d||null===(h=d[0])||void 0===h?void 0:h.value)===u?(l=this._group_header_cache[p][1],this._group_header_cache[p][2]+=1,1===r&&(this._group_header_cache[p][0].row_header_x=o),l.setAttribute("colspan",this._group_header_cache[p][2])):(l=this._draw_group_th(this._offset_cache,p,u),c=this._draw_group(e,u,l),this._group_header_cache[p]=[c,l,1])}else{l=this._draw_group_th(this._offset_cache,p,u),c=this._draw_th(t||e,u,l,n,o);for(const[t]of this._group_header_cache)t.size_key=c.size_key;l.removeAttribute("colspan")}c&&(c.x=n,c.column_header_y=p,c.x0=a,c._virtual_x=i,1===r&&(c.row_header_x=o))}return this._clean_rows(this._offset_cache.length),{th:l,metadata:c}}clean(){this._clean_columns(this._offset_cache)}reset_header_cache(){this._offset_cache=[],this._group_header_cache=[]}}class i extends o{_draw_td(t,e,r,n,{column_name:o},{ridx_offset:a},i){const s=this._get_cell(t,e,n),l=this._get_or_create_metadata(s);l.y=e+a,l.size_key=i,"TD"===t&&(l.column_header=o);const c=this._column_sizes.override[l.size_key];if(c){const t=this._column_sizes.auto[l.size_key];s.classList.toggle("rt-cell-clip",t>c),s.style.minWidth=c+"px",s.style.maxWidth=c+"px"}else s.classList.remove("rt-cell-clip"),s.style.minWidth="",s.style.maxWidth="";return r instanceof HTMLElement?(s.textContent="",s.appendChild(r)):s.textContent=r,l.value=r,{td:s,metadata:l}}draw(t,e,r,n=!1,o,a,i){const{cidx:s,column_data:l,row_headers:c,column_data_listener_metadata:u}=e;let f,{row_height:d}=r;const h=[],p=[];let _=0;const g=[];for(let m=0;m<(n?r.row_headers_length:1);m++){_=0;for(const v of l){var b;const l=null==c?void 0:c[_];let y;if(n){const t=v[m],n=this._fetch_cell(_-(h[m]||1),s+m),o=this._get_or_create_metadata(n),i=this._fetch_cell(_,s+m-(g[_]||1)),l=this._get_or_create_metadata(i);!i||l.value!==t&&void 0!==t||i.hasAttribute("rowspan")?n&&o.value===t&&!n.hasAttribute("colspan")?(h[m]=h[m]?h[m]+1:2,n.setAttribute("rowspan",h[m]),this._replace_cell(_,s+m)):(y=this._draw_td("TH",_,t,s+m,e,r,m),y.td.style.display="",y.td.removeAttribute("rowspan"),y.td.removeAttribute("colspan"),y.metadata.row_header=v,y.metadata.row_header_x=m,y.metadata.x0=a,y.metadata.y0=r.ridx_offset,y.metadata.y1=r.y1,y.metadata._virtual_x=m,h[m]=1,g[_]=1,p[m]=y):(g[_]=g[_]?g[_]+1:2,i.setAttribute("colspan",g[_]),this._replace_cell(_,s+m))}else y=this._draw_td("TD",_,v,s,e,r,i),u&&(y.metadata.user=u[_]),y.metadata.x=o,y.metadata.x0=a,y.metadata.x1=r.x1,y.metadata.row_header=l||[],y.metadata.y0=r.ridx_offset,y.metadata.y1=r.y1,y.metadata.dx=o-a,y.metadata.dy=y.metadata.y-y.metadata.y0,y.metadata._virtual_x=s,p[0]=y;if(_++,f=y?y.metadata:f,d=d||(null===(b=y)||void 0===b?void 0:b.td.offsetHeight),_*d>t)break}}return this._clean_rows(_),{tds:p,ridx:_,metadata:f,row_height:d}}clean({ridx:t,cidx:e}){this._clean_rows(t),this._clean_columns(e)}}let s=0,l=0,c=performance.now();const u=(t,...e)=>t.map(((t,r)=>[t,e[r]])).flat().filter((t=>!!t)).join("");function f(t,e,r){const n=Symbol("private lock"),o=r.value;return r.value=async function(...t){if(this[n]&&(await this[n],this[n]))return void await this[n];let e;this[n]=(()=>{let t;const e=new Promise((e=>{t=e}));return e.resolve=t,e})();try{e=await o.call(this,...t)}finally{const t=this[n];this[n]=void 0,t.resolve()}return e},r.value.flush=function(){return this[n]},r}class d{constructor(t,e,r){this.clear(r);const[n]=r.children,[o,s]=n.children;this.table=n,this._column_sizes=e,this.header=new a(e,t,o),this.body=new i(e,t,s),this.fragment=document.createDocumentFragment()}num_columns(){return this.header.num_columns()}clear(t){t.innerHTML=u` <table cellspacing="0"> <thead></thead> <tbody></tbody> </table> `}autosize_cells(t){for(;t.length>0;){const[e,r,n]=t.pop();let o;const a=getComputedStyle(e);"border-box"!==a.boxSizing?(o=e.clientWidth,o-=parseFloat(a.paddingLeft),o-=parseFloat(a.paddingRight)):o=e.offsetWidth,this._column_sizes.row_height=this._column_sizes.row_height||n.offsetHeight,this._column_sizes.indices[r.size_key]=o;const i=this._column_sizes.override.hasOwnProperty(r.size_key);o&&!i&&(this._column_sizes.auto[r.size_key]=o),"0px"===e.style.minWidth&&(e.style.minWidth=o+"px")}}async*draw(t,e,r,n,o,a){var i,s,l,c;const{width:u,height:f}=t,{view:d,config:h}=e;let{data:p,row_headers:_,column_headers:g,metadata:b}=await d(o.start_col,o.start_row,o.end_col,o.end_row);const{start_row:m=0,start_col:v=0,end_col:y=0,end_row:w=0}=o;_&&(this._row_headers_length=_.reduce(((t,e)=>Math.max(t,e.length)),0),_=_.map((t=>(t.length=this._row_headers_length,t)))),e.config.column_pivots=Array.from(Array((null==g||null===(i=g[0])||void 0===i?void 0:i.length)-1||0).keys()),e.config.row_pivots=Array.from(Array((null===(s=_)||void 0===s||null===(l=s[0])||void 0===l?void 0:l.length)||0).keys());const x={viewport_width:0,selected_id:r,ridx_offset:m,x0:v,x1:y,y1:w,row_height:this._column_sizes.row_height,row_headers_length:this._row_headers_length};let E,k=0,L=[],M=!0;if((null===(c=_)||void 0===c?void 0:c.length)>0){const t=h.row_pivots.join(","),r={column_name:t,cidx:0,column_data:_,row_headers:_,first_col:M},o=k+v;E=this.body.draw(f,r,{...x,x0:0},!0,void 0,void 0,o);const a=[];for(let r=0;r<e.config.row_pivots.length;r++)a.push(this.header.draw(t,Array(e.config.column_pivots.length+1).fill(""),1,void 0,r,v,r));if(M=!1,x.viewport_width+=a.reduce(((t,{th:e},r)=>t+(this._column_sizes.indices[r]||e.offsetWidth)),0),x.row_height=x.row_height||E.row_height,k=_[0].length,!n)for(let t=0;t<e.config.row_pivots.length;t++){const{td:e,metadata:r}=E.tds[t]||{},{th:n,metadata:o}=a[t];L.push([n||e,o||r,e||n])}}try{var S;let t=0;const e=a-o.start_col;for(;t<e;){if(!p[t]){let e=Math.max(o.end_col,0);o.start_col=e;let r=0,n=0;for(;this._column_sizes.indices.length>k+v+r+1&&n+x.viewport_width<u;)r++,n+=this._column_sizes.indices[k+v+r];if(n+x.viewport_width<u){const t=Math.min(a,e+5);o.end_col=Math.max(1,Math.min(a,t))}else o.end_col=Math.max(1,Math.min(a,e+r));const i=d(o.start_col,o.start_row,o.end_col,o.end_row);yield;const s=await i;if(0===s.data.length)return void(yield L);o.end_col=o.start_col+s.data.length;for(let e=0;e<s.data.length;e++){var O;p[t+e]=s.data[e],s.metadata&&(b[t+e]=s.metadata[e]),g&&(g[t+e]=null===(O=s.column_headers)||void 0===O?void 0:O[e])}}const e=(null==g?void 0:g[t])||"",r={column_name:e,cidx:k,column_data:p[t],column_data_listener_metadata:null==b?void 0:b[t],row_headers:_,first_col:M},i=t+v,s=k+v,l=this.header.draw(void 0,e,void 0,i,s,v,k);if(E=this.body.draw(f,r,x,!1,i,v,s),M=!1,!n)for(const{td:t,metadata:e}of E.tds)L.push([l.th||t,l.metadata||e,t||l.th]);const c=this._column_sizes.indices[k+v];var A;if(x.viewport_width+=c||((null===(A=l.th)||void 0===A?void 0:A.offsetWidth)||E.tds.reduce(((t,e)=>{var r;return t+(null===(r=e.td)||void 0===r?void 0:r.offsetWidth)}),0)),x.row_height=x.row_height||E.row_height,k++,t++,x.viewport_width>u){var z;this.body.clean({ridx:(null===(z=E)||void 0===z?void 0:z.ridx)||0,cidx:k}),this.header.clean(),yield L,x.viewport_width=0;for(let[t]of L)x.viewport_width+=t.offsetWidth;if(x.viewport_width>u)return}}this.body.clean({ridx:(null===(S=E)||void 0===S?void 0:S.ridx)||0,cidx:k}),this.header.clean(),yield L}finally{var C;this.body.clean({ridx:(null===(C=E)||void 0===C?void 0:C.ridx)||0,cidx:k}),this.header.clean()}}}var h;function p(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(p.prototype,HTMLElement.prototype),Object.setPrototypeOf(p,HTMLElement);let _=(n((h=class extends p{create_shadow_dom(){this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=u` <style> ${":host{bottom:0;overflow:scroll;overflow-anchor:none;overscroll-behavior:none;-webkit-overflow-scrolling:touch}:host,div.rt-virtual-panel{position:absolute;top:0;left:0;right:0}div.rt-virtual-panel{pointer-events:none}div.rt-scroll-table-clip{position:sticky;overflow-anchor:none;width:100%;height:100%}div.rt-tree-container{display:flex;align-items:center;height:100%}slot{position:absolute;overflow:hidden;overflow-anchor:none}"} </style> <div class="rt-virtual-panel"></div> <div class="rt-scroll-table-clip"> ${"<slot></slot>"} </div> `;const[,t,e]=this.shadowRoot.children;this._table_clip=e,this._virtual_panel=t,this._setup_virtual_scroll()}_setup_virtual_scroll(){this._table_clip&&("both"!==this._virtual_mode&&"vertical"!==this._virtual_mode||(this._table_clip.style.top="0px"),"both"!==this._virtual_mode&&"horizontal"!==this._virtual_mode||(this._table_clip.style.left="0px"))}_calculate_viewport(t,e,r,n){const{start_row:o,end_row:a}=this._calculate_row_range(t,r),{start_col:i,end_col:s}=this._calculate_column_range(e,n);return this._nrows=t,{start_col:i,end_col:s,start_row:o,end_row:a}}_calculate_row_range(t,e){const{height:r}=this._container_size,n=this._column_sizes.row_height||19,o=this._view_cache.config.column_pivots.length+1,a=Math.max(1,this._virtual_panel.offsetHeight-this.clientHeight),i=Math.max(this.scrollTop,0)/a,s=r/n,l=e?t:this._nrows||0,c=Math.max(0,l+(o-s));let u=Math.ceil(c*i);return{start_row:u,end_row:Math.min(Math.ceil(u+s),t)}}_calculate_column_range(t,e){const r=Math.max(1,this._virtual_panel.offsetWidth-this._container_size.width),n=this.scrollLeft/r,o=this._max_scroll_column(t)+.5;if("none"===this._virtual_mode||"vertical"===this._virtual_mode)return{start_col:0,end_col:1/0};{let r=Math.floor(o*n);return{start_col:r,end_col:r+(!e&&this.table_model.num_columns()||Math.min(t,Math.ceil(this._container_size.width/60)))+1}}}_max_scroll_column(t){let e=0;if(this._view_cache.config.row_pivots.length>0)for(const t of this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length))e+=t;let r=t;for(;e<this._container_size.width&&r>=0;)r--,e+=this._column_sizes.indices[r]||60;return Math.min(t-1,r+1)}_validate_viewport({start_col:t,end_col:e,start_row:r,end_row:n}){const o=this._start_col!==t,a=this._start_row!==r||this._end_row!==n||this._end_col!==e;return this._start_col=t,this._end_col=e,this._start_row=r,this._end_row=n,{invalid_column:o,invalid_row:a}}_update_virtual_panel_width(t,e){if(t)if("vertical"===this._virtual_mode||"none"===this._virtual_mode)this._virtual_panel.style.width=this._column_sizes.indices.reduce(((t,e)=>t+e),0)+"px";else{const t=Math.max(1,this._virtual_panel.offsetWidth-this._container_size.width),r=this.scrollLeft/t,n=this._max_scroll_column(e);let o=0,a=0;for(;o<n;)a+=this._column_sizes.indices[o]||60,o++;const i=this._container_size.width+a;this._virtual_panel.style.width=i+"px",this.scrollLeft=r*a}}_update_virtual_panel_height(t){const{row_height:r=19}=this._column_sizes,n=this.table_model.header.num_rows()*r;let o;if("horizontal"===this._virtual_mode||"none"===this._virtual_mode)o=t*r+n;else{const a=this.clientHeight/(this._table_clip.offsetHeight-n);o=Math.min(e,t*r*a)}this._virtual_panel.style.height=o+"px"}async draw(t={}){const e=performance.now(),{invalid_viewport:r=!0,preserve_width:n=!1,reset_scroll_position:o=!1,invalid_columns:a=!1}=t;o&&this.reset_scroll(),this._invalid_schema=a||this._invalid_schema;const{num_columns:i,num_rows:c}=await this._view_cache.view(0,0,0,0);this._container_size={width:"none"===this._virtual_mode||"vertical"===this._virtual_mode?1/0:this._table_clip.clientWidth,height:"none"===this._virtual_mode||"horizontal"===this._virtual_mode?1/0:this._table_clip.clientHeight};const u=this._calculate_viewport(c,i,o,a),{invalid_row:f,invalid_column:d}=this._validate_viewport(u);if(this._update_virtual_panel_height(c),this._invalid_schema||f||d||r||d){this.dispatchEvent(new CustomEvent("regular-table-before-update",{bubbles:!0,detail:this}));let t=[];for await(t of this.table_model.draw(this._container_size,this._view_cache,this._selected_id,n,u,i)){this._is_styling=!0;const e=this._style_callbacks;for(const t of e)await t({detail:this});if(this._is_styling=!1,!this._invalidated&&void 0!==t)break;this._invalidated=!1}this.table_model.autosize_cells(t),this.table_model.header.reset_header_cache(),n||this._update_virtual_panel_width(this._invalid_schema||d||r,i),this._invalid_schema=!1}var h;h=performance.now()-e,s=(s*l+h)/(l+1),l+=1}}).prototype,"draw",[f],Object.getOwnPropertyDescriptor(h.prototype,"draw"),h.prototype),h);var g;let b=(n((g=class extends _{register_listeners(){this.addEventListener("mousedown",this._on_click.bind(this)),this.addEventListener("dblclick",this._on_dblclick.bind(this)),this.addEventListener("scroll",this._on_scroll.bind(this),{passive:!1}),this._register_glitch_scroll_listeners()}async _on_scroll(t){t.stopPropagation(),t.returnValue=!1,await this.draw({invalid_viewport:!1}),this.dispatchEvent(new CustomEvent("regular-table-scroll"))}_register_glitch_scroll_listeners(){this.addEventListener("mousewheel",this._on_mousewheel.bind(this),{passive:!1}),this.addEventListener("touchstart",this._on_touchstart.bind(this),{passive:!1}),this.addEventListener("touchmove",this._on_touchmove.bind(this),{passive:!1})}_on_mousewheel(t){if(!window.safari)return;const{clientWidth:e,clientHeight:r,scrollTop:n,scrollLeft:o,scrollHeight:a}=this;if(t.deltaY>0&&n+r>=a||t.deltaY<0&&n<=0){t.preventDefault(),t.returnValue=!1;const a=Math.max(1,this._virtual_panel.offsetHeight-r),i=Math.max(1,this._virtual_panel.offsetWidth-e);this.scrollTop=Math.min(a,n+t.deltaY),this.scrollLeft=Math.min(i,o+t.deltaX),this._on_scroll(t)}}_on_touchmove(t){t.preventDefault(),t.returnValue=!1;const{clientWidth:e,clientHeight:r,scrollTop:n,scrollLeft:o}=this,a=Math.max(1,this._virtual_panel.offsetHeight-r),i=Math.max(1,this._virtual_panel.offsetWidth-e);this.scrollTop=Math.min(a,n+(this._memo_touch_startY-t.touches[0].screenY)),this.scrollLeft=Math.min(i,o+(this._memo_touch_startX-t.touches[0].screenX)),this._on_scroll(t)}_on_touchstart(t){this._memo_touch_startY=t.touches[0].screenY,this._memo_touch_startX=t.touches[0].screenX}async _on_dblclick(e){let r=e.target;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!this.contains(r))return;const n=e.target.classList.contains("rt-column-resize"),o=t.get(r);if(n){e.stopImmediatePropagation(),r.style.minWidth="",r.style.maxWidth="",e.shiftKey?(this._column_sizes.override=[],this._column_sizes.auto=[],this._column_sizes.indices=[]):(delete this._column_sizes.override[o.size_key],delete this._column_sizes.auto[o.size_key],delete this._column_sizes.indices[o.size_key]);for(const t of e.shiftKey?[this.table_model.header.cells[this.table_model.header.cells.length-1],...this.table_model.body.cells]:this.table_model.body.cells)for(const r of e.shiftKey?t:[t[o._virtual_x]])r&&(r.style.minWidth="",r.style.maxWidth="",r.classList.remove("rt-cell-clip"));await this.draw()}}async _on_click(e){if(0!==e.button)return;let r=e.target;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!this.contains(r))return;const n=e.target.classList.contains("rt-column-resize"),o=t.get(r);n&&(this._on_resize_column(e,r,o),e.stopImmediatePropagation())}_on_resize_column(t,e,r){const{_virtual_x:n,size_key:o}=r,a=t.pageX,i=n+e.colSpan-1,s=this.table_model.header.get_column_header(i),l=this._column_sizes.indices[o],c=t=>this._on_resize_column_move(t,s,a,l,o,i),u=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u);const t=this._column_sizes.override[o],e=this._column_sizes.indices[o]!==t;this._column_sizes.indices[o]=t,e&&this.draw()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)}async _on_resize_column_move(t,e,r,n,o,a){await new Promise(setTimeout);const i=t.pageX-r,s=Math.max(1,n+i);if(this._column_sizes.override[o]=s,i<0)await this.draw({preserve_width:!0});else{e.style.minWidth=s+"px",e.style.maxWidth=s+"px";const t=this._column_sizes.auto[o];for(const e of this.table_model.body.cells){const r=e[a];r&&(r.style.maxWidth=r.style.minWidth=s+"px",r.classList.toggle("rt-cell-clip",t>s))}}}}).prototype,"_on_resize_column_move",[f],Object.getOwnPropertyDescriptor(g.prototype,"_on_resize_column_move"),g.prototype),g);const m=["both","horizontal","vertical","none"];document.createElement("regular-table").constructor===HTMLElement&&window.customElements.define("regular-table",class extends b{connectedCallback(){this._initialized||(this.create_shadow_dom(),this.register_listeners(),this.setAttribute("tabindex","0"),this._column_sizes={auto:{},override:{},indices:[]},this._style_callbacks=[],this.table_model=new d(this._table_clip,this._column_sizes,this),this._initialized=!0)}_reset_viewport(){this._start_row=void 0,this._end_row=void 0,this._start_col=void 0,this._end_col=void 0}_reset_scroll(){this._column_sizes.indices=[],this.scrollTop=0,this.scrollLeft=0,this._reset_viewport()}_resetAutoSize(){this._column_sizes.auto={},this._column_sizes.override={},this._column_sizes.indices=[];for(let t=0;t<this.table_model.header.num_columns();t++){const e=this.table_model.header.get_column_header(t);e.style.minWidth="",e.style.maxWidth=""}}clear(){this.table_model=new d(this._table_clip,this._column_sizes,this)}addStyleListener(t){this._style_callbacks=this._style_callbacks.concat(t);let e=!0;return()=>{if(!e)return;e=!1;const r=this._style_callbacks=this._style_callbacks.slice(),n=r.indexOf(t);r.splice(n,1)}}invalidate(){if(!this._is_styling)throw new Error("Cannot call `invalidate()` outside of a `StyleListener`");this._invalidated=!0}getMeta(e){if(void 0!==e){if(e instanceof HTMLElement)return t.get(e);if(e.row_header_x>=0){if(e.row_header_x<this._view_cache.config.row_pivots.length){const t=this.table_model.body._fetch_cell(e.y,e.row_header_x);return this.getMeta(t)}}else{if(!(e.column_header_y>=0))return this.getMeta(this.table_model.body._fetch_cell(e.dy,e.dx+this.table_model._row_headers_length));if(e.column_header_y<this._view_cache.config.column_pivots.length){const t=this.table_model.body._fetch_cell(e.column_header_y,e.y);return this.getMeta(t)}}}}getDrawFPS(){return function(){const t=performance.now(),e=t-c,r=s,n=1e3*l/e,o=l;return s=0,l=0,c=t,{avg:r,real_fps:n,virtual_fps:1e3/r,num_frames:o,elapsed:e}}()}async scrollToCell(t,e,r,n){const o=this._virtual_panel.offsetHeight/n;this.scrollTop=o*e,this.scrollLeft=t/(this._max_scroll_column(r)||r)*(this.scrollWidth-this.clientWidth),await this.draw.flush()}setDataListener(t,{virtual_mode:e="both"}={}){console.assert(m.indexOf(e)>-1,`Unknown virtual_mode ${e};  valid options are "both" (default), "horizontal", "vertical" or "none"`),this._virtual_mode=e,this._invalid_schema=!0,this._view_cache={view:t,config:{row_pivots:[],column_pivots:[]},schema:{}},this._setup_virtual_scroll()}})},9139:(t,e,r)=>{"use strict";r.r(e);r(6886);function n(t){return function(e,r,n){const o=n.value;return n.set=function(e){let n=this.getAttribute(r);try{null!=e&&""!==e||(e=t()),"string"!=typeof e&&(e=JSON.stringify(e)),e!==n&&(n=e),n=JSON.parse(n)}catch(o){console.warn(`Invalid value for attribute "${r}": ${e}`),n=t()}o.call(this,n)},n.get=function(){return this.hasAttribute(r)?JSON.parse(this.getAttribute(r)):t()},delete n.value,delete n.writable,n}}n((()=>({}))),n((()=>[]));r(8889);var o=r(2073),a=r(5394),i=r.n(a);r(3108),r(5940);function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l=Symbol("Plugin Symbol");let c;function u(t,e,r){c=c||document.createElement("perspective-column-style");const n=t.getMeta(e),o=n.column_header[n.column_header.length-1],a=this._schema[o],s={gradient:r,pos_color:this._pos_color[0],neg_color:this._neg_color[0]};if("float"===a)s.fixed=2;else{if("integer"!==a)return this._open_column_styles_menu.pop(),void t.draw();s.fixed=0}const u=()=>c.blur(),f=e=>{const r=e.detail;r.pos_color&&(r.pos_color=[r.pos_color,...i()(r.pos_color).rgb()],r.neg_color=[r.neg_color,...i()(r.neg_color).rgb()]),t[l]=t[l]||{},t[l][o]=r,t.draw({preserve_width:!0}),t.parentElement.dispatchEvent(new Event("perspective-config-update"))},d=async()=>{t.removeEventListener("regular-table-scroll",u),c.removeEventListener("perspective-column-style-change",f),c.removeEventListener("blur",d),this._open_column_styles_menu.pop(),await t.draw(),t.parentElement.dispatchEvent(new Event("perspective-config-update"))};c.addEventListener("perspective-column-style-change",f),c.addEventListener("blur",d),t.addEventListener("regular-table-scroll",u);const h=t[l]||{},p=Object.assign({},h[o]=h[o]||{});p.pos_color&&(p.pos_color=p.pos_color[0],p.neg_color=p.neg_color[0]),c.open(e,p,s)}function f([t,e,r,n],o=[255,255,255]){function a(t,e){return 255*((1-n)*(o[t]/255)+n*(e/255))}return[a(0,t),a(1,e),a(2,r)]}function d([t,e,r]){return Math.sqrt(t*t*.299+e*e*.587+r*r*.114)>130?"#161616":"#ffffff"}function h(t){const e=t._view_cache.config.row_pivots.length-1;let r=Array.from(t.children[0].children[0].children),[n]=r.splice(r.length-1,1);const o=t[l]||{};for(const r of null==n?void 0:n.children){var a,i;const n=t.getMeta(r),o=null===(a=n.column_header)||void 0===a?void 0:a[(null===(i=n.column_header)||void 0===i?void 0:i.length)-1],s=this._config.sort.find((t=>t[0]===o));let l=n.row_header_x===e;const c=void 0===n.x;l=l||(n.x+1)%this._config.columns.length==0,r.classList.toggle("psp-header-border",l),r.classList.toggle("psp-header-group",!1),r.classList.toggle("psp-header-leaf",!0),r.classList.toggle("psp-is-top",!1),r.classList.toggle("psp-header-corner",c),r.classList.toggle("psp-header-sort-asc",!!s&&"asc"===s[1]),r.classList.toggle("psp-header-sort-desc",!!s&&"desc"===s[1]),r.classList.toggle("psp-header-sort-col-asc",!!s&&"col asc"===s[1]),r.classList.toggle("psp-header-sort-col-desc",!!s&&"col desc"===s[1]);let u=p.call(this,n);const f="integer"===u||"float"===u,d=f&&n.user;r.classList.toggle("psp-align-right",f),r.classList.toggle("psp-align-left",!f),r.classList.toggle("psp-positive",d>0),r.classList.toggle("psp-negative",d<0),r.classList.toggle("psp-menu-open",this._open_column_styles_menu[0]===n._virtual_x),r.classList.toggle("psp-menu-enabled",f&&!c)}const s=[];let c=new Set;const u=t.children[0];for(let n=0;n<r.length;n++){let r=u.rows[n];const o=new Set;for(let a=0;a<r.cells.length;a++){const i=r.cells[a];i.style.backgroundColor="";const l=t.getMeta(i);let u=l.row_header_x===e||l.x>=0;i.classList.toggle("psp-align-right",!1),i.classList.toggle("psp-align-left",!1),i.classList.toggle("psp-header-group",!0),i.classList.toggle("psp-header-leaf",!1),i.classList.toggle("psp-header-border",u),i.classList.toggle("psp-header-group-corner",void 0===l.x);let f,d,h=r.cells[a],p=a;for(;s[n]&&s[n][p];++p);for(o.add(p),f=p;f<p+h.colSpan;++f)for(d=n;d<n+h.rowSpan;++d)s[d]||(s[d]=[]),s[d][f]=!0;h.classList.toggle("psp-is-top",0===n||!c.has(f))}c=o}for(const e of t.children[0].children[1].children)for(const r of e.children){var h,_;const e=t.getMeta(r),n=o[null===(h=e.column_header)||void 0===h?void 0:h[(null===(_=e.column_header)||void 0===_?void 0:_.length)-1]];let a=p.call(this,e);const i="integer"===a||"float"===a;if(i){const t=e.user>0,o=e.user<0,[a,i,s,l]=(()=>void 0!==(null==n?void 0:n.pos_color)?t?n.pos_color:o?n.neg_color:["",0,0,0]:t?this._pos_color:o?this._neg_color:["",0,0,0])();if("background"===(null==n?void 0:n.color_mode)){const t=d(f([i,s,l,1],this._plugin_background));r.style.color=t,r.style.backgroundColor=a}else if("gradient"===(null==n?void 0:n.color_mode)){const t=Math.max(0,Math.min(1,Math.abs(e.user/n.gradient))),o=d(f([i,s,l,t],this._plugin_background));r.style.color=o,r.style.backgroundColor=`rgba(${i},${s},${l},${t})`}else"foreground"===(null==n?void 0:n.color_mode)?(r.style.backgroundColor="",r.style.color=a):(r.style.backgroundColor="",r.style.color="")}else r.style.backgroundColor="",r.style.color="";const s="TH"===r.tagName;if(s){const n=!!e.value&&e.value.toString().trim().length>0,o=e.row_header_x>=this._config.row_pivots.length,a=t.getMeta({dx:0,dy:e.y-e.y0+1}),i=a&&a.row_header&&void 0!==a.row_header[e.row_header_x+1];r.classList.toggle("psp-tree-label",n&&!o),r.classList.toggle("psp-tree-label-expand",n&&!o&&!i),r.classList.toggle("psp-tree-label-collapse",n&&!o&&i),r.classList.toggle("psp-tree-leaf",n&&o)}const l=i&&e.user;r.classList.toggle("psp-align-right",!s&&i),r.classList.toggle("psp-align-left",s||!i),r.classList.toggle("psp-positive",l>0),r.classList.toggle("psp-negative",l<0)}}function p(t){if(t.x>=0){const e=this._column_paths[t.x].split("|");return this._schema[e[e.length-1]]}{const e=this._config.row_pivots[t.row_header_x-1];return this._table_schema[e]}}async function _(t,e,r){const n=t.getMeta(r),o=n.column_header[n.column_header.length-1],a=(e.shiftKey?g:b).call(this,o);t.dispatchEvent(new CustomEvent("regular-table-psp-sort",{detail:{sort:a}}))}function g(t){const e=[];let r=!1;for(const n of this._config.sort){const[o,a]=n;if(o===t){r=!0;const n=m.call(this,t,a);n&&e.push(n)}else e.push(n)}return r||e.push([t,"desc"]),e}function b(t){for(const[e,r]of this._config.sort)if(e===t){const e=m.call(this,t,r);return e?[e]:[]}return[[t,"desc"]]}function m(t,e){const r=this._config.column_pivots.length>0,n=e?(r?y:v)[e]:"desc";if(n)return[t,n]}const v={desc:"asc",asc:void 0},y={desc:"asc",asc:"col desc","col desc":"col asc","col asc":void 0};async function w(t,e){const r=t.getMeta(e.target),n=e.target.classList.contains("psp-tree-label-collapse");e.shiftKey&&n?this._view.set_depth(r.row_header.filter((t=>void 0!==t)).length-2):e.shiftKey?this._view.set_depth(r.row_header.filter((t=>void 0!==t)).length-1):n?this._view.collapse(r.y):this._view.expand(r.y),this._num_rows=await this._view.num_rows(),this._num_columns=await this._view.num_columns(),t.draw()}async function x(t,e){if(1!==e.which)return;let r=e.target;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!t.contains(r))return;if(r.classList.contains("psp-tree-label")&&e.offsetX<26)return w.call(this,t,e),void e.stopImmediatePropagation();const n=r.getBoundingClientRect();if(r.classList.contains("psp-menu-enabled")&&e.clientY-n.top>16){var o,a;const n=t.getMeta(r),i=null===(o=n.column_header)||void 0===o?void 0:o[(null===(a=n.column_header)||void 0===a?void 0:a.length)-1],[,s]=await this._view.get_min_max(i);this._open_column_styles_menu.unshift(n._virtual_x),t.draw(),u.call(this,t,r,s),e.preventDefault(),e.stopImmediatePropagation()}else r.classList.contains("psp-header-leaf")&&!r.classList.contains("psp-header-corner")&&(_.call(this,t,e,r),e.stopImmediatePropagation())}function E(t,e){if(1!==e.which)return;let r=e.target;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!t.contains(r))return;(r.classList.contains("psp-tree-label")&&e.offsetX<26||r.classList.contains("psp-header-leaf")&&!r.classList.contains("psp-header-corner"))&&e.stopImmediatePropagation()}const k={},L={datetime:Intl.DateTimeFormat,date:Intl.DateTimeFormat,integer:Intl.NumberFormat,float:Intl.NumberFormat},M=k;function S(t,e,r={},n=!1){if(null===e)return"-";const a=t[t.length-1],i=r[a],s=n&&this._table_schema[a]||this._schema[a]||"string",l=("integer"===s||"float"===s)&&i&&void 0!==i.fixed;let c=l?`${s}${i.fixed}`:s;if(void 0===k[c]){const t=(0,o.get_type_config)(s);if(l){const t={minimumFractionDigits:i.fixed,maximumFractionDigits:i.fixed};k[c]=new L[s]("en-us",t)}else L[s]&&t.format?k[c]=new L[s]("en-us",t.format):k[c]=!1}return k[c]?k[c].format(e):e}function*O(t=[],e,r){const n=r[l];for(let r of t){r=["TOTAL",...r];const t=r[r.length-1];r=r.slice(0,r.length-1).fill("");const o=S.call(this,[e[r.length-1]],t,n,!0);r=r.concat({toString:()=>o}),r.length=e.length+1,yield r}}async function A(t,e,r,n,o){let a={};n-e>0&&o-r>0&&(a=await this._view.to_columns({start_row:r,start_col:e,end_row:o,end_col:n,id:!0}),this._ids=a.__ID__);const i=[],s=[],c=[];for(const u of this._column_paths.slice(e,n)){const e=u.split("|"),n=a[u]||new Array(o-r).fill(null);i.push(n.map((r=>S.call(this,e,r,t[l])))),s.push(n),c.push(e)}return{num_rows:this._num_rows,num_columns:this._column_paths.length,row_headers:Array.from(O.call(this,a.__ROW_PATH__,this._config.row_pivots,t)),column_headers:c,data:i,metadata:s}}function z(t,e,r){let n=window.getComputedStyle(t).getPropertyValue(e).trim();return n.length>0?n:r}async function C(t,e,r,n={}){const o=await r.get_config(),a=o.expressions.map((t=>t[1])),[s,l,c,u,f,d]=await Promise.all([e.schema(),e.validate_expressions(a),r.num_rows(),r.schema(),r.expression_schema(),r.column_paths()]),h=i()(z(t,"--plugin--background","#FFFFFF")).rgb();let p=z(t,"--rt-pos-cell--color","#0000ff");p=[p,...i()(p).rgb()];let _=z(t,"--rt-neg-cell--color","#ff0000");_=[_,...i()(_).rgb()];const g=Object.assign(n,{_view:r,_table:e,_table_schema:{...s,...l.expression_schema},_config:o,_num_rows:c,_schema:{...u,...f},_ids:[],_open_column_styles_menu:[],_plugin_background:h,_pos_color:p,_neg_color:_,_column_paths:d.filter((t=>"__ROW_PATH__"!==t&&"__ID__"!==t))});return t.setDataListener(A.bind(g,t)),g}async function P(t,e){t.addStyleListener(h.bind(e,t)),t.addEventListener("mousedown",x.bind(e,t)),t.addEventListener("click",E.bind(e,t)),await t.draw()}async function T({_view:t,_config:e},r,n){const o=e.row_pivots,a=e.column_pivots,i=r>=0?r:0,s=i+1,l=await t.to_json({start_row:i,end_row:s}),c=l.map((t=>t.__ROW_PATH__))[0]||[],u=o.map(((t,e)=>{const r=c[e];return r?[t,"==",r]:void 0})).filter((t=>t)),f=o.length>0?n+1:n,d=Object.keys(l[0])[f],h={row:l[0]};let p=[];if(d){const t=d.split("|");h.column_names=[t[t.length-1]],p=a.map(((e,r)=>{const n=t[r];return n?[e,"==",n]:void 0})).filter((t=>t)).filter((([,,t])=>"__ROW_PATH__"!==t))}const _=e.filter.concat(u).concat(p);return h.config={filters:_},h}const N=new WeakMap;async function j(t,e,r){const n=t.getMeta(r.target);if(!e.hasAttribute("selectable"))return;if(r.handled)return;if(1!==r.which)return;if(!n)return;const o=this._ids[n.y-n.y0];if(n&&n.y>=0){const a=N.get(t),i=!!a&&a.reduce(((t,e,r)=>t&&e===o[r]),!0),s=!!a&&o.length===a.length&&i;let l=[];s?N.delete(t):(N.set(t,o),l=await T(this,n.y,n.x),l=l.config.filters),await t.draw(),r.handled=!0,e.dispatchEvent(new CustomEvent("perspective-select",{bubbles:!0,composed:!0,detail:{selected:!s,config:{filters:l}}}))}}function I(t,e){if(!e.hasAttribute("selectable"))return;const r=N.has(t),n=N.get(t);for(const e of t.querySelectorAll("td"))if(r){const r=t.getMeta(e),o=this._ids[r.y-r.y0],a=n.reduce(((t,e,r)=>t&&e===o[r]),!0);e.classList.toggle("psp-row-selected",o.length===n.length&&a),e.classList.toggle("psp-row-subselected",o.length!==n.length&&a)}else e.classList.toggle("psp-row-selected",!1),e.classList.toggle("psp-row-subselected",!1);for(const e of t.querySelectorAll("tbody th")){const o=t.getMeta(e),a=this._ids[o.y-o.y0];if(!r||a[o.row_header_x])e.classList.toggle("psp-row-selected",!1),e.classList.toggle("psp-row-subselected",!1);else{const t=n.reduce(((t,e,r)=>t&&e===a[r]),!0);e.classList.toggle("psp-row-selected",a.length===n.length&&t),e.classList.toggle("psp-row-subselected",a.length!==n.length&&t)}}}function D(t,e){t.addStyleListener(I.bind(this,t,e)),t.addEventListener("mousedown",j.bind(this,t,e))}async function R(t,e,r){const n=t.getMeta(r.target);if(!n)return;const{x:o,y:a}=n,{row:i,column_names:s,config:l}=await T(this,a,o);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{row:i,column_names:s,config:l}}))}function F(t,e){t.addEventListener("click",R.bind(this,t,e))}const W=new WeakMap;function H(){if(this.isContentEditable){let t=document.getSelection().getRangeAt(0),e=t.cloneRange();return e.selectNodeContents(this),e.setEnd(t.endContainer,t.endOffset),e.toString().length}return this.target.selectionStart}function G(t){const e=0===this._config.row_pivots.length&&0===this._config.column_pivots.length,r=t.hasAttribute("selectable"),n=t.hasAttribute("editable");return e&&!r&&n}const $=function(t){let e;return async function(...r){if(e&&await e&&e)return;let n;e=new Promise((t=>n=t)),await t.apply(this,r),e=void 0,n()}}((async function(t,e,r,n){const o=t.getMeta(e),a=this._column_paths.length,i=this._num_rows,s=W.get(t);if(!s)return;o.x+r<a&&0<=o.x+r&&(s.x=o.x+r),o.y+n<i&&0<=o.y+n&&(s.y=o.y+n);const l=Math.max(o.x0-10,0),c=Math.min(o.x0+10,a),u=Math.max(o.y0-5,0),f=Math.min(o.y0+10,i);let d=o.x0+r,h=o.y0+n;for(;!V(t)&&d>=l&&d<c&&h>=u&&h<f;)await t.scrollToCell(d,h,a,i),W.set(t,s),d+=r,h+=n}));function B(t,e){if(!e.hasAttribute("editable"))return;const r=G.call(this,e);for(const e of t.querySelectorAll("td"))e.toggleAttribute("contenteditable",r)}const V=t=>{const e=t.querySelectorAll("td"),r=W.get(t);if(r){for(const n of e){const e=t.getMeta(n);if(e.x===r.x&&e.y===r.y)return document.activeElement!==n&&n.focus({preventScroll:!0}),!0}document.activeElement!==document.body&&t.contains(document.activeElement)&&document.activeElement.blur()}};function Y(t,e,r){if(!G.call(this,e))return;const n=document.activeElement;switch(r.target.classList.remove("psp-error"),r.keyCode){case 13:r.preventDefault(),r.shiftKey?$.call(this,t,n,0,-1):$.call(this,t,n,0,1);break;case 37:0==H.call(n)&&(r.preventDefault(),$.call(this,t,n,-1,0));break;case 38:r.preventDefault(),$.call(this,t,n,0,-1);break;case 39:H.call(n)==n.textContent.length&&(r.preventDefault(),$.call(this,t,n,1,0));break;case 40:r.preventDefault(),$.call(this,t,n,0,1)}}function q(t,e,r){if(G.call(this,e)&&W.has(t)){r.target.classList.remove("psp-error");const e=W.get(t);W.delete(t),e.content!==r.target.textContent&&(function(t,e,r){const n=t.getMeta(r),o=e._schema[e._column_paths[n.x]];if(n){let t=r.textContent;const a=e._ids[n.y-n.y0];if("float"===o||"integer"===o){if(t=parseFloat(t.replace(/,/g,"")),isNaN(t))return!1}else if(("date"===o||"datetime"===o)&&(t=Date.parse(t),isNaN(t)))return!1;const i={__INDEX__:a,[e._column_paths[n.x]]:t};return e._table.update([i],{port_id:e._edit_port}),!0}}(t,this,r.target)||(r.target.textContent=e.content,r.target.classList.add("psp-error"),r.target.focus()))}}function U(t,e,r){const n=t.getMeta(r.target);if(n){const e={x:n.x,y:n.y,content:r.target.textContent};W.set(t,e)}}async function X(t,e){this._edit_port=await e.getEditPort(),t.addStyleListener(B.bind(this,t,e)),t.addStyleListener(V.bind(this,t,e)),t.addEventListener("focusin",U.bind(this,t,e)),t.addEventListener("focusout",q.bind(this,t,e)),t.addEventListener("keydown",Y.bind(this,t,e))}async function K(t,e){t.addEventListener("regular-table-psp-sort",(t=>{this._preserve_focus_state=!0,e.setAttribute("sort",JSON.stringify(t.detail.sort))}))}const J=new WeakMap,Z=new WeakMap;const Q=function(t){let e;return async function(...r){for(;e;)await e;let n;try{e=new Promise((t=>n=t)),await t.apply(this,r)}finally{e=void 0,n()}}}((async function(t,e,r){const n=Z.has(t),o=e.table;let a;n?(a=Z.get(t),await C(t,o,r,a)):(a=await C(t,o,r),P(t,a),await K.call(a,t,e),await D.call(a,t,e),await X.call(a,t,e),await F.call(a,t,e),Z.set(t,a));const i=t.draw({invalid_columns:!0});a._preserve_focus_state?a._preserve_focus_state=!1:(t.scrollTop=0,t.scrollLeft=0,async function(t){N.delete(t);for(const e of t.querySelectorAll("td,th"))e.classList.toggle("psp-row-selected",!1),e.classList.toggle("psp-row-subselected",!1)}(t),t._resetAutoSize()),await i}));function tt(t,e){let r;return J.has(e)?(r=J.get(e),r.isConnected||(e.innerHTML="",e.appendChild(document.createElement("slot")),r.clear(),t.appendChild(r))):(r=document.createElement("regular-table"),r.formatters=M,e.innerHTML="",e.appendChild(document.createElement("slot")),t.appendChild(r),J.set(e,r)),r}class et{static async update(t){const e=J.get(t),r=Z.get(e);r._num_rows=await r._view.num_rows(),await e.draw()}static async create(t,e){const r=tt(this,t);await Q(r,this,e)}static async resize(){if(this.view&&J.has(this._datavis)){const t=J.get(this._datavis);Z.has(t)&&await t.draw()}}static delete(){if(this.view&&J.has(this._datavis)){J.get(this._datavis).clear()}}static save(){if(J.has(this._datavis)){const t=J.get(this._datavis);if(t[l])return JSON.parse(JSON.stringify(t[l]))}}static restore(t){tt(this,this._datavis)[l]=t}}var rt,nt;s(et,"name","Datagrid"),s(et,"selectMode","toggle"),s(et,"deselectMode","pivots"),rt="datagrid",nt=et,r.g.registerPlugin?r.g.registerPlugin(rt,nt):(r.g.__perspective_plugins__=r.g.__perspective_plugins__||[],r.g.__perspective_plugins__.push([rt,nt])),function(){const t=document.createElement("style");t.textContent='regular-table{padding-top:12px;padding-left:12px;padding-bottom:0;padding-right:0;scrollbar-color:transparent transparent;scrollbar-width:thin;outline:none}regular-table:hover{scrollbar-color:rgba(0,0,0,0.3) transparent}regular-table{font-family:"Open Sans"}regular-table div[tabindex]{outline:none}regular-table > div{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}regular-table th{text-align:center}regular-table thead tr:not(:last-child) th{overflow:hidden;max-width:0px}regular-table thead tr:last-child .rt-float,\nregular-table tbody .rt-float{text-align:right}regular-table thead .rt-integer,\nregular-table tbody .rt-integer{text-align:right}regular-table tbody th{text-align:left}regular-table span.rt-tree-container{display:flex;align-items:center;height:100%}regular-table thead .rt-string,\nregular-table tbody .rt-string,\nregular-table thead .rt-date,\nregular-table tbody .rt-date,\nregular-table thead .rt-datetime,\nregular-table tbody .rt-datetime{text-align:left}regular-table thead tr:last-child th{border-bottom:1px solid #ddd}regular-table th{position:relative}regular-table tr th span.rt-tree-group{margin-left:5px;margin-right:15px;border-left:1px solid #eee;height:100%}regular-table td,\nregular-table th{white-space:nowrap;font-size:12px;padding-right:5px;padding-left:5px;padding-top:0px;padding-bottom:0px;height:19px}regular-table tr:hover td{background:#eee;opacity:1}regular-table tr:hover{color:#333}regular-table table *{box-sizing:border-box}regular-table table{position:absolute;overflow:hidden;color:#666;outline:none}regular-table span.rt-row-header-icon{color:#AAA;padding-right:4px;font-family:"Material Icons"}regular-table span.rt-column-header-icon{font-size:10px;padding-left:3px;display:inline-block;width:10px;font-family:"Material Icons"}regular-table span.rt-row-header-icon:hover{color:#1a7da1;text-shadow:0px 0px 3px #1a7da1}regular-table .rt-selected td{background-color:#eee}regular-table .rt-cell-clip{overflow:hidden;text-overflow:ellipsis}regular-table td span.rt-group-name,\nregular-table th span.rt-group-name{margin-right:-5px;padding-right:5px;padding-left:8px;flex:1;height:100%}regular-table th span.rt-group-name{text-align:left}regular-table td th span.rt-group-leaf,\nregular-table th span.rt-group-leaf{margin-left:16px;height:100%}regular-table .rt-column-resize{height:100%;width:10px;position:absolute;top:0;right:0;cursor:col-resize}regular-table::-webkit-scrollbar,\nregular-table::-webkit-scrollbar-corner{background-color:transparent;height:12px;width:12px}regular-table::-webkit-scrollbar-thumb{background-clip:content-box;background-color:rgba(0,0,0,0);border-radius:5px}regular-table::-webkit-scrollbar-thumb:horizontal{border-bottom:2px solid transparent;border-top:2px solid transparent}regular-table::-webkit-scrollbar-thumb:vertical{border-left:2px solid transparent;border-right:2px solid transparent}regular-table:hover::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.15)}regular-table::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,0.3)}.psp-header-border:not(.psp-is-top):not(.psp-header-leaf){box-shadow:1px 0px var(--pv-divider--color,#EAEDEF)}.psp-header-group{box-shadow:0px 10px 0 -9px var(--pv-divider--color,#EAEDEF)}.psp-is-top{box-shadow:5px 4px 0px -4px var(--pv-divider--color,#EAEDEF)}.psp-is-top.psp-header-group:not(.psp-header-group-corner){box-shadow:5px 4px 0px -4px var(--pv-divider--color,#EAEDEF),0px 10px 0 -9px var(--pv-divider--color,#EAEDEF)}.psp-header-border.psp-header-group:not(.psp-is-top):not(.psp-header-group-corner){box-shadow:1px 0px var(--pv-divider--color,#EAEDEF),0px 10px 0 -9px var(--pv-divider--color,#EAEDEF)}.psp-header-leaf.psp-header-border{box-shadow:5px -4px 0px -4px var(--pv-divider--color,#EAEDEF)}tr:only-child th{box-shadow:none!important}regular-table tbody tr:hover th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),\nregular-table tbody tr:hover th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),\nregular-table tbody tr:hover td:not(.psp-row-selected):not(.psp-row-subselected){border-color:var(--rt-hover--border-color,#C5C9D0)!important;background-color:transparent;box-shadow:0px -2px 0px rgba(0,0,0,0.05),0px -4px 0px rgba(0,0,0,0.01),0px 1px 0px var(--rt-hover--border-color,#C5C9D0),0px 3px 0px rgba(0,0,0,0.05),0px 5px 0px rgba(0,0,0,0.01)}regular-table tbody tr:hover + tr th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),\nregular-table tbody tr:hover + tr th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),\nregular-table tbody tr:hover + tr td:not(.psp-row-selected):not(.psp-row-subselected){border-top-color:transparent}regular-table tbody tr th:first-child:not(:empty),\nregular-table tbody tr th:first-child:empty + th:not(:empty),\nregular-table tbody tr th:first-child:empty ~ th:empty + th:not(:empty),\nregular-table tbody tr td:first-child{border-left-width:1px;border-left-color:transparent}regular-table tbody tr th:last-child,\nregular-table tbody tr td:last-child{border-right-width:1px;border-right-color:transparent}regular-table tbody tr:hover{color:#161616}regular-table tbody tr:hover th:first-child:not(:empty),\nregular-table tbody tr:hover th:first-child:empty + th:not(:empty),\nregular-table tbody tr:hover th:first-child:empty ~ th:empty + th:not(:empty),\nregular-table tbody tr:hover td:first-child{border-left-color:var(--rt-hover--border-color,#C5C9D0)!important}regular-table tbody tr:hover th:last-child,\nregular-table tbody tr:hover td:last-child{border-right-color:var(--rt-hover--border-color,#C5C9D0)!important}perspective-viewer[settings] regular-table .psp-header-leaf{height:36px;vertical-align:top;padding-top:2px}perspective-viewer[settings] regular-table .psp-header-leaf:not(.psp-header-corner):before{font-family:"Material Icons";content:"menu";position:absolute;width:calc(100% - 8px);left:5px;bottom:0px;color:var(--inactive--color,#B4B7BE)}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:not(.psp-header-corner):before{color:inherit;cursor:pointer}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner){pointer-events:none}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner):before{content:"expand_less"}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:hover:before{color:#338DCD}perspective-viewer[settings] regular-table .psp-header-leaf .rt-column-resize{height:18px}.psp-row-selected,\n:hover .psp-row-selected,\n:hover th.psp-tree-leaf.psp-row-selected,\n:hover th.psp-tree-label.psp-row-selected{color:white!important;background-color:#EA7319!important;border-color:#EA7319!important}.psp-row-selected.psp-tree-label:not(:hover):before{color:white}.psp-row-subselected,\n:hover .psp-row-subselected,\n:hover th.psp-tree-leaf.psp-row-subselected,\n:hover th.psp-tree-label.psp-row-subselected{background:rgba(234,115,25,0.2)!important}.psp-error{color:red}td:focus{outline:#666;outline-style:dotted;outline-width:1px}perspective-viewer.dragging regular-table{pointer-events:none}.psp-header-border:last-child{border-right-width:0px}.psp-header-sort-desc:after{font-family:"Material Icons";font-size:10px;content:"arrow_downward"}.psp-header-sort-asc:after{font-family:"Material Icons";font-size:10px;content:"arrow_upward"}.psp-header-sort-col-desc:after{font-family:"Material Icons";font-size:10px;content:"arrow_back"}.psp-header-sort-col-asc:after{font-family:"Material Icons";font-size:10px;content:"arrow_forward"}tbody th:last-of-type{border-right:1px solid #eaedef;overflow:hidden;text-overflow:ellipsis}tbody th:empty{background-image:linear-gradient(to right,transparent 9px,#eee 10px,transparent 11px);background-repeat:no-repeat;min-width:20px;max-width:20px;pointer-events:none}.psp-tree-label{max-width:0px;min-width:0px}.psp-tree-label:before{color:#ccc;font-family:"Material Icons";padding-right:11px;vertical-align:-1px}.psp-tree-label-expand:before{content:"add"}.psp-tree-label-collapse:before{content:"remove"}.psp-tree-label:hover:before{color:#338DCD;text-shadow:0px 0px 5px #338DCD}regular-table thead tr:last-child th{border-bottom-width:0px}.psp-tree-leaf{padding-left:24px}.psp-align-right{text-align:right}.psp-align-left{text-align:left}.psp-positive:not(:focus){color:var(--rt-pos-cell--color,#338DCD)}.psp-negative:not(:focus){color:var(--rt-neg-cell--color,#FF5942)}regular-table table{user-select:none;color:#161616;border-collapse:separate}regular-table table th{font-weight:400}regular-table table td,\nregular-table table th{border-color:#eaedef;height:23px}regular-table table .psp-header-leaf{border-bottom-width:0px}regular-table table td,\nregular-table table th.psp-tree-label,\nregular-table table th.psp-tree-label,\nregular-table table th.psp-tree-leaf,\nregular-table table tbody tr:first-child th{border-style:solid;border-width:0px;border-top-width:1px}regular-table table tbody th:empty{background-position:0px -10px}',document.head.appendChild(t)}()},2073:(t,e,r)=>{const n=r(4907).Z;function o(t){return t&&"object"==typeof t&&!Array.isArray(t)}function a(t,...e){if(!e.length)return t;const r=e.shift();if(o(t)&&o(r))for(const e in r)o(r[e])?(t[e]||Object.assign(t,{[e]:{}}),a(t[e],r[e])):Object.assign(t,{[e]:r[e]});return a(t,...e)}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){const r={};if(t.exports.get_config().types[e]&&Object.assign(r,t.exports.get_config().types[e]),r.type){const e=t.exports.get_type_config(r.type);return Object.assign(e,r),e}return r},r.g.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(t){r.g.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),r.g.__PERSPECTIVE_CONFIG__=a(n,t)},t.exports.get_config=function(){return r.g.__PERSPECTIVE_CONFIG__||(r.g.__PERSPECTIVE_CONFIG__=a(n,r.g.__TEMPLATE_CONFIG__||{})),r.g.__PERSPECTIVE_CONFIG__}},4907:t=>{t.exports.Z={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r(9139)})()}));
//# sourceMappingURL=perspective-viewer-datagrid.js.map