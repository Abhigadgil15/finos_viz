{"version":3,"sources":["webpack:///packages/perspective-viewer-datagrid/webpack/universalModuleDefinition","webpack:///packages/node_modules/chroma-js/chroma.js","webpack:///packages/node_modules/core-js/internals/a-function.js","webpack:///packages/node_modules/core-js/internals/a-possible-prototype.js","webpack:///packages/node_modules/core-js/internals/add-to-unscopables.js","webpack:///packages/node_modules/core-js/internals/advance-string-index.js","webpack:///packages/node_modules/core-js/internals/an-object.js","webpack:///packages/node_modules/core-js/internals/array-includes.js","webpack:///packages/node_modules/core-js/internals/array-method-is-strict.js","webpack:///packages/node_modules/core-js/internals/array-method-uses-to-length.js","webpack:///packages/node_modules/core-js/internals/array-reduce.js","webpack:///packages/node_modules/core-js/internals/classof-raw.js","webpack:///packages/node_modules/core-js/internals/copy-constructor-properties.js","webpack:///packages/node_modules/core-js/internals/correct-prototype-getter.js","webpack:///packages/node_modules/core-js/internals/create-iterator-constructor.js","webpack:///packages/node_modules/core-js/internals/create-non-enumerable-property.js","webpack:///packages/node_modules/core-js/internals/create-property-descriptor.js","webpack:///packages/node_modules/core-js/internals/define-iterator.js","webpack:///packages/node_modules/core-js/internals/descriptors.js","webpack:///packages/node_modules/core-js/internals/document-create-element.js","webpack:///packages/node_modules/core-js/internals/dom-iterables.js","webpack:///packages/node_modules/core-js/internals/engine-is-node.js","webpack:///packages/node_modules/core-js/internals/engine-user-agent.js","webpack:///packages/node_modules/core-js/internals/engine-v8-version.js","webpack:///packages/node_modules/core-js/internals/enum-bug-keys.js","webpack:///packages/node_modules/core-js/internals/export.js","webpack:///packages/node_modules/core-js/internals/fails.js","webpack:///packages/node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","webpack:///packages/node_modules/core-js/internals/get-built-in.js","webpack:///packages/node_modules/core-js/internals/get-substitution.js","webpack:///packages/node_modules/core-js/internals/global.js","webpack:///packages/node_modules/core-js/internals/has.js","webpack:///packages/node_modules/core-js/internals/hidden-keys.js","webpack:///packages/node_modules/core-js/internals/html.js","webpack:///packages/node_modules/core-js/internals/ie8-dom-define.js","webpack:///packages/node_modules/core-js/internals/indexed-object.js","webpack:///packages/node_modules/core-js/internals/inspect-source.js","webpack:///packages/node_modules/core-js/internals/internal-state.js","webpack:///packages/node_modules/core-js/internals/is-forced.js","webpack:///packages/node_modules/core-js/internals/is-object.js","webpack:///packages/node_modules/core-js/internals/is-pure.js","webpack:///packages/node_modules/core-js/internals/iterators-core.js","webpack:///packages/node_modules/core-js/internals/iterators.js","webpack:///packages/node_modules/core-js/internals/native-symbol.js","webpack:///packages/node_modules/core-js/internals/native-weak-map.js","webpack:///packages/node_modules/core-js/internals/object-create.js","webpack:///packages/node_modules/core-js/internals/object-define-properties.js","webpack:///packages/node_modules/core-js/internals/object-define-property.js","webpack:///packages/node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack:///packages/node_modules/core-js/internals/object-get-own-property-names.js","webpack:///packages/node_modules/core-js/internals/object-get-own-property-symbols.js","webpack:///packages/node_modules/core-js/internals/object-get-prototype-of.js","webpack:///packages/node_modules/core-js/internals/object-keys-internal.js","webpack:///packages/node_modules/core-js/internals/object-keys.js","webpack:///packages/node_modules/core-js/internals/object-property-is-enumerable.js","webpack:///packages/node_modules/core-js/internals/object-set-prototype-of.js","webpack:///packages/node_modules/core-js/internals/own-keys.js","webpack:///packages/node_modules/core-js/internals/path.js","webpack:///packages/node_modules/core-js/internals/redefine.js","webpack:///packages/node_modules/core-js/internals/regexp-exec-abstract.js","webpack:///packages/node_modules/core-js/internals/regexp-exec.js","webpack:///packages/node_modules/core-js/internals/regexp-flags.js","webpack:///packages/node_modules/core-js/internals/regexp-sticky-helpers.js","webpack:///packages/node_modules/core-js/internals/require-object-coercible.js","webpack:///packages/node_modules/core-js/internals/set-global.js","webpack:///packages/node_modules/core-js/internals/set-to-string-tag.js","webpack:///packages/node_modules/core-js/internals/shared-key.js","webpack:///packages/node_modules/core-js/internals/shared-store.js","webpack:///packages/node_modules/core-js/internals/shared.js","webpack:///packages/node_modules/core-js/internals/string-multibyte.js","webpack:///packages/node_modules/core-js/internals/to-absolute-index.js","webpack:///packages/node_modules/core-js/internals/to-indexed-object.js","webpack:///packages/node_modules/core-js/internals/to-integer.js","webpack:///packages/node_modules/core-js/internals/to-length.js","webpack:///packages/node_modules/core-js/internals/to-object.js","webpack:///packages/node_modules/core-js/internals/to-primitive.js","webpack:///packages/node_modules/core-js/internals/uid.js","webpack:///packages/node_modules/core-js/internals/use-symbol-as-uid.js","webpack:///packages/node_modules/core-js/internals/well-known-symbol.js","webpack:///packages/node_modules/core-js/modules/es.array.iterator.js","webpack:///packages/node_modules/core-js/modules/es.array.reduce.js","webpack:///packages/node_modules/core-js/modules/es.regexp.exec.js","webpack:///packages/node_modules/core-js/modules/es.string.replace.js","webpack:///packages/node_modules/core-js/modules/web.dom-collections.iterator.js","webpack:///packages/src/js/constants.js","webpack:///packages/src/js/view_model.js","webpack:///packages/src/js/thead.js","webpack:///packages/src/js/tbody.js","webpack:///packages/src/js/utils.js","webpack:///packages/src/js/table.js","webpack:///packages/src/js/scroll_panel.js","webpack:///packages/src/js/events.js","webpack:///packages/src/js/index.js","webpack:///packages/perspective-viewer/src/js/utils.js","webpack:///packages/src/js/plugin_menu.js","webpack:///packages/src/js/color_utils.js","webpack:///packages/src/js/regular_table_handlers.js","webpack:///packages/src/js/getCellConfig.js","webpack:///packages/src/js/row_selection.js","webpack:///packages/src/js/click.js","webpack:///packages/src/js/editing.js","webpack:///packages/src/js/sorting.js","webpack:///packages/src/js/plugin.js","webpack:///packages/src/js/config/index.js","webpack:///packages/src/js/config/settings.js","webpack:///packages/perspective-viewer-datagrid/webpack/bootstrap","webpack:///packages/perspective-viewer-datagrid/webpack/startup","webpack:///packages/perspective-viewer-datagrid/webpack/runtime/compat get default export","webpack:///packages/perspective-viewer-datagrid/webpack/runtime/define property getters","webpack:///packages/perspective-viewer-datagrid/webpack/runtime/global","webpack:///packages/perspective-viewer-datagrid/webpack/runtime/hasOwnProperty shorthand","webpack:///packages/perspective-viewer-datagrid/webpack/runtime/make namespace object","webpack:///packages/perspective-viewer-datagrid/webpack/runtime/node module decorator"],"names":["root","factory","exports","module","define","amd","self","Color","DEG2RAD","LAB_CONSTANTS","PI","PITHIRD","RAD2DEG","TWOPI","_average_lrgb","_guess_formats","_guess_formats_sorted","_input","_interpolators","abs","atan2","bezier","blend","blend_f","brewer","burn","chroma","clip_rgb","cmyk2rgb","cos","css2rgb","darken","dodge","each","floor","hcg2rgb","hex2rgb","hsi2rgb","hsl2css","hsl2rgb","hsv2rgb","interpolate","interpolate_hsx","interpolate_lab","interpolate_lrgb","interpolate_num","interpolate_rgb","lab2lch","lab2rgb","lab_xyz","lch2lab","lch2rgb","lighten","limit","log","luminance_x","m","max","multiply","num2rgb","overlay","pow","rgb2cmyk","rgb2css","rgb2hcg","rgb2hex","rgb2hsi","rgb2hsl","rgb2hsv","rgb2lab","rgb2lch","rgb2luminance","rgb2num","rgb2temperature","rgb2xyz","rgb_xyz","rnd","round","screen","sin","sqrt","temperature2rgb","type","unpack","w3cx11","xyz_lab","xyz_rgb","slice","classToType","len","name","o","ref","split","length","toLowerCase","obj","strType","Object","prototype","toString","call","x","min","args","Array","rgb","i","_clipped","_unclipped","Math","arguments","func","ctor","child","result","apply","version","arg","chk","len1","me","mode","w","this","push","_rgb","sort","a","b","p","test","console","warn","hex","OrRd","PuBu","BuPu","Oranges","BuGn","YlOrBr","YlGn","Reds","RdPu","Greens","YlGnBu","Purples","GnBu","Greys","YlOrRd","PuRd","Blues","PuBuGn","Viridis","Spectral","RdYlGn","RdBu","PiYG","PRGn","RdYlBu","BrBG","RdGy","PuOr","Set2","Accent","Set1","Set3","Dark2","Paired","Pastel2","Pastel1","key","results","colors","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflower","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","laserlemon","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrod","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","maroon2","maroon3","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","purple2","purple3","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","l","y","z","isNaN","Yn","Xn","Zn","r","t","t1","t2","t0","Kn","t3","g","ref1","lab","concat","I","I0","I1","c","lab0","lab1","lab2","lab3","ref2","f","scale","cubehelix","start","rotations","hue","gamma","lightness","dh","dl","fract","amp","cos_a","sin_a","s","h","random","code","charAt","col1","col2","interpol","res","alpha","mix","k","v","map","rgba","n","lrgb","xyz0","xyz1","xyz","average","A","cnt","dx","dy","first","xyz2","splice","get","u","match","substr","parseInt","css","channels","hxa","str","Number","NaN","hsl","q","ref3","ref4","ref5","delta","hsv","num","_c","_g","hcg","aa","ab","join","named","L","lch","hcl","reverse","cmyk","gl","luminance","lum","cur_lum","eps","max_iter","lm","kelvin","temp","maxTemp","minTemp","temperature","K","contrast","l1","l2","distance","d","sum_sq","deltaE","C","L1","L2","a1","a2","b1","b2","c1","c2","c4","delA","delB","delC","h1","sc","sl","v1","v2","v3","modechan","channel","src","indexOf","set","value","clipped","amount","brighten","darker","brighter","saturate","desaturate","premultiply","bottom","top","normal","c0","out","analyze","data","val","MAX_VALUE","sum","values","count","domain","limits","positions","_classes","_colorCache","_colors","_correctLightness","_domain","_gamma","_max","_min","_mode","_nacol","_out","_padding","_pos","_spread","_useCache","getClass","getColor","resetCache","setColors","tmap","col","maxc","minc","bypassMap","classes","_m","range","_o","spread","correctLightness","L0","L_actual","L_diff","L_ideal","pol","padding","numColors","dd","dm","samples","cache","nodata","scales","cool","hot","filter","add","visit","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","assignments","best","centroids","cluster","clusterSizes","dist","j","kClusters","max_log","min_log","mindist","nb_iters","newCentroids","pb","pr","ref10","ref11","ref12","ref13","ref14","ref6","ref7","ref8","ref9","repeat","tmpKMeansBreaks","LOG10E","acos","hsi","hue0","hue1","lbv0","lbv1","sat","sat0","sat1","n1","n2","it","TypeError","String","isObject","wellKnownSymbol","create","definePropertyModule","UNSCOPABLES","ArrayPrototype","undefined","configurable","S","index","unicode","toIndexedObject","toLength","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","el","fromIndex","O","includes","fails","METHOD_NAME","argument","method","DESCRIPTORS","has","defineProperty","thrower","options","ACCESSORS","argument0","argument1","enumerable","aFunction","toObject","IndexedObject","IS_RIGHT","that","callbackfn","argumentsLength","memo","left","right","ownKeys","getOwnPropertyDescriptorModule","target","source","keys","getOwnPropertyDescriptor","F","constructor","getPrototypeOf","IteratorPrototype","createPropertyDescriptor","setToStringTag","Iterators","returnThis","IteratorConstructor","NAME","next","TO_STRING_TAG","object","bitmap","writable","$","createIteratorConstructor","setPrototypeOf","createNonEnumerableProperty","redefine","IS_PURE","IteratorsCore","BUGGY_SAFARI_ITERATORS","ITERATOR","KEYS","VALUES","ENTRIES","Iterable","DEFAULT","IS_SET","FORCED","CurrentIteratorPrototype","methods","KEY","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","entries","proto","forced","global","document","EXISTS","createElement","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","classof","process","getBuiltIn","userAgent","versions","v8","setGlobal","copyConstructorProperties","isForced","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","noTargetGet","sham","exec","error","regexpExec","SPECIES","REPLACE_SUPPORTS_NAMED_GROUPS","re","groups","replace","REPLACE_KEEPS_$0","REPLACE","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","originalExec","SYMBOL","DELEGATES_TO_SYMBOL","DELEGATES_TO_EXEC","execCalled","flags","nativeRegExpMethod","nativeMethod","regexp","arg2","forceStringMethod","done","stringMethod","regexMethod","RegExp","string","path","variable","namespace","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","matched","position","captures","namedCaptures","replacement","tailPos","symbols","ch","capture","check","globalThis","window","Function","hasOwnProperty","propertyIsEnumerable","store","functionToString","inspectSource","NATIVE_WEAK_MAP","objectHas","shared","sharedKey","hiddenKeys","WeakMap","state","wmget","wmhas","wmset","metadata","facade","STATE","enforce","getterFor","TYPE","feature","detection","normalize","POLYFILL","NATIVE","PrototypeOfArrayIteratorPrototype","arrayIterator","getOwnPropertySymbols","Symbol","activeXDocument","anObject","defineProperties","enumBugKeys","html","documentCreateElement","IE_PROTO","EmptyConstructor","scriptTag","content","LT","NullProtoObject","ActiveXObject","iframeDocument","iframe","write","close","parentWindow","NullProtoObjectViaActiveX","style","display","appendChild","contentWindow","open","Properties","objectKeys","IE8_DOM_DEFINE","toPrimitive","nativeDefineProperty","P","Attributes","propertyIsEnumerableModule","nativeGetOwnPropertyDescriptor","internalObjectKeys","getOwnPropertyNames","CORRECT_PROTOTYPE_GETTER","ObjectPrototype","names","nativePropertyIsEnumerable","NASHORN_BUG","1","V","aPossiblePrototype","setter","CORRECT_SETTER","__proto__","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","InternalStateModule","getInternalState","enforceInternalState","TEMPLATE","unsafe","simple","R","re1","re2","regexpFlags","stickyHelpers","nativeExec","nativeReplace","patchedExec","UPDATES_LAST_INDEX_WRONG","lastIndex","UNSUPPORTED_Y","BROKEN_CARET","NPCG_INCLUDED","reCopy","sticky","charsAdded","strCopy","multiline","input","ignoreCase","dotAll","RE","TAG","uid","SHARED","copyright","toInteger","requireObjectCoercible","CONVERT_TO_STRING","pos","second","size","charCodeAt","codeAt","integer","ceil","PREFERRED_STRING","fn","valueOf","id","postfix","NATIVE_SYMBOL","iterator","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","addToUnscopables","defineIterator","ARRAY_ITERATOR","setInternalState","iterated","kind","Arguments","$reduce","arrayMethodIsStrict","arrayMethodUsesToLength","CHROME_VERSION","IS_NODE","STRICT_METHOD","USES_TO_LENGTH","reduce","fixRegExpWellKnownSymbolLogic","advanceStringIndex","getSubstitution","regExpExec","maybeCallNative","reason","UNSAFE_SUBSTITUTE","searchValue","replaceValue","replacer","rx","functionalReplace","fullUnicode","accumulatedResult","nextSourcePosition","replacerArgs","DOMIterables","ArrayIteratorMethods","ArrayValues","COLLECTION_NAME","Collection","CollectionPrototype","METADATA_MAP","BROWSER_MAX_HEIGHT","navigator","ViewModel","column_sizes","container","table","_column_sizes","_container","cells","rows","num_columns","_get_row","row_container","num_rows","_set_metadata","td","_get_or_create_metadata","_replace_cell","ridx","cidx","tr","removeChild","_fetch_cell","_get_cell","tag","insertBefore","find","tagName","new_td","replaceChild","_clean_columns","idx","children","_clean_rows","RegularHeaderViewModel","_draw_group_th","offset_cache","column","th","removeAttribute","minWidth","textContent","HTMLElement","span","resizeSpan","className","_draw_group","column_name","column_header","_draw_th","size_key","override_width","override","auto_width","auto","classList","toggle","maxWidth","remove","get_column_header","draw","alias","parts","colspan","x0","_virtual_x","header_levels","_offset_cache","_group_header_cache","row_header_x","setAttribute","group_meta","column_header_y","clean","reset_header_cache","RegularBodyViewModel","_draw_td","ridx_offset","container_height","column_state","view_state","column_data","row_headers","column_data_listener_metadata","row_height","tds","cidx_offset","row_headers_length","row_header","prev_row","prev_row_metadata","prev_col","prev_col_metadata","hasAttribute","y0","y1","user","x1","_obj","offsetHeight","AVG","TOTAL","START","performance","now","strings","flat","throttlePromise","property","lock","async","_resolve","promise","Promise","resolve","invertPromise","flush","RegularTableViewModel","table_clip","element","clear","thead","tbody","header","body","fragment","createDocumentFragment","innerHTML","autosize_cells","last_cells","cell","row_height_cell","pop","offsetWidth","getComputedStyle","boxSizing","clientWidth","parseFloat","paddingLeft","paddingRight","indices","is_override","container_size","view_cache","selected_id","preserve_width","viewport","width","container_width","height","view","config","column_headers","data_listener_metadata","start_col","start_row","end_col","end_row","_row_headers_length","column_pivots","from","row_pivots","viewport_width","cont_body","first_col","cont_heads","fill","total","hmetadata","dcidx","num_visible_columns","missing_cidx","end_col_offset","size_extension","estimate","new_col_req","new_col","_new_col$column_heade","cont_head","last_measured_col_width","_y$td","RegularVirtualTableViewModel","create_shadow_dom","attachShadow","shadowRoot","virtual_panel","_table_clip","_virtual_panel","_setup_virtual_scroll","_virtual_mode","_calculate_viewport","nrows","reset_scroll_position","invalid_columns","_calculate_row_range","_calculate_column_range","_nrows","_container_size","_view_cache","total_scroll_height","clientHeight","percent_scroll","scrollTop","virtual_panel_row_height","relative_nrows","scroll_rows","total_scroll_width","percent_left","scrollLeft","max_scroll_column","_max_scroll_column","Infinity","table_model","_validate_viewport","invalid_column","_start_col","invalid_row","_start_row","_end_row","_end_col","_update_virtual_panel_width","invalid","virtual_width","panel_width","_update_virtual_panel_height","header_height","virtual_panel_px_size","zoom_factor","__debug_start_time__","invalid_viewport","reset_scroll","_invalid_schema","dispatchEvent","CustomEvent","bubbles","detail","_selected_id","_is_styling","callbacks","_style_callbacks","callback","_invalidated","RegularViewEventModel","register_listeners","addEventListener","_on_click","bind","_on_dblclick","_on_scroll","passive","_register_glitch_scroll_listeners","event","stopPropagation","returnValue","_on_mousewheel","_on_touchstart","_on_touchmove","safari","scrollHeight","deltaY","preventDefault","deltaX","_memo_touch_startY","touches","screenY","_memo_touch_startX","screenX","parentElement","contains","is_resize","stopImmediatePropagation","shiftKey","row","button","_on_resize_column","pageX","header_x","colSpan","header_element","move","_on_resize_column_move","up","removeEventListener","should_redraw","virtual_x","setTimeout","diff","VIRTUAL_MODES","customElements","connectedCallback","_initialized","_reset_viewport","_reset_scroll","_resetAutoSize","addStyleListener","styleListener","isSubscribed","invalidate","Error","getMeta","getDrawFPS","elapsed","avg","real_fps","num_frames","virtual_fps","get_draw_fps","ncols","scrollWidth","setDataListener","dataListener","virtual_mode","assert","schema","_attribute","_default","cls","desc","old_set","attr","getAttribute","JSON","stringify","parse","e","PLUGIN_SYMBOL","MENU","activate_plugin_menu","regularTable","column_max","target_meta","column_type","_schema","default_config","gradient","pos_color","_pos_color","neg_color","_neg_color","fixed","_open_column_styles_menu","scroll_handler","blur","update_handler","Event","blur_handler","pset","assign","rgbaToRgb","infer_foreground_from_background","header_depth","group_headers","col_headers","plugins","_config","needs_border","is_corner","columns","get_psp_type","is_numeric","float_val","marked","Set","tops","backgroundColor","tx","ty","xx","rowSpan","plugin","is_positive","is_negative","color_mode","foreground","_plugin_background","color","is_th","is_not_empty","trim","is_leaf","is_collapse","column_path_parts","_column_paths","column_path","_table_schema","sortHandler","meta","append_sort","override_sort","found","sort_term","_column_name","_sort_dir","term","create_sort","sort_dir","is_col_sortable","inc_sort_dir","ROW_COL_SORT_ORDER","ROW_SORT_ORDER","asc","expandCollapseHandler","_view","set_depth","collapse","expand","_num_rows","_num_columns","mousedownListener","which","offsetX","rect","getBoundingClientRect","clientY","get_min_max","unshift","clickListener","FORMATTERS","FORMATTER_CONS","datetime","Intl","DateTimeFormat","date","NumberFormat","float","formatters","_format","use_table_schema","title","is_plugin_override","formatter_key","type_config","get_type_config","opts","minimumFractionDigits","maximumFractionDigits","format","_tree_header","paths","last","formatted","to_columns","_ids","__ID__","path_parts","__ROW_PATH__","get_rule","regular","def","getPropertyValue","createModel","extend","get_config","expressions","expr","table_schema","validated_expressions","expression_schema","column_paths","all","validate_expressions","model","_table","configureRegularTable","getCellConfig","row_idx","col_idx","to_json","row_pivots_values","row_filters","pivot","pivot_value","column_index","column_filters","column_pivot_values","column_names","filters","selected_rows_map","selectionListener","viewer","handled","selected","key_match","agg","is_deselect","delete","composed","selectionStyleListener","has_selected","querySelectorAll","configureRowSelectable","configureClick","selected_position_map","getPos","isContentEditable","_range","getSelection","getRangeAt","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","selectionStart","isEditable","has_pivots","selectable","editable","moveSelection","active_cell","selected_position","xmin","xmax","ymin","ymax","focusStyleListener","scrollToCell","editableStyleListener","edit","toggleAttribute","activeElement","focus","preventScroll","keydownListener","keyCode","focusoutListener","selectedPosition","text","Date","msg","__INDEX__","update","port_id","_edit_port","focusinListener","new_state","configureEditable","getEditPort","configureSortable","_preserve_focus_state","VIEWER_MAP","INSTALLED","datagridPlugin","is_installed","deselect","get_or_create_datagrid","div","datagrid","isConnected","DatagridPlugin","_datavis","token","registerPlugin","__perspective_plugins__","head","_register_global_styles","DEFAULT_CONFIG","require","item","isArray","mergeDeep","sources","shift","get_types","types","props","__PERSPECTIVE_CONFIG__","override_config","__TEMPLATE_CONFIG__","filter_operator","aggregate","boolean","week","year","month","day","hour","minute","null_value","__webpack_module_cache__","__webpack_require__","moduleId","loaded","__webpack_modules__","getter","__esModule","definition","prop","toStringTag","nmd"],"mappings":"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","file":"perspective-viewer-datagrid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"perspective-viewer-datagrid\"] = factory();\n\telse\n\t\troot[\"perspective-viewer-datagrid\"] = factory();\n})(self, function() {\nreturn ","\n/**\n * @license\n *\n * chroma.js - JavaScript library for color conversions\n * \n * Copyright (c) 2011-2017, Gregor Aisch\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n * \n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * \n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n * \n * 3. The name Gregor Aisch may not be used to endorse or promote products\n *    derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n */\n\n(function() {\n  var Color, DEG2RAD, LAB_CONSTANTS, PI, PITHIRD, RAD2DEG, TWOPI, _average_lrgb, _guess_formats, _guess_formats_sorted, _input, _interpolators, abs, atan2, bezier, blend, blend_f, brewer, burn, chroma, clip_rgb, cmyk2rgb, colors, cos, css2rgb, darken, dodge, each, floor, hcg2rgb, hex2rgb, hsi2rgb, hsl2css, hsl2rgb, hsv2rgb, interpolate, interpolate_hsx, interpolate_lab, interpolate_lrgb, interpolate_num, interpolate_rgb, lab2lch, lab2rgb, lab_xyz, lch2lab, lch2rgb, lighten, limit, log, luminance_x, m, max, multiply, normal, num2rgb, overlay, pow, rgb2cmyk, rgb2css, rgb2hcg, rgb2hex, rgb2hsi, rgb2hsl, rgb2hsv, rgb2lab, rgb2lch, rgb2luminance, rgb2num, rgb2temperature, rgb2xyz, rgb_xyz, rnd, root, round, screen, sin, sqrt, temperature2rgb, type, unpack, w3cx11, xyz_lab, xyz_rgb,\n    slice = [].slice;\n\n  type = (function() {\n\n    /*\n    for browser-safe type checking+\n    ported from jQuery's $.type\n     */\n    var classToType, len, name, o, ref;\n    classToType = {};\n    ref = \"Boolean Number String Function Array Date RegExp Undefined Null\".split(\" \");\n    for (o = 0, len = ref.length; o < len; o++) {\n      name = ref[o];\n      classToType[\"[object \" + name + \"]\"] = name.toLowerCase();\n    }\n    return function(obj) {\n      var strType;\n      strType = Object.prototype.toString.call(obj);\n      return classToType[strType] || \"object\";\n    };\n  })();\n\n  limit = function(x, min, max) {\n    if (min == null) {\n      min = 0;\n    }\n    if (max == null) {\n      max = 1;\n    }\n    if (x < min) {\n      x = min;\n    }\n    if (x > max) {\n      x = max;\n    }\n    return x;\n  };\n\n  unpack = function(args) {\n    if (args.length >= 3) {\n      return Array.prototype.slice.call(args);\n    } else {\n      return args[0];\n    }\n  };\n\n  clip_rgb = function(rgb) {\n    var i, o;\n    rgb._clipped = false;\n    rgb._unclipped = rgb.slice(0);\n    for (i = o = 0; o < 3; i = ++o) {\n      if (i < 3) {\n        if (rgb[i] < 0 || rgb[i] > 255) {\n          rgb._clipped = true;\n        }\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n        if (rgb[i] > 255) {\n          rgb[i] = 255;\n        }\n      } else if (i === 3) {\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n        if (rgb[i] > 1) {\n          rgb[i] = 1;\n        }\n      }\n    }\n    if (!rgb._clipped) {\n      delete rgb._unclipped;\n    }\n    return rgb;\n  };\n\n  PI = Math.PI, round = Math.round, cos = Math.cos, floor = Math.floor, pow = Math.pow, log = Math.log, sin = Math.sin, sqrt = Math.sqrt, atan2 = Math.atan2, max = Math.max, abs = Math.abs;\n\n  TWOPI = PI * 2;\n\n  PITHIRD = PI / 3;\n\n  DEG2RAD = PI / 180;\n\n  RAD2DEG = 180 / PI;\n\n  chroma = function() {\n    if (arguments[0] instanceof Color) {\n      return arguments[0];\n    }\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, arguments, function(){});\n  };\n\n  chroma[\"default\"] = chroma;\n\n  _interpolators = [];\n\n  if ((typeof module !== \"undefined\" && module !== null) && (module.exports != null)) {\n    module.exports = chroma;\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return chroma;\n    });\n  } else {\n    root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n    root.chroma = chroma;\n  }\n\n  chroma.version = '1.4.1';\n\n  _input = {};\n\n  _guess_formats = [];\n\n  _guess_formats_sorted = false;\n\n  Color = (function() {\n    function Color() {\n      var arg, args, chk, len, len1, me, mode, o, w;\n      me = this;\n      args = [];\n      for (o = 0, len = arguments.length; o < len; o++) {\n        arg = arguments[o];\n        if (arg != null) {\n          args.push(arg);\n        }\n      }\n      if (args.length > 1) {\n        mode = args[args.length - 1];\n      }\n      if (_input[mode] != null) {\n        me._rgb = clip_rgb(_input[mode](unpack(args.slice(0, -1))));\n      } else {\n        if (!_guess_formats_sorted) {\n          _guess_formats = _guess_formats.sort(function(a, b) {\n            return b.p - a.p;\n          });\n          _guess_formats_sorted = true;\n        }\n        for (w = 0, len1 = _guess_formats.length; w < len1; w++) {\n          chk = _guess_formats[w];\n          mode = chk.test.apply(chk, args);\n          if (mode) {\n            break;\n          }\n        }\n        if (mode) {\n          me._rgb = clip_rgb(_input[mode].apply(_input, args));\n        }\n      }\n      if (me._rgb == null) {\n        console.warn('unknown format: ' + args);\n      }\n      if (me._rgb == null) {\n        me._rgb = [0, 0, 0];\n      }\n      if (me._rgb.length === 3) {\n        me._rgb.push(1);\n      }\n    }\n\n    Color.prototype.toString = function() {\n      return this.hex();\n    };\n\n    return Color;\n\n  })();\n\n  chroma._input = _input;\n\n\n  /**\n  \tColorBrewer colors for chroma.js\n  \n  \tCopyright (c) 2002 Cynthia Brewer, Mark Harrower, and The \n  \tPennsylvania State University.\n  \n  \tLicensed under the Apache License, Version 2.0 (the \"License\"); \n  \tyou may not use this file except in compliance with the License.\n  \tYou may obtain a copy of the License at\t\n  \thttp://www.apache.org/licenses/LICENSE-2.0\n  \n  \tUnless required by applicable law or agreed to in writing, software distributed\n  \tunder the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n  \tCONDITIONS OF ANY KIND, either express or implied. See the License for the\n  \tspecific language governing permissions and limitations under the License.\n  \n      @preserve\n   */\n\n  chroma.brewer = brewer = {\n    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n    Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  };\n\n  (function() {\n    var key, results;\n    results = [];\n    for (key in brewer) {\n      results.push(brewer[key.toLowerCase()] = brewer[key]);\n    }\n    return results;\n  })();\n\n\n  /**\n  \tX11 color names\n  \n  \thttp://www.w3.org/TR/css3-color/#svg-color\n   */\n\n  w3cx11 = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflower: '#6495ed',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    laserlemon: '#ffff54',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrod: '#fafad2',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    maroon2: '#7f0000',\n    maroon3: '#b03060',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    purple2: '#7f007f',\n    purple3: '#a020f0',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32'\n  };\n\n  chroma.colors = colors = w3cx11;\n\n  lab2rgb = function() {\n    var a, args, b, g, l, r, x, y, z;\n    args = unpack(arguments);\n    l = args[0], a = args[1], b = args[2];\n    y = (l + 16) / 116;\n    x = isNaN(a) ? y : y + a / 500;\n    z = isNaN(b) ? y : y - b / 200;\n    y = LAB_CONSTANTS.Yn * lab_xyz(y);\n    x = LAB_CONSTANTS.Xn * lab_xyz(x);\n    z = LAB_CONSTANTS.Zn * lab_xyz(z);\n    r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);\n    g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n    b = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  xyz_rgb = function(r) {\n    return 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow(r, 1 / 2.4) - 0.055);\n  };\n\n  lab_xyz = function(t) {\n    if (t > LAB_CONSTANTS.t1) {\n      return t * t * t;\n    } else {\n      return LAB_CONSTANTS.t2 * (t - LAB_CONSTANTS.t0);\n    }\n  };\n\n  LAB_CONSTANTS = {\n    Kn: 18,\n    Xn: 0.950470,\n    Yn: 1,\n    Zn: 1.088830,\n    t0: 0.137931034,\n    t1: 0.206896552,\n    t2: 0.12841855,\n    t3: 0.008856452\n  };\n\n  rgb2lab = function() {\n    var b, g, r, ref, ref1, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2xyz(r, g, b), x = ref1[0], y = ref1[1], z = ref1[2];\n    return [116 * y - 16, 500 * (x - y), 200 * (y - z)];\n  };\n\n  rgb_xyz = function(r) {\n    if ((r /= 255) <= 0.04045) {\n      return r / 12.92;\n    } else {\n      return pow((r + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  xyz_lab = function(t) {\n    if (t > LAB_CONSTANTS.t3) {\n      return pow(t, 1 / 3);\n    } else {\n      return t / LAB_CONSTANTS.t2 + LAB_CONSTANTS.t0;\n    }\n  };\n\n  rgb2xyz = function() {\n    var b, g, r, ref, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = rgb_xyz(r);\n    g = rgb_xyz(g);\n    b = rgb_xyz(b);\n    x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / LAB_CONSTANTS.Xn);\n    y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / LAB_CONSTANTS.Yn);\n    z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / LAB_CONSTANTS.Zn);\n    return [x, y, z];\n  };\n\n  chroma.lab = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['lab']), function(){});\n  };\n\n  _input.lab = lab2rgb;\n\n  Color.prototype.lab = function() {\n    return rgb2lab(this._rgb);\n  };\n\n  bezier = function(colors) {\n    var I, I0, I1, c, lab0, lab1, lab2, lab3, ref, ref1, ref2;\n    colors = (function() {\n      var len, o, results;\n      results = [];\n      for (o = 0, len = colors.length; o < len; o++) {\n        c = colors[o];\n        results.push(chroma(c));\n      }\n      return results;\n    })();\n    if (colors.length === 2) {\n      ref = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref[0], lab1 = ref[1];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push(lab0[i] + t * (lab1[i] - lab0[i]));\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 3) {\n      ref1 = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref1[0], lab1 = ref1[1], lab2 = ref1[2];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * lab0[i] + 2 * (1 - t) * t * lab1[i] + t * t * lab2[i]);\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 4) {\n      ref2 = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref2[0], lab1 = ref2[1], lab2 = ref2[2], lab3 = ref2[3];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * (1 - t) * lab0[i] + 3 * (1 - t) * (1 - t) * t * lab1[i] + 3 * (1 - t) * t * t * lab2[i] + t * t * t * lab3[i]);\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 5) {\n      I0 = bezier(colors.slice(0, 3));\n      I1 = bezier(colors.slice(2, 5));\n      I = function(t) {\n        if (t < 0.5) {\n          return I0(t * 2);\n        } else {\n          return I1((t - 0.5) * 2);\n        }\n      };\n    }\n    return I;\n  };\n\n  chroma.bezier = function(colors) {\n    var f;\n    f = bezier(colors);\n    f.scale = function() {\n      return chroma.scale(f);\n    };\n    return f;\n  };\n\n  chroma.cubehelix = function(start, rotations, hue, gamma, lightness) {\n    var dh, dl, f;\n    if (start == null) {\n      start = 300;\n    }\n    if (rotations == null) {\n      rotations = -1.5;\n    }\n    if (hue == null) {\n      hue = 1;\n    }\n    if (gamma == null) {\n      gamma = 1;\n    }\n    if (lightness == null) {\n      lightness = [0, 1];\n    }\n    dh = 0;\n    if (type(lightness) === 'array') {\n      dl = lightness[1] - lightness[0];\n    } else {\n      dl = 0;\n      lightness = [lightness, lightness];\n    }\n    f = function(fract) {\n      var a, amp, b, cos_a, g, h, l, r, sin_a;\n      a = TWOPI * ((start + 120) / 360 + rotations * fract);\n      l = pow(lightness[0] + dl * fract, gamma);\n      h = dh !== 0 ? hue[0] + fract * dh : hue;\n      amp = h * l * (1 - l) / 2;\n      cos_a = cos(a);\n      sin_a = sin(a);\n      r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n      g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n      b = l + amp * (+1.97294 * cos_a);\n      return chroma(clip_rgb([r * 255, g * 255, b * 255, 1]));\n    };\n    f.start = function(s) {\n      if (s == null) {\n        return start;\n      }\n      start = s;\n      return f;\n    };\n    f.rotations = function(r) {\n      if (r == null) {\n        return rotations;\n      }\n      rotations = r;\n      return f;\n    };\n    f.gamma = function(g) {\n      if (g == null) {\n        return gamma;\n      }\n      gamma = g;\n      return f;\n    };\n    f.hue = function(h) {\n      if (h == null) {\n        return hue;\n      }\n      hue = h;\n      if (type(hue) === 'array') {\n        dh = hue[1] - hue[0];\n        if (dh === 0) {\n          hue = hue[1];\n        }\n      } else {\n        dh = 0;\n      }\n      return f;\n    };\n    f.lightness = function(h) {\n      if (h == null) {\n        return lightness;\n      }\n      if (type(h) === 'array') {\n        lightness = h;\n        dl = h[1] - h[0];\n      } else {\n        lightness = [h, h];\n        dl = 0;\n      }\n      return f;\n    };\n    f.scale = function() {\n      return chroma.scale(f);\n    };\n    f.hue(hue);\n    return f;\n  };\n\n  chroma.random = function() {\n    var code, digits, i, o;\n    digits = '0123456789abcdef';\n    code = '#';\n    for (i = o = 0; o < 6; i = ++o) {\n      code += digits.charAt(floor(Math.random() * 16));\n    }\n    return new Color(code);\n  };\n\n  _interpolators = [];\n\n  interpolate = function(col1, col2, f, m) {\n    var interpol, len, o, res;\n    if (f == null) {\n      f = 0.5;\n    }\n    if (m == null) {\n      m = 'rgb';\n    }\n\n    /*\n    interpolates between colors\n    f = 0 --> me\n    f = 1 --> col\n     */\n    if (type(col1) !== 'object') {\n      col1 = chroma(col1);\n    }\n    if (type(col2) !== 'object') {\n      col2 = chroma(col2);\n    }\n    for (o = 0, len = _interpolators.length; o < len; o++) {\n      interpol = _interpolators[o];\n      if (m === interpol[0]) {\n        res = interpol[1](col1, col2, f, m);\n        break;\n      }\n    }\n    if (res == null) {\n      throw \"color mode \" + m + \" is not supported\";\n    }\n    return res.alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n  };\n\n  chroma.interpolate = interpolate;\n\n  Color.prototype.interpolate = function(col2, f, m) {\n    return interpolate(this, col2, f, m);\n  };\n\n  chroma.mix = interpolate;\n\n  Color.prototype.mix = Color.prototype.interpolate;\n\n  _input.rgb = function() {\n    var k, ref, results, v;\n    ref = unpack(arguments);\n    results = [];\n    for (k in ref) {\n      v = ref[k];\n      results.push(v);\n    }\n    return results;\n  };\n\n  chroma.rgb = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['rgb']), function(){});\n  };\n\n  Color.prototype.rgb = function(round) {\n    if (round == null) {\n      round = true;\n    }\n    if (round) {\n      return this._rgb.map(Math.round).slice(0, 3);\n    } else {\n      return this._rgb.slice(0, 3);\n    }\n  };\n\n  Color.prototype.rgba = function(round) {\n    if (round == null) {\n      round = true;\n    }\n    if (!round) {\n      return this._rgb.slice(0);\n    }\n    return [Math.round(this._rgb[0]), Math.round(this._rgb[1]), Math.round(this._rgb[2]), this._rgb[3]];\n  };\n\n  _guess_formats.push({\n    p: 3,\n    test: function(n) {\n      var a;\n      a = unpack(arguments);\n      if (type(a) === 'array' && a.length === 3) {\n        return 'rgb';\n      }\n      if (a.length === 4 && type(a[3]) === \"number\" && a[3] >= 0 && a[3] <= 1) {\n        return 'rgb';\n      }\n    }\n  });\n\n  _input.lrgb = _input.rgb;\n\n  interpolate_lrgb = function(col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(sqrt(pow(xyz0[0], 2) * (1 - f) + pow(xyz1[0], 2) * f), sqrt(pow(xyz0[1], 2) * (1 - f) + pow(xyz1[1], 2) * f), sqrt(pow(xyz0[2], 2) * (1 - f) + pow(xyz1[2], 2) * f), m);\n  };\n\n  _average_lrgb = function(colors) {\n    var col, f, len, o, rgb, xyz;\n    f = 1 / colors.length;\n    xyz = [0, 0, 0, 0];\n    for (o = 0, len = colors.length; o < len; o++) {\n      col = colors[o];\n      rgb = col._rgb;\n      xyz[0] += pow(rgb[0], 2) * f;\n      xyz[1] += pow(rgb[1], 2) * f;\n      xyz[2] += pow(rgb[2], 2) * f;\n      xyz[3] += rgb[3] * f;\n    }\n    xyz[0] = sqrt(xyz[0]);\n    xyz[1] = sqrt(xyz[1]);\n    xyz[2] = sqrt(xyz[2]);\n    if (xyz[3] > 1) {\n      xyz[3] = 1;\n    }\n    return new Color(clip_rgb(xyz));\n  };\n\n  _interpolators.push(['lrgb', interpolate_lrgb]);\n\n  chroma.average = function(colors, mode) {\n    var A, alpha, c, cnt, dx, dy, first, i, l, len, o, xyz, xyz2;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    l = colors.length;\n    colors = colors.map(function(c) {\n      return chroma(c);\n    });\n    first = colors.splice(0, 1)[0];\n    if (mode === 'lrgb') {\n      return _average_lrgb(colors);\n    }\n    xyz = first.get(mode);\n    cnt = [];\n    dx = 0;\n    dy = 0;\n    for (i in xyz) {\n      xyz[i] = xyz[i] || 0;\n      cnt.push(isNaN(xyz[i]) ? 0 : 1);\n      if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n        A = xyz[i] / 180 * PI;\n        dx += cos(A);\n        dy += sin(A);\n      }\n    }\n    alpha = first.alpha();\n    for (o = 0, len = colors.length; o < len; o++) {\n      c = colors[o];\n      xyz2 = c.get(mode);\n      alpha += c.alpha();\n      for (i in xyz) {\n        if (!isNaN(xyz2[i])) {\n          cnt[i] += 1;\n          if (mode.charAt(i) === 'h') {\n            A = xyz2[i] / 180 * PI;\n            dx += cos(A);\n            dy += sin(A);\n          } else {\n            xyz[i] += xyz2[i];\n          }\n        }\n      }\n    }\n    for (i in xyz) {\n      if (mode.charAt(i) === 'h') {\n        A = atan2(dy / cnt[i], dx / cnt[i]) / PI * 180;\n        while (A < 0) {\n          A += 360;\n        }\n        while (A >= 360) {\n          A -= 360;\n        }\n        xyz[i] = A;\n      } else {\n        xyz[i] = xyz[i] / cnt[i];\n      }\n    }\n    return chroma(xyz, mode).alpha(alpha / l);\n  };\n\n  hex2rgb = function(hex) {\n    var a, b, g, r, rgb, u;\n    if (hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)) {\n      if (hex.length === 4 || hex.length === 7) {\n        hex = hex.substr(1);\n      }\n      if (hex.length === 3) {\n        hex = hex.split(\"\");\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n      u = parseInt(hex, 16);\n      r = u >> 16;\n      g = u >> 8 & 0xFF;\n      b = u & 0xFF;\n      return [r, g, b, 1];\n    }\n    if (hex.match(/^#?([A-Fa-f0-9]{8})$/)) {\n      if (hex.length === 9) {\n        hex = hex.substr(1);\n      }\n      u = parseInt(hex, 16);\n      r = u >> 24 & 0xFF;\n      g = u >> 16 & 0xFF;\n      b = u >> 8 & 0xFF;\n      a = round((u & 0xFF) / 0xFF * 100) / 100;\n      return [r, g, b, a];\n    }\n    if ((_input.css != null) && (rgb = _input.css(hex))) {\n      return rgb;\n    }\n    throw \"unknown color: \" + hex;\n  };\n\n  rgb2hex = function(channels, mode) {\n    var a, b, g, hxa, r, str, u;\n    if (mode == null) {\n      mode = 'auto';\n    }\n    r = channels[0], g = channels[1], b = channels[2], a = channels[3];\n    if (mode === 'auto') {\n      mode = a < 1 ? 'rgba' : 'rgb';\n    }\n    r = Math.round(r);\n    g = Math.round(g);\n    b = Math.round(b);\n    u = r << 16 | g << 8 | b;\n    str = \"000000\" + u.toString(16);\n    str = str.substr(str.length - 6);\n    hxa = '0' + round(a * 255).toString(16);\n    hxa = hxa.substr(hxa.length - 2);\n    return \"#\" + (function() {\n      switch (mode.toLowerCase()) {\n        case 'rgba':\n          return str + hxa;\n        case 'argb':\n          return hxa + str;\n        default:\n          return str;\n      }\n    })();\n  };\n\n  _input.hex = function(h) {\n    return hex2rgb(h);\n  };\n\n  chroma.hex = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hex']), function(){});\n  };\n\n  Color.prototype.hex = function(mode) {\n    if (mode == null) {\n      mode = 'auto';\n    }\n    return rgb2hex(this._rgb, mode);\n  };\n\n  _guess_formats.push({\n    p: 4,\n    test: function(n) {\n      if (arguments.length === 1 && type(n) === \"string\") {\n        return 'hex';\n      }\n    }\n  });\n\n  hsl2rgb = function() {\n    var args, b, c, g, h, i, l, o, r, ref, s, t1, t2, t3;\n    args = unpack(arguments);\n    h = args[0], s = args[1], l = args[2];\n    if (s === 0) {\n      r = g = b = l * 255;\n    } else {\n      t3 = [0, 0, 0];\n      c = [0, 0, 0];\n      t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      t1 = 2 * l - t2;\n      h /= 360;\n      t3[0] = h + 1 / 3;\n      t3[1] = h;\n      t3[2] = h - 1 / 3;\n      for (i = o = 0; o <= 2; i = ++o) {\n        if (t3[i] < 0) {\n          t3[i] += 1;\n        }\n        if (t3[i] > 1) {\n          t3[i] -= 1;\n        }\n        if (6 * t3[i] < 1) {\n          c[i] = t1 + (t2 - t1) * 6 * t3[i];\n        } else if (2 * t3[i] < 1) {\n          c[i] = t2;\n        } else if (3 * t3[i] < 2) {\n          c[i] = t1 + (t2 - t1) * ((2 / 3) - t3[i]) * 6;\n        } else {\n          c[i] = t1;\n        }\n      }\n      ref = [round(c[0] * 255), round(c[1] * 255), round(c[2] * 255)], r = ref[0], g = ref[1], b = ref[2];\n    }\n    if (args.length > 3) {\n      return [r, g, b, args[3]];\n    } else {\n      return [r, g, b];\n    }\n  };\n\n  rgb2hsl = function(r, g, b) {\n    var h, l, min, ref, s;\n    if (r !== void 0 && r.length >= 3) {\n      ref = r, r = ref[0], g = ref[1], b = ref[2];\n    }\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    l = (max + min) / 2;\n    if (max === min) {\n      s = 0;\n      h = Number.NaN;\n    } else {\n      s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n    }\n    if (r === max) {\n      h = (g - b) / (max - min);\n    } else if (g === max) {\n      h = 2 + (b - r) / (max - min);\n    } else if (b === max) {\n      h = 4 + (r - g) / (max - min);\n    }\n    h *= 60;\n    if (h < 0) {\n      h += 360;\n    }\n    return [h, s, l];\n  };\n\n  chroma.hsl = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsl']), function(){});\n  };\n\n  _input.hsl = hsl2rgb;\n\n  Color.prototype.hsl = function() {\n    return rgb2hsl(this._rgb);\n  };\n\n  hsv2rgb = function() {\n    var args, b, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, s, t, v;\n    args = unpack(arguments);\n    h = args[0], s = args[1], v = args[2];\n    v *= 255;\n    if (s === 0) {\n      r = g = b = v;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n      if (h > 360) {\n        h -= 360;\n      }\n      if (h < 0) {\n        h += 360;\n      }\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = v * (1 - s);\n      q = v * (1 - s * f);\n      t = v * (1 - s * (1 - f));\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsv = function() {\n    var b, delta, g, h, min, r, ref, s, v;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    v = max / 255.0;\n    if (max === 0) {\n      h = Number.NaN;\n      s = 0;\n    } else {\n      s = delta / max;\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n      h *= 60;\n      if (h < 0) {\n        h += 360;\n      }\n    }\n    return [h, s, v];\n  };\n\n  chroma.hsv = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsv']), function(){});\n  };\n\n  _input.hsv = hsv2rgb;\n\n  Color.prototype.hsv = function() {\n    return rgb2hsv(this._rgb);\n  };\n\n  num2rgb = function(num) {\n    var b, g, r;\n    if (type(num) === \"number\" && num >= 0 && num <= 0xFFFFFF) {\n      r = num >> 16;\n      g = (num >> 8) & 0xFF;\n      b = num & 0xFF;\n      return [r, g, b, 1];\n    }\n    console.warn(\"unknown num color: \" + num);\n    return [0, 0, 0, 1];\n  };\n\n  rgb2num = function() {\n    var b, g, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    return (r << 16) + (g << 8) + b;\n  };\n\n  chroma.num = function(num) {\n    return new Color(num, 'num');\n  };\n\n  Color.prototype.num = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    return rgb2num(this._rgb, mode);\n  };\n\n  _input.num = num2rgb;\n\n  _guess_formats.push({\n    p: 1,\n    test: function(n) {\n      if (arguments.length === 1 && type(n) === \"number\" && n >= 0 && n <= 0xFFFFFF) {\n        return 'num';\n      }\n    }\n  });\n\n  hcg2rgb = function() {\n    var _c, _g, args, b, c, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, t, v;\n    args = unpack(arguments);\n    h = args[0], c = args[1], _g = args[2];\n    c = c / 100;\n    g = g / 100 * 255;\n    _c = c * 255;\n    if (c === 0) {\n      r = g = b = _g;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n      if (h > 360) {\n        h -= 360;\n      }\n      if (h < 0) {\n        h += 360;\n      }\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = _g * (1 - c);\n      q = p + _c * (1 - f);\n      t = p + _c * f;\n      v = p + _c;\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hcg = function() {\n    var _g, b, c, delta, g, h, min, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    c = delta * 100 / 255;\n    _g = min / (255 - delta) * 100;\n    if (delta === 0) {\n      h = Number.NaN;\n    } else {\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n      h *= 60;\n      if (h < 0) {\n        h += 360;\n      }\n    }\n    return [h, c, _g];\n  };\n\n  chroma.hcg = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hcg']), function(){});\n  };\n\n  _input.hcg = hcg2rgb;\n\n  Color.prototype.hcg = function() {\n    return rgb2hcg(this._rgb);\n  };\n\n  css2rgb = function(css) {\n    var aa, ab, hsl, i, m, o, rgb, w;\n    css = css.toLowerCase();\n    if ((chroma.colors != null) && chroma.colors[css]) {\n      return hex2rgb(chroma.colors[css]);\n    }\n    if (m = css.match(/rgb\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n      for (i = o = 0; o <= 2; i = ++o) {\n        rgb[i] = +rgb[i];\n      }\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n      for (i = w = 0; w <= 3; i = ++w) {\n        rgb[i] = +rgb[i];\n      }\n    } else if (m = css.match(/rgb\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n      for (i = aa = 0; aa <= 2; i = ++aa) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n      for (i = ab = 0; ab <= 2; i = ++ab) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n      rgb[3] = +rgb[3];\n    } else if (m = css.match(/hsl\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = 1;\n    } else if (m = css.match(/hsla\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = +m[4];\n    }\n    return rgb;\n  };\n\n  rgb2css = function(rgba) {\n    var mode;\n    mode = rgba[3] < 1 ? 'rgba' : 'rgb';\n    if (mode === 'rgb') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ')';\n    } else if (mode === 'rgba') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ',' + rgba[3] + ')';\n    } else {\n\n    }\n  };\n\n  rnd = function(a) {\n    return round(a * 100) / 100;\n  };\n\n  hsl2css = function(hsl, alpha) {\n    var mode;\n    mode = alpha < 1 ? 'hsla' : 'hsl';\n    hsl[0] = rnd(hsl[0] || 0);\n    hsl[1] = rnd(hsl[1] * 100) + '%';\n    hsl[2] = rnd(hsl[2] * 100) + '%';\n    if (mode === 'hsla') {\n      hsl[3] = alpha;\n    }\n    return mode + '(' + hsl.join(',') + ')';\n  };\n\n  _input.css = function(h) {\n    return css2rgb(h);\n  };\n\n  chroma.css = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['css']), function(){});\n  };\n\n  Color.prototype.css = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    if (mode.slice(0, 3) === 'rgb') {\n      return rgb2css(this._rgb);\n    } else if (mode.slice(0, 3) === 'hsl') {\n      return hsl2css(this.hsl(), this.alpha());\n    }\n  };\n\n  _input.named = function(name) {\n    return hex2rgb(w3cx11[name]);\n  };\n\n  _guess_formats.push({\n    p: 5,\n    test: function(n) {\n      if (arguments.length === 1 && (w3cx11[n] != null)) {\n        return 'named';\n      }\n    }\n  });\n\n  Color.prototype.name = function(n) {\n    var h, k;\n    if (arguments.length) {\n      if (w3cx11[n]) {\n        this._rgb = hex2rgb(w3cx11[n]);\n      }\n      this._rgb[3] = 1;\n      this;\n    }\n    h = this.hex('rgb');\n    for (k in w3cx11) {\n      if (h === w3cx11[k]) {\n        return k;\n      }\n    }\n    return h;\n  };\n\n  lch2lab = function() {\n\n    /*\n    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n    out of gamut if the parameters are in the range 0-1.\n    \n    A saturation multiplier was added by Gregor Aisch\n     */\n    var c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], c = ref[1], h = ref[2];\n    h = h * DEG2RAD;\n    return [l, cos(h) * c, sin(h) * c];\n  };\n\n  lch2rgb = function() {\n    var L, a, args, b, c, g, h, l, r, ref, ref1;\n    args = unpack(arguments);\n    l = args[0], c = args[1], h = args[2];\n    ref = lch2lab(l, c, h), L = ref[0], a = ref[1], b = ref[2];\n    ref1 = lab2rgb(L, a, b), r = ref1[0], g = ref1[1], b = ref1[2];\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  lab2lch = function() {\n    var a, b, c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], a = ref[1], b = ref[2];\n    c = sqrt(a * a + b * b);\n    h = (atan2(b, a) * RAD2DEG + 360) % 360;\n    if (round(c * 10000) === 0) {\n      h = Number.NaN;\n    }\n    return [l, c, h];\n  };\n\n  rgb2lch = function() {\n    var a, b, g, l, r, ref, ref1;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2lab(r, g, b), l = ref1[0], a = ref1[1], b = ref1[2];\n    return lab2lch(l, a, b);\n  };\n\n  chroma.lch = function() {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'lch');\n  };\n\n  chroma.hcl = function() {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'hcl');\n  };\n\n  _input.lch = lch2rgb;\n\n  _input.hcl = function() {\n    var c, h, l, ref;\n    ref = unpack(arguments), h = ref[0], c = ref[1], l = ref[2];\n    return lch2rgb([l, c, h]);\n  };\n\n  Color.prototype.lch = function() {\n    return rgb2lch(this._rgb);\n  };\n\n  Color.prototype.hcl = function() {\n    return rgb2lch(this._rgb).reverse();\n  };\n\n  rgb2cmyk = function(mode) {\n    var b, c, f, g, k, m, r, ref, y;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = r / 255;\n    g = g / 255;\n    b = b / 255;\n    k = 1 - Math.max(r, Math.max(g, b));\n    f = k < 1 ? 1 / (1 - k) : 0;\n    c = (1 - r - k) * f;\n    m = (1 - g - k) * f;\n    y = (1 - b - k) * f;\n    return [c, m, y, k];\n  };\n\n  cmyk2rgb = function() {\n    var alpha, args, b, c, g, k, m, r, y;\n    args = unpack(arguments);\n    c = args[0], m = args[1], y = args[2], k = args[3];\n    alpha = args.length > 4 ? args[4] : 1;\n    if (k === 1) {\n      return [0, 0, 0, alpha];\n    }\n    r = c >= 1 ? 0 : 255 * (1 - c) * (1 - k);\n    g = m >= 1 ? 0 : 255 * (1 - m) * (1 - k);\n    b = y >= 1 ? 0 : 255 * (1 - y) * (1 - k);\n    return [r, g, b, alpha];\n  };\n\n  _input.cmyk = function() {\n    return cmyk2rgb(unpack(arguments));\n  };\n\n  chroma.cmyk = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['cmyk']), function(){});\n  };\n\n  Color.prototype.cmyk = function() {\n    return rgb2cmyk(this._rgb);\n  };\n\n  _input.gl = function() {\n    var i, k, o, rgb, v;\n    rgb = (function() {\n      var ref, results;\n      ref = unpack(arguments);\n      results = [];\n      for (k in ref) {\n        v = ref[k];\n        results.push(v);\n      }\n      return results;\n    }).apply(this, arguments);\n    for (i = o = 0; o <= 2; i = ++o) {\n      rgb[i] *= 255;\n    }\n    return rgb;\n  };\n\n  chroma.gl = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['gl']), function(){});\n  };\n\n  Color.prototype.gl = function() {\n    var rgb;\n    rgb = this._rgb;\n    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n  };\n\n  rgb2luminance = function(r, g, b) {\n    var ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = luminance_x(r);\n    g = luminance_x(g);\n    b = luminance_x(b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  };\n\n  luminance_x = function(x) {\n    x /= 255;\n    if (x <= 0.03928) {\n      return x / 12.92;\n    } else {\n      return pow((x + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  interpolate_rgb = function(col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['rgb', interpolate_rgb]);\n\n  Color.prototype.luminance = function(lum, mode) {\n    var cur_lum, eps, max_iter, rgba, test;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    if (!arguments.length) {\n      return rgb2luminance(this._rgb);\n    }\n    rgba = this._rgb;\n    if (lum === 0) {\n      rgba = [0, 0, 0, this._rgb[3]];\n    } else if (lum === 1) {\n      rgba = [255, 255, 255, this[3]];\n    } else {\n      cur_lum = rgb2luminance(this._rgb);\n      eps = 1e-7;\n      max_iter = 20;\n      test = function(l, h) {\n        var lm, m;\n        m = l.interpolate(h, 0.5, mode);\n        lm = m.luminance();\n        if (Math.abs(lum - lm) < eps || !max_iter--) {\n          return m;\n        }\n        if (lm > lum) {\n          return test(l, m);\n        }\n        return test(m, h);\n      };\n      if (cur_lum > lum) {\n        rgba = test(chroma('black'), this).rgba();\n      } else {\n        rgba = test(this, chroma('white')).rgba();\n      }\n    }\n    return chroma(rgba).alpha(this.alpha());\n  };\n\n  temperature2rgb = function(kelvin) {\n    var b, g, r, temp;\n    temp = kelvin / 100;\n    if (temp < 66) {\n      r = 255;\n      g = -155.25485562709179 - 0.44596950469579133 * (g = temp - 2) + 104.49216199393888 * log(g);\n      b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp - 10) + 115.67994401066147 * log(b);\n    } else {\n      r = 351.97690566805693 + 0.114206453784165 * (r = temp - 55) - 40.25366309332127 * log(r);\n      g = 325.4494125711974 + 0.07943456536662342 * (g = temp - 50) - 28.0852963507957 * log(g);\n      b = 255;\n    }\n    return [r, g, b];\n  };\n\n  rgb2temperature = function() {\n    var b, eps, g, maxTemp, minTemp, r, ref, rgb, temp;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    minTemp = 1000;\n    maxTemp = 40000;\n    eps = 0.4;\n    while (maxTemp - minTemp > eps) {\n      temp = (maxTemp + minTemp) * 0.5;\n      rgb = temperature2rgb(temp);\n      if ((rgb[2] / rgb[0]) >= (b / r)) {\n        maxTemp = temp;\n      } else {\n        minTemp = temp;\n      }\n    }\n    return round(temp);\n  };\n\n  chroma.temperature = chroma.kelvin = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['temperature']), function(){});\n  };\n\n  _input.temperature = _input.kelvin = _input.K = temperature2rgb;\n\n  Color.prototype.temperature = function() {\n    return rgb2temperature(this._rgb);\n  };\n\n  Color.prototype.kelvin = Color.prototype.temperature;\n\n  chroma.contrast = function(a, b) {\n    var l1, l2, ref, ref1;\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    l1 = a.luminance();\n    l2 = b.luminance();\n    if (l1 > l2) {\n      return (l1 + 0.05) / (l2 + 0.05);\n    } else {\n      return (l2 + 0.05) / (l1 + 0.05);\n    }\n  };\n\n  chroma.distance = function(a, b, mode) {\n    var d, i, l1, l2, ref, ref1, sum_sq;\n    if (mode == null) {\n      mode = 'lab';\n    }\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    l1 = a.get(mode);\n    l2 = b.get(mode);\n    sum_sq = 0;\n    for (i in l1) {\n      d = (l1[i] || 0) - (l2[i] || 0);\n      sum_sq += d * d;\n    }\n    return Math.sqrt(sum_sq);\n  };\n\n  chroma.deltaE = function(a, b, L, C) {\n    var L1, L2, a1, a2, b1, b2, c1, c2, c4, dH2, delA, delB, delC, delL, f, h1, ref, ref1, ref2, ref3, sc, sh, sl, t, v1, v2, v3;\n    if (L == null) {\n      L = 1;\n    }\n    if (C == null) {\n      C = 1;\n    }\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    ref2 = a.lab(), L1 = ref2[0], a1 = ref2[1], b1 = ref2[2];\n    ref3 = b.lab(), L2 = ref3[0], a2 = ref3[1], b2 = ref3[2];\n    c1 = sqrt(a1 * a1 + b1 * b1);\n    c2 = sqrt(a2 * a2 + b2 * b2);\n    sl = L1 < 16.0 ? 0.511 : (0.040975 * L1) / (1.0 + 0.01765 * L1);\n    sc = (0.0638 * c1) / (1.0 + 0.0131 * c1) + 0.638;\n    h1 = c1 < 0.000001 ? 0.0 : (atan2(b1, a1) * 180.0) / PI;\n    while (h1 < 0) {\n      h1 += 360;\n    }\n    while (h1 >= 360) {\n      h1 -= 360;\n    }\n    t = (h1 >= 164.0) && (h1 <= 345.0) ? 0.56 + abs(0.2 * cos((PI * (h1 + 168.0)) / 180.0)) : 0.36 + abs(0.4 * cos((PI * (h1 + 35.0)) / 180.0));\n    c4 = c1 * c1 * c1 * c1;\n    f = sqrt(c4 / (c4 + 1900.0));\n    sh = sc * (f * t + 1.0 - f);\n    delL = L1 - L2;\n    delC = c1 - c2;\n    delA = a1 - a2;\n    delB = b1 - b2;\n    dH2 = delA * delA + delB * delB - delC * delC;\n    v1 = delL / (L * sl);\n    v2 = delC / (C * sc);\n    v3 = sh;\n    return sqrt(v1 * v1 + v2 * v2 + (dH2 / (v3 * v3)));\n  };\n\n  Color.prototype.get = function(modechan) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    src = me[mode]();\n    if (channel) {\n      i = mode.indexOf(channel);\n      if (i > -1) {\n        return src[i];\n      } else {\n        return console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      return src;\n    }\n  };\n\n  Color.prototype.set = function(modechan, value) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    if (channel) {\n      src = me[mode]();\n      i = mode.indexOf(channel);\n      if (i > -1) {\n        if (type(value) === 'string') {\n          switch (value.charAt(0)) {\n            case '+':\n              src[i] += +value;\n              break;\n            case '-':\n              src[i] += +value;\n              break;\n            case '*':\n              src[i] *= +(value.substr(1));\n              break;\n            case '/':\n              src[i] /= +(value.substr(1));\n              break;\n            default:\n              src[i] = +value;\n          }\n        } else {\n          src[i] = value;\n        }\n      } else {\n        console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      src = value;\n    }\n    return chroma(src, mode).alpha(me.alpha());\n  };\n\n  Color.prototype.clipped = function() {\n    return this._rgb._clipped || false;\n  };\n\n  Color.prototype.alpha = function(a) {\n    if (arguments.length) {\n      return chroma.rgb([this._rgb[0], this._rgb[1], this._rgb[2], a]);\n    }\n    return this._rgb[3];\n  };\n\n  Color.prototype.darken = function(amount) {\n    var lab, me;\n    if (amount == null) {\n      amount = 1;\n    }\n    me = this;\n    lab = me.lab();\n    lab[0] -= LAB_CONSTANTS.Kn * amount;\n    return chroma.lab(lab).alpha(me.alpha());\n  };\n\n  Color.prototype.brighten = function(amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return this.darken(-amount);\n  };\n\n  Color.prototype.darker = Color.prototype.darken;\n\n  Color.prototype.brighter = Color.prototype.brighten;\n\n  Color.prototype.saturate = function(amount) {\n    var lch, me;\n    if (amount == null) {\n      amount = 1;\n    }\n    me = this;\n    lch = me.lch();\n    lch[1] += amount * LAB_CONSTANTS.Kn;\n    if (lch[1] < 0) {\n      lch[1] = 0;\n    }\n    return chroma.lch(lch).alpha(me.alpha());\n  };\n\n  Color.prototype.desaturate = function(amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return this.saturate(-amount);\n  };\n\n  Color.prototype.premultiply = function() {\n    var a, rgb;\n    rgb = this.rgb();\n    a = this.alpha();\n    return chroma(rgb[0] * a, rgb[1] * a, rgb[2] * a, a);\n  };\n\n  blend = function(bottom, top, mode) {\n    if (!blend[mode]) {\n      throw 'unknown blend mode ' + mode;\n    }\n    return blend[mode](bottom, top);\n  };\n\n  blend_f = function(f) {\n    return function(bottom, top) {\n      var c0, c1;\n      c0 = chroma(top).rgb();\n      c1 = chroma(bottom).rgb();\n      return chroma(f(c0, c1), 'rgb');\n    };\n  };\n\n  each = function(f) {\n    return function(c0, c1) {\n      var i, o, out;\n      out = [];\n      for (i = o = 0; o <= 3; i = ++o) {\n        out[i] = f(c0[i], c1[i]);\n      }\n      return out;\n    };\n  };\n\n  normal = function(a, b) {\n    return a;\n  };\n\n  multiply = function(a, b) {\n    return a * b / 255;\n  };\n\n  darken = function(a, b) {\n    if (a > b) {\n      return b;\n    } else {\n      return a;\n    }\n  };\n\n  lighten = function(a, b) {\n    if (a > b) {\n      return a;\n    } else {\n      return b;\n    }\n  };\n\n  screen = function(a, b) {\n    return 255 * (1 - (1 - a / 255) * (1 - b / 255));\n  };\n\n  overlay = function(a, b) {\n    if (b < 128) {\n      return 2 * a * b / 255;\n    } else {\n      return 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\n    }\n  };\n\n  burn = function(a, b) {\n    return 255 * (1 - (1 - b / 255) / (a / 255));\n  };\n\n  dodge = function(a, b) {\n    if (a === 255) {\n      return 255;\n    }\n    a = 255 * (b / 255) / (1 - a / 255);\n    if (a > 255) {\n      return 255;\n    } else {\n      return a;\n    }\n  };\n\n  blend.normal = blend_f(each(normal));\n\n  blend.multiply = blend_f(each(multiply));\n\n  blend.screen = blend_f(each(screen));\n\n  blend.overlay = blend_f(each(overlay));\n\n  blend.darken = blend_f(each(darken));\n\n  blend.lighten = blend_f(each(lighten));\n\n  blend.dodge = blend_f(each(dodge));\n\n  blend.burn = blend_f(each(burn));\n\n  chroma.blend = blend;\n\n  chroma.analyze = function(data) {\n    var len, o, r, val;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n    for (o = 0, len = data.length; o < len; o++) {\n      val = data[o];\n      if ((val != null) && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n        if (val < r.min) {\n          r.min = val;\n        }\n        if (val > r.max) {\n          r.max = val;\n        }\n        r.count += 1;\n      }\n    }\n    r.domain = [r.min, r.max];\n    r.limits = function(mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n    return r;\n  };\n\n  chroma.scale = function(colors, positions) {\n    var _classes, _colorCache, _colors, _correctLightness, _domain, _fixed, _gamma, _max, _min, _mode, _nacol, _out, _padding, _pos, _spread, _useCache, classifyValue, f, getClass, getColor, resetCache, setColors, tmap;\n    _mode = 'rgb';\n    _nacol = chroma('#ccc');\n    _spread = 0;\n    _fixed = false;\n    _domain = [0, 1];\n    _pos = [];\n    _padding = [0, 0];\n    _classes = false;\n    _colors = [];\n    _out = false;\n    _min = 0;\n    _max = 1;\n    _correctLightness = false;\n    _colorCache = {};\n    _useCache = true;\n    _gamma = 1;\n    setColors = function(colors) {\n      var c, col, o, ref, ref1, w;\n      if (colors == null) {\n        colors = ['#fff', '#000'];\n      }\n      if ((colors != null) && type(colors) === 'string' && (chroma.brewer != null)) {\n        colors = chroma.brewer[colors] || chroma.brewer[colors.toLowerCase()] || colors;\n      }\n      if (type(colors) === 'array') {\n        if (colors.length === 1) {\n          colors = [colors[0], colors[0]];\n        }\n        colors = colors.slice(0);\n        for (c = o = 0, ref = colors.length - 1; 0 <= ref ? o <= ref : o >= ref; c = 0 <= ref ? ++o : --o) {\n          col = colors[c];\n          if (type(col) === \"string\") {\n            colors[c] = chroma(col);\n          }\n        }\n        _pos.length = 0;\n        for (c = w = 0, ref1 = colors.length - 1; 0 <= ref1 ? w <= ref1 : w >= ref1; c = 0 <= ref1 ? ++w : --w) {\n          _pos.push(c / (colors.length - 1));\n        }\n      }\n      resetCache();\n      return _colors = colors;\n    };\n    getClass = function(value) {\n      var i, n;\n      if (_classes != null) {\n        n = _classes.length - 1;\n        i = 0;\n        while (i < n && value >= _classes[i]) {\n          i++;\n        }\n        return i - 1;\n      }\n      return 0;\n    };\n    tmap = function(t) {\n      return t;\n    };\n    classifyValue = function(value) {\n      var i, maxc, minc, n, val;\n      val = value;\n      if (_classes.length > 2) {\n        n = _classes.length - 1;\n        i = getClass(value);\n        minc = _classes[0] + (_classes[1] - _classes[0]) * (0 + _spread * 0.5);\n        maxc = _classes[n - 1] + (_classes[n] - _classes[n - 1]) * (1 - _spread * 0.5);\n        val = _min + ((_classes[i] + (_classes[i + 1] - _classes[i]) * 0.5 - minc) / (maxc - minc)) * (_max - _min);\n      }\n      return val;\n    };\n    getColor = function(val, bypassMap) {\n      var c, col, i, k, o, p, ref, t;\n      if (bypassMap == null) {\n        bypassMap = false;\n      }\n      if (isNaN(val) || val === null) {\n        return _nacol;\n      }\n      if (!bypassMap) {\n        if (_classes && _classes.length > 2) {\n          c = getClass(val);\n          t = c / (_classes.length - 2);\n        } else if (_max !== _min) {\n          t = (val - _min) / (_max - _min);\n        } else {\n          t = 1;\n        }\n      } else {\n        t = val;\n      }\n      if (!bypassMap) {\n        t = tmap(t);\n      }\n      if (_gamma !== 1) {\n        t = pow(t, _gamma);\n      }\n      t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n      t = Math.min(1, Math.max(0, t));\n      k = Math.floor(t * 10000);\n      if (_useCache && _colorCache[k]) {\n        col = _colorCache[k];\n      } else {\n        if (type(_colors) === 'array') {\n          for (i = o = 0, ref = _pos.length - 1; 0 <= ref ? o <= ref : o >= ref; i = 0 <= ref ? ++o : --o) {\n            p = _pos[i];\n            if (t <= p) {\n              col = _colors[i];\n              break;\n            }\n            if (t >= p && i === _pos.length - 1) {\n              col = _colors[i];\n              break;\n            }\n            if (t > p && t < _pos[i + 1]) {\n              t = (t - p) / (_pos[i + 1] - p);\n              col = chroma.interpolate(_colors[i], _colors[i + 1], t, _mode);\n              break;\n            }\n          }\n        } else if (type(_colors) === 'function') {\n          col = _colors(t);\n        }\n        if (_useCache) {\n          _colorCache[k] = col;\n        }\n      }\n      return col;\n    };\n    resetCache = function() {\n      return _colorCache = {};\n    };\n    setColors(colors);\n    f = function(v) {\n      var c;\n      c = chroma(getColor(v));\n      if (_out && c[_out]) {\n        return c[_out]();\n      } else {\n        return c;\n      }\n    };\n    f.classes = function(classes) {\n      var d;\n      if (classes != null) {\n        if (type(classes) === 'array') {\n          _classes = classes;\n          _domain = [classes[0], classes[classes.length - 1]];\n        } else {\n          d = chroma.analyze(_domain);\n          if (classes === 0) {\n            _classes = [d.min, d.max];\n          } else {\n            _classes = chroma.limits(d, 'e', classes);\n          }\n        }\n        return f;\n      }\n      return _classes;\n    };\n    f.domain = function(domain) {\n      var c, d, k, len, o, ref, w;\n      if (!arguments.length) {\n        return _domain;\n      }\n      _min = domain[0];\n      _max = domain[domain.length - 1];\n      _pos = [];\n      k = _colors.length;\n      if (domain.length === k && _min !== _max) {\n        for (o = 0, len = domain.length; o < len; o++) {\n          d = domain[o];\n          _pos.push((d - _min) / (_max - _min));\n        }\n      } else {\n        for (c = w = 0, ref = k - 1; 0 <= ref ? w <= ref : w >= ref; c = 0 <= ref ? ++w : --w) {\n          _pos.push(c / (k - 1));\n        }\n      }\n      _domain = [_min, _max];\n      return f;\n    };\n    f.mode = function(_m) {\n      if (!arguments.length) {\n        return _mode;\n      }\n      _mode = _m;\n      resetCache();\n      return f;\n    };\n    f.range = function(colors, _pos) {\n      setColors(colors, _pos);\n      return f;\n    };\n    f.out = function(_o) {\n      _out = _o;\n      return f;\n    };\n    f.spread = function(val) {\n      if (!arguments.length) {\n        return _spread;\n      }\n      _spread = val;\n      return f;\n    };\n    f.correctLightness = function(v) {\n      if (v == null) {\n        v = true;\n      }\n      _correctLightness = v;\n      resetCache();\n      if (_correctLightness) {\n        tmap = function(t) {\n          var L0, L1, L_actual, L_diff, L_ideal, max_iter, pol, t0, t1;\n          L0 = getColor(0, true).lab()[0];\n          L1 = getColor(1, true).lab()[0];\n          pol = L0 > L1;\n          L_actual = getColor(t, true).lab()[0];\n          L_ideal = L0 + (L1 - L0) * t;\n          L_diff = L_actual - L_ideal;\n          t0 = 0;\n          t1 = 1;\n          max_iter = 20;\n          while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n            (function() {\n              if (pol) {\n                L_diff *= -1;\n              }\n              if (L_diff < 0) {\n                t0 = t;\n                t += (t1 - t) * 0.5;\n              } else {\n                t1 = t;\n                t += (t0 - t) * 0.5;\n              }\n              L_actual = getColor(t, true).lab()[0];\n              return L_diff = L_actual - L_ideal;\n            })();\n          }\n          return t;\n        };\n      } else {\n        tmap = function(t) {\n          return t;\n        };\n      }\n      return f;\n    };\n    f.padding = function(p) {\n      if (p != null) {\n        if (type(p) === 'number') {\n          p = [p, p];\n        }\n        _padding = p;\n        return f;\n      } else {\n        return _padding;\n      }\n    };\n    f.colors = function(numColors, out) {\n      var dd, dm, i, o, ref, result, results, samples, w;\n      if (arguments.length < 2) {\n        out = 'hex';\n      }\n      result = [];\n      if (arguments.length === 0) {\n        result = _colors.slice(0);\n      } else if (numColors === 1) {\n        result = [f(0.5)];\n      } else if (numColors > 1) {\n        dm = _domain[0];\n        dd = _domain[1] - dm;\n        result = (function() {\n          results = [];\n          for (var o = 0; 0 <= numColors ? o < numColors : o > numColors; 0 <= numColors ? o++ : o--){ results.push(o); }\n          return results;\n        }).apply(this).map(function(i) {\n          return f(dm + i / (numColors - 1) * dd);\n        });\n      } else {\n        colors = [];\n        samples = [];\n        if (_classes && _classes.length > 2) {\n          for (i = w = 1, ref = _classes.length; 1 <= ref ? w < ref : w > ref; i = 1 <= ref ? ++w : --w) {\n            samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n          }\n        } else {\n          samples = _domain;\n        }\n        result = samples.map(function(v) {\n          return f(v);\n        });\n      }\n      if (chroma[out]) {\n        result = result.map(function(c) {\n          return c[out]();\n        });\n      }\n      return result;\n    };\n    f.cache = function(c) {\n      if (c != null) {\n        _useCache = c;\n        return f;\n      } else {\n        return _useCache;\n      }\n    };\n    f.gamma = function(g) {\n      if (g != null) {\n        _gamma = g;\n        return f;\n      } else {\n        return _gamma;\n      }\n    };\n    f.nodata = function(d) {\n      if (d != null) {\n        _nacol = chroma(d);\n        return f;\n      } else {\n        return _nacol;\n      }\n    };\n    return f;\n  };\n\n  if (chroma.scales == null) {\n    chroma.scales = {};\n  }\n\n  chroma.scales.cool = function() {\n    return chroma.scale([chroma.hsl(180, 1, .9), chroma.hsl(250, .7, .4)]);\n  };\n\n  chroma.scales.hot = function() {\n    return chroma.scale(['#000', '#f00', '#ff0', '#fff'], [0, .25, .75, 1]).mode('rgb');\n  };\n\n  chroma.analyze = function(data, key, filter) {\n    var add, k, len, o, r, val, visit;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n    if (filter == null) {\n      filter = function() {\n        return true;\n      };\n    }\n    add = function(val) {\n      if ((val != null) && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n        if (val < r.min) {\n          r.min = val;\n        }\n        if (val > r.max) {\n          r.max = val;\n        }\n        r.count += 1;\n      }\n    };\n    visit = function(val, k) {\n      if (filter(val, k)) {\n        if ((key != null) && type(key) === 'function') {\n          return add(key(val));\n        } else if ((key != null) && type(key) === 'string' || type(key) === 'number') {\n          return add(val[key]);\n        } else {\n          return add(val);\n        }\n      }\n    };\n    if (type(data) === 'array') {\n      for (o = 0, len = data.length; o < len; o++) {\n        val = data[o];\n        visit(val);\n      }\n    } else {\n      for (k in data) {\n        val = data[k];\n        visit(val, k);\n      }\n    }\n    r.domain = [r.min, r.max];\n    r.limits = function(mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n    return r;\n  };\n\n  chroma.limits = function(data, mode, num) {\n    var aa, ab, ac, ad, ae, af, ag, ah, ai, aj, ak, al, am, assignments, best, centroids, cluster, clusterSizes, dist, i, j, kClusters, limits, max_log, min, min_log, mindist, n, nb_iters, newCentroids, o, p, pb, pr, ref, ref1, ref10, ref11, ref12, ref13, ref14, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, repeat, sum, tmpKMeansBreaks, v, value, values, w;\n    if (mode == null) {\n      mode = 'equal';\n    }\n    if (num == null) {\n      num = 7;\n    }\n    if (type(data) === 'array') {\n      data = chroma.analyze(data);\n    }\n    min = data.min;\n    max = data.max;\n    sum = data.sum;\n    values = data.values.sort(function(a, b) {\n      return a - b;\n    });\n    if (num === 1) {\n      return [min, max];\n    }\n    limits = [];\n    if (mode.substr(0, 1) === 'c') {\n      limits.push(min);\n      limits.push(max);\n    }\n    if (mode.substr(0, 1) === 'e') {\n      limits.push(min);\n      for (i = o = 1, ref = num - 1; 1 <= ref ? o <= ref : o >= ref; i = 1 <= ref ? ++o : --o) {\n        limits.push(min + (i / num) * (max - min));\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'l') {\n      if (min <= 0) {\n        throw 'Logarithmic scales are only possible for values > 0';\n      }\n      min_log = Math.LOG10E * log(min);\n      max_log = Math.LOG10E * log(max);\n      limits.push(min);\n      for (i = w = 1, ref1 = num - 1; 1 <= ref1 ? w <= ref1 : w >= ref1; i = 1 <= ref1 ? ++w : --w) {\n        limits.push(pow(10, min_log + (i / num) * (max_log - min_log)));\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'q') {\n      limits.push(min);\n      for (i = aa = 1, ref2 = num - 1; 1 <= ref2 ? aa <= ref2 : aa >= ref2; i = 1 <= ref2 ? ++aa : --aa) {\n        p = (values.length - 1) * i / num;\n        pb = floor(p);\n        if (pb === p) {\n          limits.push(values[pb]);\n        } else {\n          pr = p - pb;\n          limits.push(values[pb] * (1 - pr) + values[pb + 1] * pr);\n        }\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'k') {\n\n      /*\n      implementation based on\n      http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n      simplified for 1-d input values\n       */\n      n = values.length;\n      assignments = new Array(n);\n      clusterSizes = new Array(num);\n      repeat = true;\n      nb_iters = 0;\n      centroids = null;\n      centroids = [];\n      centroids.push(min);\n      for (i = ab = 1, ref3 = num - 1; 1 <= ref3 ? ab <= ref3 : ab >= ref3; i = 1 <= ref3 ? ++ab : --ab) {\n        centroids.push(min + (i / num) * (max - min));\n      }\n      centroids.push(max);\n      while (repeat) {\n        for (j = ac = 0, ref4 = num - 1; 0 <= ref4 ? ac <= ref4 : ac >= ref4; j = 0 <= ref4 ? ++ac : --ac) {\n          clusterSizes[j] = 0;\n        }\n        for (i = ad = 0, ref5 = n - 1; 0 <= ref5 ? ad <= ref5 : ad >= ref5; i = 0 <= ref5 ? ++ad : --ad) {\n          value = values[i];\n          mindist = Number.MAX_VALUE;\n          for (j = ae = 0, ref6 = num - 1; 0 <= ref6 ? ae <= ref6 : ae >= ref6; j = 0 <= ref6 ? ++ae : --ae) {\n            dist = abs(centroids[j] - value);\n            if (dist < mindist) {\n              mindist = dist;\n              best = j;\n            }\n          }\n          clusterSizes[best]++;\n          assignments[i] = best;\n        }\n        newCentroids = new Array(num);\n        for (j = af = 0, ref7 = num - 1; 0 <= ref7 ? af <= ref7 : af >= ref7; j = 0 <= ref7 ? ++af : --af) {\n          newCentroids[j] = null;\n        }\n        for (i = ag = 0, ref8 = n - 1; 0 <= ref8 ? ag <= ref8 : ag >= ref8; i = 0 <= ref8 ? ++ag : --ag) {\n          cluster = assignments[i];\n          if (newCentroids[cluster] === null) {\n            newCentroids[cluster] = values[i];\n          } else {\n            newCentroids[cluster] += values[i];\n          }\n        }\n        for (j = ah = 0, ref9 = num - 1; 0 <= ref9 ? ah <= ref9 : ah >= ref9; j = 0 <= ref9 ? ++ah : --ah) {\n          newCentroids[j] *= 1 / clusterSizes[j];\n        }\n        repeat = false;\n        for (j = ai = 0, ref10 = num - 1; 0 <= ref10 ? ai <= ref10 : ai >= ref10; j = 0 <= ref10 ? ++ai : --ai) {\n          if (newCentroids[j] !== centroids[i]) {\n            repeat = true;\n            break;\n          }\n        }\n        centroids = newCentroids;\n        nb_iters++;\n        if (nb_iters > 200) {\n          repeat = false;\n        }\n      }\n      kClusters = {};\n      for (j = aj = 0, ref11 = num - 1; 0 <= ref11 ? aj <= ref11 : aj >= ref11; j = 0 <= ref11 ? ++aj : --aj) {\n        kClusters[j] = [];\n      }\n      for (i = ak = 0, ref12 = n - 1; 0 <= ref12 ? ak <= ref12 : ak >= ref12; i = 0 <= ref12 ? ++ak : --ak) {\n        cluster = assignments[i];\n        kClusters[cluster].push(values[i]);\n      }\n      tmpKMeansBreaks = [];\n      for (j = al = 0, ref13 = num - 1; 0 <= ref13 ? al <= ref13 : al >= ref13; j = 0 <= ref13 ? ++al : --al) {\n        tmpKMeansBreaks.push(kClusters[j][0]);\n        tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n      }\n      tmpKMeansBreaks = tmpKMeansBreaks.sort(function(a, b) {\n        return a - b;\n      });\n      limits.push(tmpKMeansBreaks[0]);\n      for (i = am = 1, ref14 = tmpKMeansBreaks.length - 1; am <= ref14; i = am += 2) {\n        v = tmpKMeansBreaks[i];\n        if (!isNaN(v) && limits.indexOf(v) === -1) {\n          limits.push(v);\n        }\n      }\n    }\n    return limits;\n  };\n\n  hsi2rgb = function(h, s, i) {\n\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n     */\n    var args, b, g, r;\n    args = unpack(arguments);\n    h = args[0], s = args[1], i = args[2];\n    if (isNaN(h)) {\n      h = 0;\n    }\n    h /= 360;\n    if (h < 1 / 3) {\n      b = (1 - s) / 3;\n      r = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      g = 1 - (b + r);\n    } else if (h < 2 / 3) {\n      h -= 1 / 3;\n      r = (1 - s) / 3;\n      g = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      b = 1 - (r + g);\n    } else {\n      h -= 2 / 3;\n      g = (1 - s) / 3;\n      b = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      r = 1 - (g + b);\n    }\n    r = limit(i * r * 3);\n    g = limit(i * g * 3);\n    b = limit(i * b * 3);\n    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsi = function() {\n\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n     */\n    var b, g, h, i, min, r, ref, s;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    TWOPI = Math.PI * 2;\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    i = (r + g + b) / 3;\n    s = 1 - min / i;\n    if (s === 0) {\n      h = 0;\n    } else {\n      h = ((r - g) + (r - b)) / 2;\n      h /= Math.sqrt((r - g) * (r - g) + (r - b) * (g - b));\n      h = Math.acos(h);\n      if (b > g) {\n        h = TWOPI - h;\n      }\n      h /= TWOPI;\n    }\n    return [h * 360, s, i];\n  };\n\n  chroma.hsi = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsi']), function(){});\n  };\n\n  _input.hsi = hsi2rgb;\n\n  Color.prototype.hsi = function() {\n    return rgb2hsi(this._rgb);\n  };\n\n  interpolate_hsx = function(col1, col2, f, m) {\n    var dh, hue, hue0, hue1, lbv, lbv0, lbv1, res, sat, sat0, sat1, xyz0, xyz1;\n    if (m === 'hsl') {\n      xyz0 = col1.hsl();\n      xyz1 = col2.hsl();\n    } else if (m === 'hsv') {\n      xyz0 = col1.hsv();\n      xyz1 = col2.hsv();\n    } else if (m === 'hcg') {\n      xyz0 = col1.hcg();\n      xyz1 = col2.hcg();\n    } else if (m === 'hsi') {\n      xyz0 = col1.hsi();\n      xyz1 = col2.hsi();\n    } else if (m === 'lch' || m === 'hcl') {\n      m = 'hcl';\n      xyz0 = col1.hcl();\n      xyz1 = col2.hcl();\n    }\n    if (m.substr(0, 1) === 'h') {\n      hue0 = xyz0[0], sat0 = xyz0[1], lbv0 = xyz0[2];\n      hue1 = xyz1[0], sat1 = xyz1[1], lbv1 = xyz1[2];\n    }\n    if (!isNaN(hue0) && !isNaN(hue1)) {\n      if (hue1 > hue0 && hue1 - hue0 > 180) {\n        dh = hue1 - (hue0 + 360);\n      } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n        dh = hue1 + 360 - hue0;\n      } else {\n        dh = hue1 - hue0;\n      }\n      hue = hue0 + f * dh;\n    } else if (!isNaN(hue0)) {\n      hue = hue0;\n      if ((lbv1 === 1 || lbv1 === 0) && m !== 'hsv') {\n        sat = sat0;\n      }\n    } else if (!isNaN(hue1)) {\n      hue = hue1;\n      if ((lbv0 === 1 || lbv0 === 0) && m !== 'hsv') {\n        sat = sat1;\n      }\n    } else {\n      hue = Number.NaN;\n    }\n    if (sat == null) {\n      sat = sat0 + f * (sat1 - sat0);\n    }\n    lbv = lbv0 + f * (lbv1 - lbv0);\n    return res = chroma[m](hue, sat, lbv);\n  };\n\n  _interpolators = _interpolators.concat((function() {\n    var len, o, ref, results;\n    ref = ['hsv', 'hsl', 'hsi', 'hcl', 'lch', 'hcg'];\n    results = [];\n    for (o = 0, len = ref.length; o < len; o++) {\n      m = ref[o];\n      results.push([m, interpolate_hsx]);\n    }\n    return results;\n  })());\n\n  interpolate_num = function(col1, col2, f, m) {\n    var n1, n2;\n    n1 = col1.num();\n    n2 = col2.num();\n    return chroma.num(n1 + (n2 - n1) * f, 'num');\n  };\n\n  _interpolators.push(['num', interpolate_num]);\n\n  interpolate_lab = function(col1, col2, f, m) {\n    var res, xyz0, xyz1;\n    xyz0 = col1.lab();\n    xyz1 = col2.lab();\n    return res = new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['lab', interpolate_lab]);\n\n}).call(this);\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.es/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar regexpExec = require('../internals/regexp-exec');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar SPECIES = wellKnownSymbol('species');\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  // #replace needs built-in support for named groups.\n  // #match works fine because it just return the exec results, even if it has\n  // a \"grops\" property.\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\nvar REPLACE = wellKnownSymbol('replace');\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\nmodule.exports = function (KEY, length, exec, sham) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    (KEY === 'replace' && !(\n      REPLACE_SUPPORTS_NAMED_GROUPS &&\n      REPLACE_KEEPS_$0 &&\n      !REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    )) ||\n    (KEY === 'split' && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)\n  ) {\n    var nativeRegExpMethod = /./[SYMBOL];\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      if (regexp.exec === regexpExec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: nativeRegExpMethod.call(regexp, str, arg2) };\n        }\n        return { done: true, value: nativeMethod.call(str, regexp, arg2) };\n      }\n      return { done: false };\n    }, {\n      REPLACE_KEEPS_$0: REPLACE_KEEPS_$0,\n      REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    });\n    var stringMethod = methods[0];\n    var regexMethod = methods[1];\n\n    redefine(String.prototype, KEY, stringMethod);\n    redefine(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return regexMethod.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return regexMethod.call(string, this); }\n    );\n  }\n\n  if (sham) createNonEnumerableProperty(RegExp.prototype[SYMBOL], 'sham', true);\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var toObject = require('../internals/to-object');\n\nvar floor = Math.floor;\nvar replace = ''.replace;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d\\d?|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d\\d?)/g;\n\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace.call(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (ch.charAt(0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return str.slice(0, position);\n      case \"'\": return str.slice(tailPos);\n      case '<':\n        capture = namedCaptures[ch.slice(1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  (function () { return this; })() || Function('return this')();\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","module.exports = {};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = false;\n","'use strict';\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nif (IteratorPrototype == undefined) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif (!IS_PURE && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","module.exports = {};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var classof = require('./classof-raw');\nvar regexpExec = require('./regexp-exec');\n\n// `RegExpExec` abstract operation\n// https://tc39.es/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (typeof exec === 'function') {\n    var result = exec.call(R, S);\n    if (typeof result !== 'object') {\n      throw TypeError('RegExp exec method returned something other than an Object or null');\n    }\n    return result;\n  }\n\n  if (classof(R) !== 'RegExp') {\n    throw TypeError('RegExp#exec called on incompatible receiver');\n  }\n\n  return regexpExec.call(R, S);\n};\n\n","'use strict';\nvar regexpFlags = require('./regexp-flags');\nvar stickyHelpers = require('./regexp-sticky-helpers');\n\nvar nativeExec = RegExp.prototype.exec;\n// This always refers to the native implementation, because the\n// String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,\n// which loads this file before patching the method.\nvar nativeReplace = String.prototype.replace;\n\nvar patchedExec = nativeExec;\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  nativeExec.call(re1, 'a');\n  nativeExec.call(re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y || stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y;\n\nif (PATCH) {\n  patchedExec = function exec(str) {\n    var re = this;\n    var lastIndex, reCopy, match, i;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = regexpFlags.call(re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = flags.replace('y', '');\n      if (flags.indexOf('g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = String(str).slice(re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && str[re.lastIndex - 1] !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = nativeExec.call(sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = match.input.slice(charsAdded);\n        match[0] = match[0].slice(charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      nativeReplace.call(match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\n\nvar fails = require('./fails');\n\n// babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError,\n// so we use an intermediate function.\nfunction RE(s, f) {\n  return RegExp(s, f);\n}\n\nexports.UNSUPPORTED_Y = fails(function () {\n  // babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\n  var re = RE('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') != null;\n});\n\nexports.BROKEN_CARET = fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = RE('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') != null;\n});\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.8.2',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2021 Denis Pushkarev (zloirock.ru)'\n});\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar exec = require('../internals/regexp-exec');\n\n// `RegExp.prototype.exec` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.exec\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar getSubstitution = require('../internals/get-substitution');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\nvar max = Math.max;\nvar min = Math.min;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', 2, function (REPLACE, nativeReplace, maybeCallNative, reason) {\n  var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;\n  var REPLACE_KEEPS_$0 = reason.REPLACE_KEEPS_$0;\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return replacer !== undefined\n        ? replacer.call(searchValue, O, replaceValue)\n        : nativeReplace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      if (\n        (!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE && REPLACE_KEEPS_$0) ||\n        (typeof replaceValue === 'string' && replaceValue.indexOf(UNSAFE_SUBSTITUTE) === -1)\n      ) {\n        var res = maybeCallNative(nativeReplace, regexp, this, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        results.push(result);\n        if (!global) break;\n\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n});\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\n// Singleton `WeakMap`s to store metadata for td/th elements, as well as the\n// datagrids themselves for each `<perspective-viewer>`\nexport const METADATA_MAP = new WeakMap();\n\n// Output runtime debug info like FPS.\nexport const DEBUG = true;\n\n// The largest size virtual <div> in (px) that Chrome can support without\n// glitching.\nconst isFirefox = navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\nexport const BROWSER_MAX_HEIGHT = isFirefox ? 5000000 : 10000000;\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\nimport {METADATA_MAP} from \"./constants\";\n\n/******************************************************************************\n *\n * View Model\n *\n */\n\nexport class ViewModel {\n    constructor(column_sizes, container, table) {\n        this._column_sizes = column_sizes;\n        this._container = container;\n        this.table = table;\n        this.cells = [];\n        this.rows = [];\n    }\n\n    num_columns() {\n        return this._get_row(Math.max(0, this.rows.length - 1)).row_container.length;\n    }\n\n    num_rows() {\n        return this.cells.length;\n    }\n\n    _set_metadata(td, metadata) {\n        METADATA_MAP.set(td, metadata);\n    }\n\n    _get_or_create_metadata(td) {\n        if (td === undefined) {\n            return {};\n        } else if (METADATA_MAP.has(td)) {\n            return METADATA_MAP.get(td);\n        } else {\n            const metadata = {};\n            METADATA_MAP.set(td, metadata);\n            return metadata;\n        }\n    }\n\n    _replace_cell(ridx, cidx) {\n        const {tr, row_container} = this._get_row(ridx);\n        let td = row_container[cidx];\n        if (td) {\n            tr.removeChild(td);\n            row_container.splice(cidx, 1, undefined);\n        }\n        return td;\n    }\n\n    _fetch_cell(ridx, cidx) {\n        if (ridx < 0 || cidx < 0) {\n            return;\n        }\n        const {row_container} = this._get_row(ridx);\n        return row_container[cidx];\n    }\n\n    _get_cell(tag = \"TD\", ridx, cidx) {\n        const {tr, row_container} = this._get_row(ridx);\n        let td = row_container[cidx];\n        if (!td) {\n            if (cidx < row_container.length) {\n                td = row_container[cidx] = document.createElement(tag);\n                tr.insertBefore(\n                    td,\n                    row_container.slice(cidx + 1).find((x) => x)\n                );\n            } else {\n                td = row_container[cidx] = document.createElement(tag);\n                tr.appendChild(td);\n            }\n        }\n        if (td.tagName !== tag) {\n            const new_td = document.createElement(tag);\n            tr.replaceChild(new_td, td);\n            this.cells[ridx].splice(cidx, 1, new_td);\n            td = new_td;\n        }\n        return td;\n    }\n\n    _get_row(ridx) {\n        let tr = this.rows[ridx];\n        if (!tr) {\n            tr = this.rows[ridx] = document.createElement(\"tr\");\n            this.table.appendChild(tr);\n        }\n\n        let row_container = this.cells[ridx];\n        if (!row_container) {\n            row_container = this.cells[ridx] = [];\n        }\n\n        return {tr, row_container};\n    }\n\n    _clean_columns(cidx) {\n        for (let i = 0; i < this.rows.length; i++) {\n            const tr = this.rows[i];\n            const row_container = this.cells[i];\n            this.cells[i] = row_container.slice(0, cidx[i] || cidx);\n            const idx = this.cells[i].filter((x) => x !== undefined).length;\n            while (tr.children[idx]) {\n                tr.removeChild(tr.children[idx]);\n            }\n        }\n    }\n\n    _clean_rows(ridx) {\n        while (this.table.children[ridx]) {\n            this.table.removeChild(this.table.children[ridx]);\n        }\n        this.rows = this.rows.slice(0, ridx);\n        this.cells = this.cells.slice(0, ridx);\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\nimport {ViewModel} from \"./view_model\";\n\n/**\n * <thead> view model.  This model accumulates state in the form of\n * column_sizes, which leverages <tables> autosize behavior across\n * virtual pages.\n *\n * @class RegularHeaderViewModel\n */\nexport class RegularHeaderViewModel extends ViewModel {\n    _draw_group_th(offset_cache, d, column) {\n        const th = this._get_cell(\"TH\", d, offset_cache[d] || 0);\n        offset_cache[d] += 1;\n        th.removeAttribute(\"colspan\");\n        th.style.minWidth = \"0\";\n\n        th.textContent = \"\";\n        if (column instanceof HTMLElement) {\n            th.appendChild(column);\n        } else {\n            const span = document.createElement(\"span\");\n            span.textContent = column;\n            th.appendChild(span);\n        }\n\n        const resizeSpan = document.createElement(\"span\");\n        resizeSpan.className = \"rt-column-resize\";\n        th.appendChild(resizeSpan);\n\n        return th;\n    }\n\n    _draw_group(column, column_name, th) {\n        const metadata = this._get_or_create_metadata(th);\n        metadata.column_header = column;\n        metadata.value = column_name;\n        metadata.value = column_name;\n        return metadata;\n    }\n\n    _draw_th(column, column_name, th, cidx, size_key) {\n        const metadata = this._get_or_create_metadata(th);\n        metadata.column_header = column;\n        metadata.value = column_name;\n        metadata.size_key = size_key.length ? size_key[0] : size_key; // FIXME\n\n        if (!(size_key.length > 1)) {\n            const override_width = this._column_sizes.override[metadata.size_key];\n            const auto_width = this._column_sizes.auto[metadata.size_key];\n            if (override_width) {\n                th.classList.toggle(\"rt-cell-clip\", auto_width > override_width);\n                th.style.minWidth = override_width + \"px\";\n                th.style.maxWidth = override_width + \"px\";\n            } else if (auto_width) {\n                th.classList.remove(\"rt-cell-clip\");\n                th.style.maxWidth = \"\";\n                th.style.minWidth = auto_width + \"px\";\n            } else {\n                th.style.maxWidth = \"\";\n                th.style.maxWidth = \"\";\n            }\n        }\n\n        return metadata;\n    }\n\n    get_column_header(cidx) {\n        return this._get_cell(\"TH\", this.num_rows() - 1, cidx);\n    }\n\n    _group_header_cache = [];\n    _offset_cache = [];\n\n    draw(alias, parts, colspan, x, size_key, x0, _virtual_x) {\n        const header_levels = parts?.length; //config.column_pivots.length + 1;\n        if (header_levels === 0) return {};\n        let th, metadata, column_name;\n        for (let d = 0; d < header_levels; d++) {\n            column_name = parts[d] ? parts[d] : \"\";\n            this._offset_cache[d] = this._offset_cache[d] || 0;\n            if (d < header_levels - 1) {\n                if (this._group_header_cache?.[d]?.[0]?.value === column_name) {\n                    th = this._group_header_cache[d][1];\n                    this._group_header_cache[d][2] += 1;\n                    if (colspan === 1) {\n                        this._group_header_cache[d][0].row_header_x = size_key;\n                    }\n                    th.setAttribute(\"colspan\", this._group_header_cache[d][2]);\n                } else {\n                    th = this._draw_group_th(this._offset_cache, d, column_name);\n                    metadata = this._draw_group(parts, column_name, th);\n                    this._group_header_cache[d] = [metadata, th, 1];\n                }\n            } else {\n                th = this._draw_group_th(this._offset_cache, d, column_name);\n\n                // Update the group header's metadata such that each group\n                // header has the same metadata coordinates of its rightmost\n                // column.\n                metadata = this._draw_th(alias || parts, column_name, th, x, size_key);\n                for (const [group_meta] of this._group_header_cache) {\n                    group_meta.size_key = metadata.size_key;\n                }\n                th.removeAttribute(\"colspan\");\n            }\n            if (metadata) {\n                metadata.x = x;\n                metadata.column_header_y = d;\n                metadata.x0 = x0;\n                metadata._virtual_x = _virtual_x;\n                if (colspan === 1) {\n                    metadata.row_header_x = size_key;\n                }\n            }\n        }\n\n        this._clean_rows(this._offset_cache.length);\n        return {th, metadata};\n    }\n\n    clean() {\n        this._clean_columns(this._offset_cache);\n    }\n\n    reset_header_cache() {\n        this._offset_cache = [];\n        this._group_header_cache = [];\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\nimport {ViewModel} from \"./view_model\";\n\n// const ROW_HEADER_RENDER_MODE = \"rowspan\";\n// console.assert([\"none\", \"rowspan\", \"colspan\"].indexOf(ROW_HEADER_RENDER_MODE) > -1, \"Invalid ROW_HEADER_RENDERER_MODE\");\n\n/**\n * <tbody> view model.\n *\n * @class RegularBodyViewModel\n */\nexport class RegularBodyViewModel extends ViewModel {\n    _draw_td(tagName, ridx, val, cidx, {column_name}, {ridx_offset}, size_key) {\n        const td = this._get_cell(tagName, ridx, cidx);\n        const metadata = this._get_or_create_metadata(td);\n        metadata.y = ridx + ridx_offset;\n        metadata.size_key = size_key;\n        if (tagName === \"TD\") {\n            metadata.column_header = column_name;\n        }\n        const override_width = this._column_sizes.override[metadata.size_key];\n        if (override_width) {\n            const auto_width = this._column_sizes.auto[metadata.size_key];\n            td.classList.toggle(\"rt-cell-clip\", auto_width > override_width);\n            td.style.minWidth = override_width + \"px\";\n            td.style.maxWidth = override_width + \"px\";\n        } else {\n            td.classList.remove(\"rt-cell-clip\");\n            td.style.minWidth = \"\";\n            td.style.maxWidth = \"\";\n        }\n\n        if (val instanceof HTMLElement) {\n            td.textContent = \"\";\n            td.appendChild(val);\n        } else {\n            td.textContent = val;\n        }\n\n        metadata.value = val;\n        return {td, metadata};\n    }\n\n    draw(container_height, column_state, view_state, th = false, x, x0, size_key) {\n        const {cidx, column_data, row_headers, column_data_listener_metadata} = column_state;\n        let {row_height} = view_state;\n        let metadata;\n        const ridx_offset = [],\n            tds = [];\n        let ridx = 0;\n        const cidx_offset = [];\n        for (let i = 0; i < (th ? view_state.row_headers_length : 1); i++) {\n            ridx = 0;\n\n            for (const val of column_data) {\n                const id = row_headers?.[ridx];\n                let obj;\n                if (th) {\n                    const row_header = val[i];\n                    const prev_row = this._fetch_cell(ridx - (ridx_offset[i] || 1), cidx + i);\n                    const prev_row_metadata = this._get_or_create_metadata(prev_row);\n\n                    const prev_col = this._fetch_cell(ridx, cidx + i - (cidx_offset[ridx] || 1));\n                    const prev_col_metadata = this._get_or_create_metadata(prev_col);\n\n                    if (prev_col && (prev_col_metadata.value === row_header || row_header === undefined) && !prev_col.hasAttribute(\"rowspan\")) {\n                        cidx_offset[ridx] = cidx_offset[ridx] ? cidx_offset[ridx] + 1 : 2;\n                        prev_col.setAttribute(\"colspan\", cidx_offset[ridx]);\n                        this._replace_cell(ridx, cidx + i);\n                    } else if (prev_row && prev_row_metadata.value === row_header && !prev_row.hasAttribute(\"colspan\")) {\n                        ridx_offset[i] = ridx_offset[i] ? ridx_offset[i] + 1 : 2;\n                        prev_row.setAttribute(\"rowspan\", ridx_offset[i]);\n                        this._replace_cell(ridx, cidx + i);\n                    } else {\n                        obj = this._draw_td(\"TH\", ridx, row_header, cidx + i, column_state, view_state, i);\n                        obj.td.style.display = \"\";\n                        obj.td.removeAttribute(\"rowspan\");\n                        obj.td.removeAttribute(\"colspan\");\n                        obj.metadata.row_header = val;\n                        obj.metadata.row_header_x = i;\n                        obj.metadata.x0 = x0;\n                        obj.metadata.y0 = view_state.ridx_offset;\n                        obj.metadata.y1 = view_state.y1;\n                        obj.metadata._virtual_x = i;\n                        ridx_offset[i] = 1;\n                        cidx_offset[ridx] = 1;\n                        tds[i] = obj;\n                    }\n                } else {\n                    obj = this._draw_td(\"TD\", ridx, val, cidx, column_state, view_state, size_key);\n                    if (column_data_listener_metadata) {\n                        obj.metadata.user = column_data_listener_metadata[ridx];\n                    }\n\n                    obj.metadata.x = x;\n                    obj.metadata.x0 = x0;\n                    obj.metadata.x1 = view_state.x1;\n                    obj.metadata.row_header = id || [];\n                    obj.metadata.y0 = view_state.ridx_offset;\n                    obj.metadata.y1 = view_state.y1;\n                    obj.metadata.dx = x - x0;\n                    obj.metadata.dy = obj.metadata.y - obj.metadata.y0;\n                    obj.metadata._virtual_x = cidx;\n                    tds[0] = obj;\n                }\n\n                ridx++;\n                metadata = obj ? obj.metadata : metadata;\n                row_height = row_height || obj?.td.offsetHeight;\n                if (ridx * row_height > container_height) {\n                    break;\n                }\n            }\n        }\n        this._clean_rows(ridx);\n        return {tds, ridx, metadata, row_height};\n    }\n\n    clean({ridx, cidx}) {\n        this._clean_rows(ridx);\n        this._clean_columns(cidx);\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\n/******************************************************************************\n *\n * Profling\n *\n */\n\nlet AVG = 0,\n    TOTAL = 0,\n    START = performance.now();\n\nexport function get_draw_fps() {\n    const now = performance.now();\n    const elapsed = now - START;\n    const avg = AVG;\n    const real_fps = (TOTAL * 1000) / elapsed;\n    const virtual_fps = 1000 / avg;\n    const num_frames = TOTAL;\n    AVG = 0;\n    TOTAL = 0;\n    START = now;\n    return {avg, real_fps, virtual_fps, num_frames, elapsed};\n}\n\nexport function log_perf(x) {\n    AVG = (AVG * TOTAL + x) / (TOTAL + 1);\n    TOTAL += 1;\n}\n\n/******************************************************************************\n *\n * Utils\n *\n */\n\n/**\n * A class method decorate for memoizing method results.  Only works on one\n * arg.\n */\nexport function memoize(_target, _property, descriptor) {\n    const cache = new Map();\n    const func = descriptor.value;\n    descriptor.value = new_func;\n    return descriptor;\n    function new_func(arg) {\n        if (cache.has(arg)) {\n            return cache.get(arg);\n        } else {\n            const res = func.call(this, arg);\n            cache.set(arg, res);\n            return res;\n        }\n    }\n}\n\n/**\n * Identical to a non-tagger template literal, this is only used to indicate to\n * babel that this string should be HTML-minified on production builds.\n */\nexport const html = (strings, ...args) =>\n    strings\n        .map((str, i) => [str, args[i]])\n        .flat()\n        .filter((a) => !!a)\n        .join(\"\");\n\nconst invertPromise = () => {\n    let _resolve;\n    const promise = new Promise((resolve) => {\n        _resolve = resolve;\n    });\n    promise.resolve = _resolve;\n    return promise;\n};\n\nexport function throttlePromise(target, property, descriptor) {\n    const lock = Symbol(\"private lock\");\n    const f = descriptor.value;\n    descriptor.value = async function (...args) {\n        if (this[lock]) {\n            await this[lock];\n            if (this[lock]) {\n                await this[lock];\n                return;\n            }\n        }\n        this[lock] = invertPromise();\n        let result;\n        try {\n            result = await f.call(this, ...args);\n        } finally {\n            const l = this[lock];\n            this[lock] = undefined;\n            l.resolve();\n        }\n        return result;\n    };\n    descriptor.value.flush = function () {\n        return this[lock];\n    };\n    return descriptor;\n}\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\nimport {RegularHeaderViewModel} from \"./thead\";\nimport {RegularBodyViewModel} from \"./tbody\";\nimport {html} from \"./utils\";\n\n/**\n * <table> view model.  In order to handle unknown column width when `draw()`\n * is called, this model will iteratively fetch more data to fill in columns\n * until the page is complete, and makes some column viewport estimations\n * when this information is not availble.\n *\n * @class RegularTableViewModel\n */\nexport class RegularTableViewModel {\n    constructor(table_clip, column_sizes, element) {\n        this.clear(element);\n        const [table] = element.children;\n        const [thead, tbody] = table.children;\n        this.table = table;\n        this._column_sizes = column_sizes;\n        this.header = new RegularHeaderViewModel(column_sizes, table_clip, thead);\n        this.body = new RegularBodyViewModel(column_sizes, table_clip, tbody);\n        this.fragment = document.createDocumentFragment();\n    }\n\n    num_columns() {\n        return this.header.num_columns();\n    }\n\n    clear(element) {\n        element.innerHTML = html`\n            <table cellspacing=\"0\">\n                <thead></thead>\n                <tbody></tbody>\n            </table>\n        `;\n    }\n\n    /**\n     * Calculate amendments to auto size from this render pass.\n     *\n     * @param {*} last_cells\n     * @param {*} {columns, column_pivots}\n     * @memberof RegularTableViewModel\n     */\n    autosize_cells(last_cells) {\n        while (last_cells.length > 0) {\n            const [cell, metadata, row_height_cell] = last_cells.pop();\n            let offsetWidth;\n            const style = getComputedStyle(cell);\n            if (style.boxSizing !== \"border-box\") {\n                offsetWidth = cell.clientWidth;\n                offsetWidth -= parseFloat(style.paddingLeft);\n                offsetWidth -= parseFloat(style.paddingRight);\n            } else {\n                offsetWidth = cell.offsetWidth;\n            }\n            this._column_sizes.row_height = this._column_sizes.row_height || row_height_cell.offsetHeight;\n            this._column_sizes.indices[metadata.size_key] = offsetWidth;\n            const is_override = this._column_sizes.override.hasOwnProperty(metadata.size_key);\n            if (offsetWidth && !is_override) {\n                this._column_sizes.auto[metadata.size_key] = offsetWidth;\n            }\n            if (cell.style.minWidth === \"0px\") {\n                cell.style.minWidth = `${offsetWidth}px`;\n            }\n        }\n    }\n\n    async *draw(container_size, view_cache, selected_id, preserve_width, viewport, num_columns) {\n        const {width: container_width, height: container_height} = container_size;\n        const {view, config} = view_cache;\n        let {data, row_headers, column_headers, metadata: data_listener_metadata} = await view(viewport.start_col, viewport.start_row, viewport.end_col, viewport.end_row);\n        const {start_row: ridx_offset = 0, start_col: x0 = 0, end_col: x1 = 0, end_row: y1 = 0} = viewport;\n\n        // pad row_headers for embedded renderer\n        // TODO maybe dont need this - perspective compat\n        if (row_headers) {\n            this._row_headers_length = row_headers.reduce((max, x) => Math.max(max, x.length), 0);\n            row_headers = row_headers.map((x) => {\n                x.length = this._row_headers_length;\n                return x;\n            });\n        }\n\n        view_cache.config.column_pivots = Array.from(Array(column_headers?.[0]?.length - 1 || 0).keys());\n        view_cache.config.row_pivots = Array.from(Array(row_headers?.[0]?.length || 0).keys());\n\n        const view_state = {\n            viewport_width: 0,\n            selected_id,\n            ridx_offset,\n            x0: x0,\n            x1: x1,\n            y1: y1,\n            row_height: this._column_sizes.row_height,\n            row_headers_length: this._row_headers_length,\n        };\n\n        let cont_body,\n            _virtual_x = 0,\n            last_cells = [],\n            first_col = true;\n        if (row_headers?.length > 0) {\n            const column_name = config.row_pivots.join(\",\");\n\n            const column_state = {\n                column_name,\n                cidx: 0,\n                column_data: row_headers,\n                row_headers,\n                first_col,\n            };\n            const size_key = _virtual_x + x0;\n            cont_body = this.body.draw(container_height, column_state, {...view_state, x0: 0}, true, undefined, undefined, size_key);\n            const cont_heads = [];\n            for (let i = 0; i < view_cache.config.row_pivots.length; i++) {\n                cont_heads.push(this.header.draw(column_name, Array(view_cache.config.column_pivots.length + 1).fill(\"\"), 1, undefined, i, x0, i));\n            }\n            first_col = false;\n            view_state.viewport_width += cont_heads.reduce((total, {th}, i) => total + (this._column_sizes.indices[i] || th.offsetWidth), 0);\n            view_state.row_height = view_state.row_height || cont_body.row_height;\n            _virtual_x = row_headers[0].length;\n            if (!preserve_width) {\n                for (let i = 0; i < view_cache.config.row_pivots.length; i++) {\n                    const {td, metadata} = cont_body.tds[i] || {};\n                    const {th, metadata: hmetadata} = cont_heads[i];\n                    last_cells.push([th || td, hmetadata || metadata, td || th]);\n                }\n            }\n        }\n\n        try {\n            let dcidx = 0;\n            const num_visible_columns = num_columns - viewport.start_col;\n            while (dcidx < num_visible_columns) {\n                // If there is no column for this data, our pre-fetch viewport\n                // estimate was wrong and we'll need to do a mid-render fetch\n                // to get more data.\n                if (!data[dcidx]) {\n                    let missing_cidx = Math.max(viewport.end_col, 0);\n                    viewport.start_col = missing_cidx;\n\n                    // Calculate a new data window width based on how large the\n                    // columns drawn so far take up.  This can either be\n                    // summed if we've drawn/measured these columns before,\n                    // or estimated by avg if the missing columns have never\n                    // been seen by the renderer.\n                    let end_col_offset = 0,\n                        size_extension = 0;\n                    while (this._column_sizes.indices.length > _virtual_x + x0 + end_col_offset + 1 && size_extension + view_state.viewport_width < container_width) {\n                        end_col_offset++;\n                        size_extension += this._column_sizes.indices[_virtual_x + x0 + end_col_offset];\n                    }\n\n                    if (size_extension + view_state.viewport_width < container_width) {\n                        const estimate = Math.min(num_columns, missing_cidx + 5); //Math.ceil(((dcidx + end_col_offset) * container_width) / (view_state.viewport_width + size_extension) + 1);\n                        viewport.end_col = Math.max(1, Math.min(num_columns, estimate));\n                    } else {\n                        viewport.end_col = Math.max(1, Math.min(num_columns, missing_cidx + end_col_offset));\n                    }\n\n                    // Fetch the new data window extension and append it to the\n                    // cached data page and continue.\n                    const new_col_req = view(viewport.start_col, viewport.start_row, viewport.end_col, viewport.end_row);\n                    yield undefined;\n                    const new_col = await new_col_req;\n\n                    if (new_col.data.length === 0) {\n                        // The viewport is size 0, first the estimate, then the\n                        // first-pass render, so really actually abort now.\n                        yield last_cells;\n                        return;\n                    }\n\n                    viewport.end_col = viewport.start_col + new_col.data.length;\n                    for (let i = 0; i < new_col.data.length; i++) {\n                        data[dcidx + i] = new_col.data[i];\n                        if (new_col.metadata) {\n                            data_listener_metadata[dcidx + i] = new_col.metadata[i];\n                        }\n\n                        if (column_headers) {\n                            column_headers[dcidx + i] = new_col.column_headers?.[i];\n                        }\n                    }\n                }\n\n                const column_name = column_headers?.[dcidx] || \"\";\n                const column_data = data[dcidx];\n                const column_data_listener_metadata = data_listener_metadata?.[dcidx];\n                const column_state = {\n                    column_name,\n                    cidx: _virtual_x,\n                    column_data,\n                    column_data_listener_metadata,\n                    row_headers,\n                    first_col,\n                };\n\n                const x = dcidx + x0;\n                const size_key = _virtual_x + x0;\n                const cont_head = this.header.draw(undefined, column_name, undefined, x, size_key, x0, _virtual_x);\n                cont_body = this.body.draw(container_height, column_state, view_state, false, x, x0, size_key);\n                first_col = false;\n                if (!preserve_width) {\n                    for (const {td, metadata} of cont_body.tds) {\n                        last_cells.push([cont_head.th || td, cont_head.metadata || metadata, td || cont_head.th]);\n                    }\n                }\n\n                const last_measured_col_width = this._column_sizes.indices[_virtual_x + x0];\n                if (last_measured_col_width) {\n                    view_state.viewport_width += last_measured_col_width;\n                } else {\n                    view_state.viewport_width += cont_head.th?.offsetWidth || cont_body.tds.reduce((x, y) => x + y.td?.offsetWidth, 0);\n                }\n\n                view_state.row_height = view_state.row_height || cont_body.row_height;\n                _virtual_x++;\n                dcidx++;\n\n                if (view_state.viewport_width > container_width) {\n                    this.body.clean({ridx: cont_body?.ridx || 0, cidx: _virtual_x});\n                    this.header.clean();\n                    yield last_cells;\n\n                    // If we make it here, this draw() call was invalidated by\n                    // a call to `invalidate()` within a `StyleListener`, so\n                    // recalculate the cumulative width and keep drawing if\n                    // necessary.  Note `last_cells` is a list of 2-tuples but\n                    // we only bind the first var because _eslint_.\n                    view_state.viewport_width = 0;\n                    for (let [td] of last_cells) {\n                        view_state.viewport_width += td.offsetWidth;\n                    }\n\n                    // If there are still enough columns to fill the screen,\n                    // completely end the iteration here, otherwise\n                    // continue iterating to draw another column.\n                    if (view_state.viewport_width > container_width) {\n                        return;\n                    }\n                }\n            }\n            this.body.clean({ridx: cont_body?.ridx || 0, cidx: _virtual_x});\n            this.header.clean();\n            yield last_cells;\n        } finally {\n            this.body.clean({ridx: cont_body?.ridx || 0, cidx: _virtual_x});\n            this.header.clean();\n        }\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\nimport {log_perf, html, throttlePromise} from \"./utils\";\nimport {DEBUG, BROWSER_MAX_HEIGHT} from \"./constants\";\n\nimport container_css from \"../less/container.less\";\n\n/**\n * Handles the virtual scroll pane, as well as the double buffering\n * of the underlying <table>. This DOM structure looks a little like\n * this:\n *\n *     +------------------------+      <- div.rt-scroll-container\n *     | +----------------------|------<- div.rt-virtual-panel\n *     | | +------------------+ |      <- div.rt-scroll-table-clip\n *     | | | +----------------|-|--+   <- table             |\n *     | | | | 1  A  Alabama  | |  |                        |\n *     | | | | 2  B  Arizona  | |  |                        |\n *     | | | | 3  C  Arkansas | |  |                        |\n *     | | | | 4  D  Californi| |  |                        |\n *     | | | | 5  E  Colorado | |  |                        |\n *     | | +------------------+ |  |                        |\n *     +------------------------+  |                        |\n *       |   | 8  H  District of C |                        |\n *       |   +---------------------+                        |\n *       |                                                  |\n *       |                                                  |\n *       |                                                  |\n *       |                                                  |\n *       |                                                  |\n *       +--------------------------------------------------+\n *\n * `overflow: auto` is applied to `.rt-scroll-container`, and `.rt-virtual-pane`\n * is sized to match the estimated \"virtual\" size of the `table`;  estimated,\n * because it's true size can't be known until all columns dimensions are known,\n * which may be deferred in the case of auto-sized tables.\n *\n * Double buffering can be enabled on \"column scroll\", \"row scroll\" and/or\n * \"column schema change\".  When enabled and a redraw is requested for the case,\n * the existing table is cloned with `cloneNode()` and swapped with the real\n * `table`, which is then updated offscreen and swapped back in.  While this is\n * much slower to render, it prevents draw-in.\n *\n * @class RegularVirtualTableViewModel\n */\nexport class RegularVirtualTableViewModel extends HTMLElement {\n    /**\n     * Create the DOM for this `shadowRoot`.\n     *\n     * TODO deprecated\n     * `MATERIAL_STYLE` is needed both here, and in the document `<head>`, due\n     * to double buffering, which may read incorrect position/size values as the\n     * double buffered `<table>` is rendered in the shadow DOM before being\n     * swapped in.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     */\n    create_shadow_dom() {\n        this.attachShadow({mode: \"open\"});\n        const slot = `<slot></slot>`;\n        this.shadowRoot.innerHTML = html`\n            <style>\n                ${container_css}\n            </style>\n            <div class=\"rt-virtual-panel\"></div>\n            <div class=\"rt-scroll-table-clip\">\n                ${slot}\n            </div>\n        `;\n\n        const [, virtual_panel, table_clip] = this.shadowRoot.children;\n        this._table_clip = table_clip;\n        this._virtual_panel = virtual_panel;\n        this._setup_virtual_scroll();\n    }\n\n    _setup_virtual_scroll() {\n        if (this._table_clip) {\n            if (this._virtual_mode === \"both\" || this._virtual_mode === \"vertical\") {\n                this._table_clip.style.top = \"0px\";\n            }\n\n            if (this._virtual_mode === \"both\" || this._virtual_mode === \"horizontal\") {\n                this._table_clip.style.left = \"0px\";\n            }\n        }\n    }\n\n    /**\n     * Calculates the `viewport` argument for perspective's `to_columns` method.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} nrows\n     * @param {*} reset_scroll_position\n     * @returns\n     */\n    _calculate_viewport(nrows, num_columns, reset_scroll_position, invalid_columns) {\n        const {start_row, end_row} = this._calculate_row_range(nrows, reset_scroll_position);\n        const {start_col, end_col} = this._calculate_column_range(num_columns, invalid_columns);\n        this._nrows = nrows;\n        return {start_col, end_col, start_row, end_row};\n    }\n\n    /**\n     * Calculate `start_row` and `end_row` for the viewport.  We do this by\n     * first calculating `total_scroll_height`, the px height of the\n     * scrollable page, from the `_virtual_panel.offsetHeight`.\n     *\n     *    0px +------------+-------------+  - virtual_panel.offsetHeight\n     *        |            |  .          |  . 600px\n     *        |  viewport  |  .          |  .\n     *        |            |  .          |  .\n     *  200px +------------+  - height   |  .  - total_scroll_height\n     *        |                 200px    |  .  . 400px\n     *        |                          |  .  .\n     *        |                          |  .  .\n     *        |                          |  .  .\n     *        |                          |  .  .\n     *  600px +--------------------------+  -  -\n     *\n     *  `percent_scroll` can be calculated from this value and `scrollTop`,\n     *  which we can then apply to the new calculated height to preserve scroll\n     *  position when the height has changed since previous render.\n     *\n     *    0px +--------------------------+  -\n     *        |                          |  .\n     *        |                          |  .\n     *        |                          |  . scrollable area\n     *  300px +------------+             |  .\n     *        |            |             |  .\n     *  - - - |  viewport  | - - - - - - |  - total_scroll_height\n     *        |            |             |    400px\n     *  500px +------------+             |\n     *        |                          |\n     *  600px +--------------------------+\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} nrows\n     * @param {*} reset_scroll_position\n     * @returns\n     */\n    _calculate_row_range(nrows, reset_scroll_position) {\n        const {height} = this._container_size;\n        const row_height = this._column_sizes.row_height || 19;\n        const header_levels = this._view_cache.config.column_pivots.length + 1;\n        // TODO use cached height?\n        const total_scroll_height = Math.max(1, this._virtual_panel.offsetHeight - this.clientHeight);\n        const percent_scroll = Math.max(this.scrollTop, 0) / total_scroll_height;\n        const virtual_panel_row_height = height / row_height;\n        const relative_nrows = !reset_scroll_position ? this._nrows || 0 : nrows;\n        const scroll_rows = Math.max(0, relative_nrows + (header_levels - virtual_panel_row_height));\n        let start_row = Math.ceil(scroll_rows * percent_scroll);\n        let end_row = Math.min(Math.ceil(start_row + virtual_panel_row_height), nrows);\n        return {start_row, end_row};\n    }\n\n    /**\n     * Calculates `start_col` and `end_col` for the viewport - most of the\n     * details of which are actually calculated in `_max_column`, the equivalent\n     * of `total_scroll_height` from `_calculate_row_range`.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @returns\n     */\n    _calculate_column_range(num_columns, invalid_columns) {\n        const total_scroll_width = Math.max(1, this._virtual_panel.offsetWidth - this._container_size.width);\n        const percent_left = this.scrollLeft / total_scroll_width;\n        const max_scroll_column = this._max_scroll_column(num_columns) + 0.5;\n        if (this._virtual_mode === \"none\" || this._virtual_mode === \"vertical\") {\n            return {start_col: 0, end_col: Infinity};\n        } else {\n            let start_col = Math.floor(max_scroll_column * percent_left);\n            const vis_cols = (!invalid_columns && this.table_model.num_columns()) || Math.min(num_columns, Math.ceil(this._container_size.width / 60));\n            let end_col = start_col + vis_cols + 1;\n            return {start_col, end_col};\n        }\n    }\n\n    /**\n     * Calculates the minimum possible starting column index for which the last\n     * column is completely visible (e.g. not occluded by the container clip).\n     * This is assumed to be the # of columns until the column widths are\n     * calculated as they are scrolled into view by the user, which requires\n     * special synchronization with _update_virtual_panel_width`\n     * as the scrollable width will change as the user scrolls left to right.\n     *\n     * Once `_column_sizes.indices` has enough column widths populated from\n     * user scrolling, it calulates the cumulative sum of column widths from\n     * last visible column backwards, until the sum is larger than the viewport\n     * px width, which is 1 below the max scroll column\n     *\n     *               width = 290   = 210     = 100    = 0\n     *   0px               V       V         V        500px\n     *   +-----------------+-------+---------+--------+\n     *   | ..ol B) (Col C) | Col D | Col E   | Col F  |\n     *   |                 | 80px  | 110px   | 100px  |\n     *   |                 |       |         |        |\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @returns\n     */\n    _max_scroll_column(num_columns) {\n        let width = 0;\n        if (this._view_cache.config.row_pivots.length > 0) {\n            for (const w of this._column_sizes.indices.slice(0, this._view_cache.config.row_pivots.length)) {\n                width += w;\n            }\n        }\n        let max_scroll_column = num_columns;\n        while (width < this._container_size.width && max_scroll_column >= 0) {\n            max_scroll_column--;\n            width += this._column_sizes.indices[max_scroll_column] || 60;\n        }\n        return Math.min(num_columns - 1, max_scroll_column + 1);\n    }\n\n    /**\n     * Determines whether the viewport is identical in row and column axes to\n     * the previous viewport rendered, for throttling identical render requests,\n     * e.g. when the logical (row-wise) viewport does not change, but the pixel\n     * viewport has moved a few px.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} {start_col, end_col, start_row, end_row}\n     * @returns\n     */\n    _validate_viewport({start_col, end_col, start_row, end_row}) {\n        const invalid_column = this._start_col !== start_col;\n        const invalid_row = this._start_row !== start_row || this._end_row !== end_row || this._end_col !== end_col;\n        this._start_col = start_col;\n        this._end_col = end_col;\n        this._start_row = start_row;\n        this._end_row = end_row;\n        return {invalid_column, invalid_row};\n    }\n\n    /**\n     * Updates the `virtual_panel` width based on view state.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} invalid\n     */\n    _update_virtual_panel_width(invalid, num_columns) {\n        if (invalid) {\n            if (this._virtual_mode === \"vertical\" || this._virtual_mode === \"none\") {\n                this._virtual_panel.style.width = this._column_sizes.indices.reduce((x, y) => x + y, 0) + \"px\";\n            } else {\n                const total_scroll_width = Math.max(1, this._virtual_panel.offsetWidth - this._container_size.width);\n                const percent_left = this.scrollLeft / total_scroll_width;\n                const max_scroll_column = this._max_scroll_column(num_columns);\n                let cidx = 0,\n                    virtual_width = 0;\n                while (cidx < max_scroll_column) {\n                    virtual_width += this._column_sizes.indices[cidx] || 60;\n                    cidx++;\n                }\n                const panel_width = this._container_size.width + virtual_width;\n                this._virtual_panel.style.width = panel_width + \"px\";\n                this.scrollLeft = percent_left * virtual_width;\n            }\n        }\n    }\n\n    /**\n     * Updates the `virtual_panel` height based on the view state.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} nrows\n     */\n    _update_virtual_panel_height(nrows) {\n        const {row_height = 19} = this._column_sizes;\n        const header_height = this.table_model.header.num_rows() * row_height;\n        let virtual_panel_px_size;\n        if (this._virtual_mode === \"horizontal\" || this._virtual_mode === \"none\") {\n            virtual_panel_px_size = nrows * row_height + header_height;\n        } else {\n            //const {height} = this._container_size;\n            // TODO use cached height?\n            const zoom_factor = this.clientHeight / (this._table_clip.offsetHeight - header_height);\n            virtual_panel_px_size = Math.min(BROWSER_MAX_HEIGHT, nrows * row_height * zoom_factor);\n        }\n        this._virtual_panel.style.height = `${virtual_panel_px_size}px`;\n    }\n\n    /**\n     * Draws this virtual panel, given an object of render options that allow\n     * the implementor to fine tune the individual render frames based on the\n     * interaction and previous render state.\n     *\n     * `reset_scroll_position` will not prevent the viewport from moving as\n     * `draw()` may change the dimensions of the virtual_panel (and thus,\n     * absolute scroll offset).  This calls `reset_scroll`, which will\n     * trigger `_on_scroll` and ultimately `draw()` again;  however, this call\n     * to `draw()` will be for the same viewport and will not actually cause\n     * a render.\n     *\n     * @public\n     * @memberof RegularVirtualTableViewModel\n     * @param {DrawOptions} [options]\n     * @param {boolean} [options.invalid_viewport=true]\n     * @param {boolean} [options.preserve_width=false]\n     * @param {boolean} [options.reset_scroll_position=false]\n     * @param {boolean} [options.swap=false]\n     * @returns\n     */\n    @throttlePromise\n    async draw(options = {}) {\n        const __debug_start_time__ = DEBUG && performance.now();\n        const {invalid_viewport = true, preserve_width = false, reset_scroll_position = false, invalid_columns = false} = options;\n\n        if (reset_scroll_position) {\n            this.reset_scroll();\n        }\n\n        this._invalid_schema = invalid_columns || this._invalid_schema;\n        const {num_columns, num_rows} = await this._view_cache.view(0, 0, 0, 0);\n        this._container_size = {\n            width: this._virtual_mode === \"none\" || this._virtual_mode === \"vertical\" ? Infinity : this._table_clip.clientWidth,\n            height: this._virtual_mode === \"none\" || this._virtual_mode === \"horizontal\" ? Infinity : this._table_clip.clientHeight,\n        };\n\n        const viewport = this._calculate_viewport(num_rows, num_columns, reset_scroll_position, invalid_columns);\n        const {invalid_row, invalid_column} = this._validate_viewport(viewport);\n        this._update_virtual_panel_height(num_rows);\n\n        if (this._invalid_schema || invalid_row || invalid_column || invalid_viewport || invalid_column) {\n            this.dispatchEvent(\n                new CustomEvent(\"regular-table-before-update\", {\n                    bubbles: true,\n                    detail: this,\n                })\n            );\n\n            let last_cells = [];\n            for await (last_cells of this.table_model.draw(this._container_size, this._view_cache, this._selected_id, preserve_width, viewport, num_columns)) {\n                this._is_styling = true;\n                const callbacks = this._style_callbacks;\n                for (const callback of callbacks) {\n                    await callback({detail: this});\n                }\n\n                this._is_styling = false;\n                if (!this._invalidated && last_cells !== undefined) {\n                    break;\n                }\n\n                this._invalidated = false;\n            }\n\n            this.table_model.autosize_cells(last_cells);\n            this.table_model.header.reset_header_cache();\n            if (!preserve_width) {\n                this._update_virtual_panel_width(this._invalid_schema || invalid_column || invalid_viewport, num_columns);\n            }\n            this._invalid_schema = false;\n        }\n\n        if (DEBUG) {\n            log_perf(performance.now() - __debug_start_time__);\n        }\n    }\n}\n\n/**\n * Options for the draw method.\n *\n * @typedef DrawOptions\n * @type {object}\n * @property {boolean} [invalid_viewport]\n * @property {boolean} [preserve_width]\n * @property {boolean} [reset_scroll_position]\n * @property {boolean} [swap]\n */\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\nimport {METADATA_MAP} from \"./constants\";\nimport {RegularVirtualTableViewModel} from \"./scroll_panel\";\nimport {throttlePromise} from \"./utils\";\n\n/**\n *\n *\n * @class RegularViewEventModel\n * @extends {RegularVirtualTableViewModel}\n */\nexport class RegularViewEventModel extends RegularVirtualTableViewModel {\n    register_listeners() {\n        this.addEventListener(\"mousedown\", this._on_click.bind(this));\n        this.addEventListener(\"dblclick\", this._on_dblclick.bind(this));\n        this.addEventListener(\"scroll\", this._on_scroll.bind(this), {\n            passive: false,\n        });\n        this._register_glitch_scroll_listeners();\n    }\n\n    /**\n     *\n     * @internal\n     * @private\n     * @memberof RegularViewEventModel\n     * @returns\n     */\n    async _on_scroll(event) {\n        event.stopPropagation();\n        event.returnValue = false;\n        await this.draw({invalid_viewport: false});\n        this.dispatchEvent(new CustomEvent(\"regular-table-scroll\"));\n    }\n\n    /**\n     * Modern and mobile browsers implement complex scroll behavior to\n     * implement fancy touch and intertia effects;  these must be intercepted\n     * and disabled to achieve clean virtual scrolling in the presence of a\n     * `fixed` element.\n     *\n     * @internal\n     * @private\n     * @memberof RegularViewEventModel\n     */\n    _register_glitch_scroll_listeners() {\n        this.addEventListener(\"mousewheel\", this._on_mousewheel.bind(this), {\n            passive: false,\n        });\n        this.addEventListener(\"touchstart\", this._on_touchstart.bind(this), {\n            passive: false,\n        });\n        this.addEventListener(\"touchmove\", this._on_touchmove.bind(this), {\n            passive: false,\n        });\n    }\n\n    /**\n     * Mousewheel must precalculate in addition to `_on_scroll` to prevent\n     * visual artifacts due to scrolling \"inertia\" on modern browsers.\n     *\n     * @internal\n     * @private\n     * @memberof RegularViewEventModel\n     * @param {*} event\n     */\n    _on_mousewheel(event) {\n        if (!window.safari) {\n            // **** Apple\n            return;\n        }\n\n        const {clientWidth, clientHeight, scrollTop, scrollLeft, scrollHeight} = this;\n        if ((event.deltaY > 0 && scrollTop + clientHeight >= scrollHeight) || (event.deltaY < 0 && scrollTop <= 0)) {\n            event.preventDefault();\n            event.returnValue = false;\n            const total_scroll_height = Math.max(1, this._virtual_panel.offsetHeight - clientHeight);\n            const total_scroll_width = Math.max(1, this._virtual_panel.offsetWidth - clientWidth);\n            this.scrollTop = Math.min(total_scroll_height, scrollTop + event.deltaY);\n            this.scrollLeft = Math.min(total_scroll_width, scrollLeft + event.deltaX);\n            this._on_scroll(event);\n        }\n    }\n\n    /**\n     * Touchmove must precalculate in addition to `_on_scroll` to prevent\n     * visual artifacts due to scrolling \"inertia\" on mobile browsers.  This has\n     * the unfortunate side-effect of disabling scroll intertia, but the\n     * alternative is a dodgy, glitchy mess.\n     *\n     * @internal\n     * @private\n     * @memberof RegularViewEventModel\n     * @param {*} event\n     * @returns\n     */\n    _on_touchmove(event) {\n        event.preventDefault();\n        event.returnValue = false;\n        const {clientWidth, clientHeight, scrollTop, scrollLeft} = this;\n        const total_scroll_height = Math.max(1, this._virtual_panel.offsetHeight - clientHeight);\n        const total_scroll_width = Math.max(1, this._virtual_panel.offsetWidth - clientWidth);\n        this.scrollTop = Math.min(total_scroll_height, scrollTop + (this._memo_touch_startY - event.touches[0].screenY));\n        this.scrollLeft = Math.min(total_scroll_width, scrollLeft + (this._memo_touch_startX - event.touches[0].screenX));\n        this._on_scroll(event);\n    }\n\n    /**\n     * Memoize `touchstart` positions to calculate deltas, since these are not\n     * generated on `touchmove` events.\n     *\n     * @internal\n     * @private\n     * @memberof RegularViewEventModel\n     * @param {*} event\n     */\n    _on_touchstart(event) {\n        this._memo_touch_startY = event.touches[0].screenY;\n        this._memo_touch_startX = event.touches[0].screenX;\n    }\n\n    /**\n     * Handles double-click header width override reset.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} event\n     * @returns\n     */\n    async _on_dblclick(event) {\n        let element = event.target;\n        while (element.tagName !== \"TD\" && element.tagName !== \"TH\") {\n            element = element.parentElement;\n            if (!this.contains(element)) {\n                return;\n            }\n        }\n\n        const is_resize = event.target.classList.contains(\"rt-column-resize\");\n        const metadata = METADATA_MAP.get(element);\n        if (is_resize) {\n            event.stopImmediatePropagation();\n            // await new Promise(queueMicrotask);\n            element.style.minWidth = \"\";\n            element.style.maxWidth = \"\";\n            if (event.shiftKey) {\n                this._column_sizes.override = [];\n                this._column_sizes.auto = [];\n                this._column_sizes.indices = [];\n            } else {\n                delete this._column_sizes.override[metadata.size_key];\n                delete this._column_sizes.auto[metadata.size_key];\n                delete this._column_sizes.indices[metadata.size_key];\n            }\n\n            for (const row of event.shiftKey ? [this.table_model.header.cells[this.table_model.header.cells.length - 1], ...this.table_model.body.cells] : this.table_model.body.cells) {\n                for (const td of event.shiftKey ? row : [row[metadata._virtual_x]]) {\n                    if (!td) {\n                        continue;\n                    }\n\n                    td.style.minWidth = \"\";\n                    td.style.maxWidth = \"\";\n                    td.classList.remove(\"rt-cell-clip\");\n                }\n            }\n\n            await this.draw();\n        }\n    }\n\n    /**\n     * Dispatches all click events to other handlers, depending on\n     * `event.target`.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} event\n     * @returns\n     */\n    async _on_click(event) {\n        if (event.button !== 0) {\n            return;\n        }\n\n        let element = event.target;\n        while (element.tagName !== \"TD\" && element.tagName !== \"TH\") {\n            element = element.parentElement;\n            if (!this.contains(element)) {\n                return;\n            }\n        }\n\n        const is_resize = event.target.classList.contains(\"rt-column-resize\");\n        const metadata = METADATA_MAP.get(element);\n        if (is_resize) {\n            this._on_resize_column(event, element, metadata);\n            event.stopImmediatePropagation();\n        }\n    }\n\n    /**\n     * Regular event for column resize.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} event\n     * @param {*} element\n     * @param {*} metadata\n     */\n    _on_resize_column(event, element, metadata) {\n        const {_virtual_x, size_key} = metadata;\n        const start = event.pageX;\n        const header_x = _virtual_x + element.colSpan - 1;\n        const header_element = this.table_model.header.get_column_header(header_x);\n        const width = this._column_sizes.indices[size_key];\n        const move = (event) => this._on_resize_column_move(event, header_element, start, width, size_key, header_x);\n        const up = () => {\n            document.removeEventListener(\"mousemove\", move);\n            document.removeEventListener(\"mouseup\", up);\n            const override_width = this._column_sizes.override[size_key];\n            const should_redraw = this._column_sizes.indices[size_key] !== override_width;\n            this._column_sizes.indices[size_key] = override_width;\n            if (should_redraw) {\n                this.draw();\n            }\n        };\n\n        document.addEventListener(\"mousemove\", move);\n        document.addEventListener(\"mouseup\", up);\n    }\n\n    /**\n     * Regular event for mouse movement when resizing a column.\n     *\n     * @internal\n     * @private\n     * @memberof RegularVirtualTableViewModel\n     * @param {*} event\n     * @param {*} th\n     * @param {*} start\n     * @param {*} width\n     * @param {*} metadata\n     */\n    @throttlePromise\n    async _on_resize_column_move(event, th, start, width, size_key, virtual_x) {\n        await new Promise(setTimeout);\n        const diff = event.pageX - start;\n        const override_width = Math.max(1, width + diff);\n        this._column_sizes.override[size_key] = override_width;\n\n        // If the column is smaller, new columns may need to be fetched, so\n        // redraw, else just update the DOM widths as if redrawn.\n        if (diff < 0) {\n            await this.draw({preserve_width: true});\n        } else {\n            th.style.minWidth = override_width + \"px\";\n            th.style.maxWidth = override_width + \"px\";\n            const auto_width = this._column_sizes.auto[size_key];\n            for (const row of this.table_model.body.cells) {\n                const td = row[virtual_x];\n                if (td) {\n                    td.style.maxWidth = td.style.minWidth = override_width + \"px\";\n                    td.classList.toggle(\"rt-cell-clip\", auto_width > override_width);\n                }\n            }\n        }\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2020, the Regular Table Authors.\n *\n * This file is part of the Regular Table library, distributed under the terms\n * of the Apache License 2.0.  The full license can be found in the LICENSE\n * file.\n *\n */\n\nimport {METADATA_MAP} from \"./constants\";\nimport {RegularTableViewModel} from \"./table\";\nimport {RegularViewEventModel} from \"./events\";\nimport {get_draw_fps} from \"./utils\";\n\nconst VIRTUAL_MODES = [\"both\", \"horizontal\", \"vertical\", \"none\"];\n\n/**\n * The `<regular-table>` custom element.\n *\n * This module has no exports, but importing it has a side effect: the\n * `RegularTableElement` class is registered as a custom element, after which\n * it can be used as a standard DOM element.\n *\n * The documentation in this module defines the instance structure of a\n * `<regular-table>` DOM object instantiated typically, through HTML or any\n * relevent DOM method e.g. `document.createElement(\"perspective-viewer\")` or\n * `document.getElementsByTagName(\"perspective-viewer\")`.\n *\n * @public\n * @extends HTMLElement\n */\nclass RegularTableElement extends RegularViewEventModel {\n    /**\n     * For internal use by the Custom Elements API: \"Invoked each time the\n     * custom element is appended into a document-connected element\".\n     * Ref: https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#Using_the_lifecycle_callbacks\n     *\n     * @internal\n     * @private\n     * @memberof RegularTableElement\n     */\n    connectedCallback() {\n        if (!this._initialized) {\n            this.create_shadow_dom();\n            this.register_listeners();\n            this.setAttribute(\"tabindex\", \"0\");\n            this._column_sizes = {auto: {}, override: {}, indices: []};\n            this._style_callbacks = [];\n            this.table_model = new RegularTableViewModel(this._table_clip, this._column_sizes, this);\n            this._initialized = true;\n        }\n    }\n\n    /**\n     * Reset the viewport of this regular table.\n     *\n     * @internal\n     * @private\n     * @memberof RegularTableElement\n     */\n    _reset_viewport() {\n        this._start_row = undefined;\n        this._end_row = undefined;\n        this._start_col = undefined;\n        this._end_col = undefined;\n    }\n\n    /**\n     * Reset the scroll position of this regular table back to the origin.\n     *\n     * @internal\n     * @private\n     * @memberof RegularTableElement\n     */\n    _reset_scroll() {\n        this._column_sizes.indices = [];\n        this.scrollTop = 0;\n        this.scrollLeft = 0;\n        this._reset_viewport();\n    }\n\n    /**\n     * Reset column autosizing, such that column sizes will be recalculated\n     * on the next draw() call.\n     *\n     * @internal\n     * @private\n     * @memberof RegularTableElement\n     */\n    _resetAutoSize() {\n        this._column_sizes.auto = {};\n        this._column_sizes.override = {};\n        this._column_sizes.indices = [];\n\n        for (let i = 0; i < this.table_model.header.num_columns(); i++) {\n            const th = this.table_model.header.get_column_header(i);\n            th.style.minWidth = \"\";\n            th.style.maxWidth = \"\";\n        }\n    }\n\n    /**\n     * Clears the current renderer `<table>`.\n     *\n     * @public\n     * @memberof RegularTableElement\n     */\n    clear() {\n        this.table_model = new RegularTableViewModel(this._table_clip, this._column_sizes, this);\n    }\n\n    /**\n     * Adds a style listener callback. The style listeners are called\n     * whenever the <table> is re-rendered, such as through API invocations\n     * of draw() and user-initiated events such as scrolling. Within this\n     * optionally async callback, you can select <td>, <th>, etc. elements\n     * via regular DOM API methods like querySelectorAll().\n     *\n     * @public\n     * @memberof RegularTableElement\n     * @param {function({detail: RegularTableElement}): void} styleListener - A\n     * (possibly async) function that styles the inner <table>.\n     * @returns {function(): void} A function to remove this style listener.\n     * @example\n     * const unsubscribe = table.addStyleListener(() => {\n     *     for (const td of table.querySelectorAll(\"td\")) {\n     *         td.setAttribute(\"contenteditable\", true);\n     *     }\n     * });\n     *\n     * setTimeout(() => {\n     *     unsubscribe();\n     * }, 1000);\n     */\n    addStyleListener(styleListener) {\n        this._style_callbacks = this._style_callbacks.concat(styleListener);\n\n        let isSubscribed = true;\n\n        const unsubscribe = () => {\n            if (!isSubscribed) {\n                return;\n            }\n            isSubscribed = false;\n\n            const callbacks = (this._style_callbacks = this._style_callbacks.slice());\n            const index = callbacks.indexOf(styleListener);\n            callbacks.splice(index, 1);\n        };\n        return unsubscribe;\n    }\n\n    /**\n     * When called within the execution scope of a function registered to this\n     * `<regular-table>` as a `StyleListener`, invalidate this draw's\n     * dimensions and attempt to draw more columns.  Useful if your\n     * `StyleListener` changes a cells dimensions, otherwise `<regular-table>`\n     * may not draw enough columns to fill the screen.\n     */\n    invalidate() {\n        if (!this._is_styling) {\n            throw new Error(\"Cannot call `invalidate()` outside of a `StyleListener`\");\n        }\n        this._invalidated = true;\n    }\n\n    /**\n     * Returns the `MetaData` object associated with a `<td>` or `<th>`.  When\n     * your `StyleListener` is invoked, use this method to look up additional\n     * `MetaData` about any `HTMLTableCellElement` in the rendered `<table>`.\n     *\n     * @public\n     * @memberof RegularTableElement\n     * @param {HTMLTableCellElement|Partial<MetaData>} element - The child element\n     * of this `<regular-table>` for which to look up metadata, or a\n     * coordinates-like object to refer to metadata by logical position.\n     * @returns {MetaData} The metadata associated with the element.\n     * @example\n     * const elems = document.querySelector(\"td:last-child td:last_child\");\n     * const metadata = table.getMeta(elems);\n     * console.log(`Viewport corner is ${metadata.x}, ${metadata.y}`);\n     * @example\n     * const header = table.getMeta({row_header_x: 1, y: 3}).row_header;\n     */\n    getMeta(element) {\n        if (typeof element === \"undefined\") {\n            return;\n        } else if (element instanceof HTMLElement) {\n            return METADATA_MAP.get(element);\n        } else if (element.row_header_x >= 0) {\n            if (element.row_header_x < this._view_cache.config.row_pivots.length) {\n                const td = this.table_model.body._fetch_cell(element.y, element.row_header_x);\n                return this.getMeta(td);\n            }\n        } else if (element.column_header_y >= 0) {\n            if (element.column_header_y < this._view_cache.config.column_pivots.length) {\n                const td = this.table_model.body._fetch_cell(element.column_header_y, element.y);\n                return this.getMeta(td);\n            }\n        } else {\n            return this.getMeta(this.table_model.body._fetch_cell(element.dy, element.dx + this.table_model._row_headers_length));\n        }\n    }\n\n    /**\n     * Get performance statistics about this `<regular-table>`.  Calling this\n     * method resets the internal state, which makes it convenient to measure\n     * performance at regular intervals (see example).\n     *\n     * @public\n     * @memberof RegularTableElement\n     * @returns {Performance} Performance data aggregated since the last\n     * call to `getDrawFPS()`.\n     * @example\n     * const table = document.getElementById(\"my_regular_table\");\n     * setInterval(() => {\n     *     const {real_fps} = table.getDrawFPS();\n     *     console.log(`Measured ${fps} fps`)\n     * });\n     */\n    getDrawFPS() {\n        return get_draw_fps();\n    }\n\n    /**\n     * Call this method to set the `scrollLeft` and `scrollTop` for this\n     * `<regular-table>` by calculating the position of this `scrollLeft`\n     * and `scrollTop` relative to the underlying widths of its columns\n     * and heights of its rows.\n     *\n     * @public\n     * @memberof RegularTableElement\n     * @param {number} x - The left most `x` index column to scroll into view.\n     * @param {number} y - The top most `y` index row to scroll into view.\n     * @param {number} ncols - Total number of columns in the data model.\n     * @param {number} nrows - Total number of rows in the data model.\n     * @example\n     * table.scrollToCell(1, 3, 10, 30);\n     */\n    async scrollToCell(x, y, ncols, nrows) {\n        const row_height = this._virtual_panel.offsetHeight / nrows;\n        this.scrollTop = row_height * y;\n        this.scrollLeft = (x / (this._max_scroll_column(ncols) || ncols)) * (this.scrollWidth - this.clientWidth);\n        await this.draw.flush();\n    }\n\n    /**\n     * Call this method to set `DataListener` for this `<regular-table>`,\n     * which will be called whenever a new data slice is needed to render.\n     * Calls to `draw()` will fail if no `DataListener` has been set\n     *\n     * @public\n     * @memberof RegularTableElement\n     * @param {DataListener} dataListener\n     * `dataListener` is called by to request a rectangular section of data\n     * for a virtual viewport, (x0, y0, x1, y1), and returns a `DataReponse`\n     * object.\n     * @param {Options} options.virtual_mode\n     * The `virtual_mode` options flag may be one of \"both\", \"horizontal\",\n     * \"vertical\", or \"none\" indicating which dimensions of the table should be\n     * virtualized (vs. rendering completely).\n     * @example\n     * table.setDataListener((x0, y0, x1, y1) => {\n     *     return {\n     *         num_rows: num_rows = DATA[0].length,\n     *         num_columns: DATA.length,\n     *         data: DATA.slice(x0, x1).map(col => col.slice(y0, y1))\n     *     };\n     * })\n     */\n    setDataListener(dataListener, {virtual_mode = \"both\"} = {}) {\n        let schema = {};\n        let config = {\n            row_pivots: [],\n            column_pivots: [],\n        };\n\n        console.assert(VIRTUAL_MODES.indexOf(virtual_mode) > -1, `Unknown virtual_mode ${virtual_mode};  valid options are \"both\" (default), \"horizontal\", \"vertical\" or \"none\"`);\n        this._virtual_mode = virtual_mode;\n        this._invalid_schema = true;\n        this._view_cache = {view: dataListener, config, schema};\n        this._setup_virtual_scroll();\n    }\n}\n\nif (document.createElement(\"regular-table\").constructor === HTMLElement) {\n    window.customElements.define(\"regular-table\", RegularTableElement);\n}\n\n/**\n * An object with performance statistics about calls to\n * `draw()` from some time interval (captured in milliseconds by the\n * `elapsed` proprty).\n *\n * @typedef Performance\n * @type {object}\n * @property {number} avg - Avergage milliseconds per call.\n * @property {number} real_fps - `num_frames` / `elapsed`\n * @property {number} virtual_fps - `elapsed` / `avg`\n * @property {number} num_frames - Number of frames rendered.\n * @property {number} elapsed - Number of milliseconds since last call\n * to `getDrawFPS()`.\n */\n\n/**\n * An object describing virtual rendering metadata about an\n * `HTMLTableCellElement`, use this object to map rendered `<th>` or `<td>`\n * elements back to your `data`, `row_headers` or `column_headers` within\n * listener functions for `addStyleListener()` and `addEventListener()`.\n * @example\n *\n * MetaData                     (x = 0, column_header_y = 0))\n *                              *-------------------------------------+\n *                              |                                     |\n *                              |                                     |\n *                              +-------------------------------------+\n * (row_header_x = 0, y = 0)    (x = 0, y = 0)\n * *------------------------+   *-------------------------------------+\n * |                        |   |                                     |\n * |                        |   |      (x0, y0)                       |\n * |                        |   |      *---------------*              |\n * |                        |   |      |               |              |\n * |                        |   |      |     * (x, y)  |              |\n * |                        |   |      |               |              |\n * |                        |   |      *---------------* (x1, y1)     |\n * |                        |   |                                     |\n * +------------------------+   +-------------------------------------+\n *\n * @typedef MetaData\n * @type {object}\n * @property {number} [x] - The `x` index in your virtual data model.\n * property is only generated for `<td>`, `<th>` from `row_headers`.\n * @property {number} [y] - The `y` index in your virtual data model.\n * property is only generated for `<td>`, `<th>` from `row_headers`.\n * @property {number} [x0] - The `x` index of the viewport origin in\n * your data model, e.g. what was passed to `x0` when your\n * `dataListener` was invoked.\n * @property {number} [y0] - The `y` index of the viewport origin in\n * your data model, e.g. what was passed to `y0` when your\n * `dataListener` was invoked.\n * @property {number} [x1] - The `x` index of the viewport corner in\n * your data model, e.g. what was passed to `x1` when your\n * `dataListener` was invoked.\n * @property {number} [y1] - The `y` index of the viewport corner in\n * your data model, e.g. what was passed to `y1` when your\n * `dataListener` was invoked.\n * @property {number} [dx] - The `x` index in `DataResponse.data`, this\n * property is only generated for `<td>`, and `<th>` from `column_headers`.\n * @property {number} [dy] - The `y` index in `DataResponse.data`, this\n * property is only generated for `<td>`, `<th>` from `row_headers`.\n * @property {number} [column_header_y] - The `y` index in\n * `DataResponse.column_headers[x]`, this property is only generated for `<th>`\n * from `column_headers`.\n * @property {number} [row_header_x] - The `x` index in\n * `DataResponse.row_headers[y]`, this property is only generated for `<th>`\n * from `row_headers`.\n * @property {number} size_key - The unique index of this column in a full\n * `<table>`, which is `x` + (Total Row Header Columns).\n * @property {Array<object>} [row_header] - The `Array` for this `y` in\n * `DataResponse.row_headers`, if it was provided.\n * @property {Array<object>} [column_header] - The `Array` for this `x` in\n * `DataResponse.column_headers`, if it was provided.\n * @property {object} [value] - The value dispalyed in the cell or header.\n */\n\n/**\n * The `DataResponse` object describes a rectangular region of a virtual\n * data set, and some associated metadata.  `<regular-table>` will use this\n * object to render the `<table>`, though it may make multiple requests for\n * different regions to achieve a compelte render as it must estimate\n * certain dimensions.  You must construct a `DataResponse` object to\n * implement a `DataListener`.\n *\n * @typedef DataResponse\n * @type {object}\n * @property {Array<Array<object>>} [column_headers] - A two dimensional\n * `Array` of column group headers, in specificity order.  No `<thead>`\n * will be generated if this property is not provided.\n * @property {Array<Array<object>>} [row_headers] - A two dimensional\n * `Array` of row group headers, in specificity order.  No `<th>`\n * elements within `<tbody>` will be generated if this property is not\n * provided.\n * @property {Array<Array<object>>} data - A two dimensional `Array`\n * representing a rectangular section of the underlying data set from\n * (x0, y0) to (x1, y1), arranged in columnar fashion such that\n * `data[x][y]` returns the `y`th row of the `x`th column of the slice.\n * @property {number} num_rows - Total number of rows in the underlying\n * data set.\n * @property {number} num_columns - Total number of columns in the\n * underlying data set.\n * @example\n * {\n *     \"num_rows\": 26,\n *     \"num_columns\": 3,\n *     \"data\": [\n *         [0, 1],\n *         [\"A\", \"B\"]\n *     ],\n *     \"row_headers\": [\n *         [\"Rowgroup 1\", \"Row 1\"],\n *         [\"Rowgroup 1\", \"Row 2\"]\n *     ],\n *     \"column_headers\": [\n *         [\"Colgroup 1\", \"Column 1\"],\n *         [\"Colgroup 1\", \"Column 2\"]\n *     ]\n * }\n */\n\n/**\n * The `DataListener` is similar to a normal event listener function.\n * Unlike a normal event listener, it takes regular arguments (not an\n * `Event`); and returns a `Promise` for a `DataResponse` object for this\n * region (as opposed to returning `void` as a standard event listener).\n *\n * @callback DataListener\n * @param {number} x0 - The origin `x` index (column).\n * @param {number} y0 - The origin `y` index (row).\n * @param {number} x1 - The corner `x` index (column).\n * @param {number} y1 - The corner `y` index (row).\n * @returns {Promise<DataResponse>} The resulting `DataResponse`.  Make sure\n * to `resolve` or `reject` the `Promise`, or your `<regular-table>` will\n * never render!\n */\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\n/**\n * Instantiate a Template DOM object from an HTML text string.\n *\n * Params\n * ------\n * template : An HTML string representing a template.\n *\n * Returns\n * -------\n * A Template DOM object.\n */\n\nexport function importTemplate(template) {\n    const div = document.createElement(\"div\");\n    div.innerHTML = template;\n    return Array.prototype.slice.call(div.children)[0];\n}\n\nfunction setTemplateContent(template) {\n    // return early in browsers that have template tag support\n    if (template.content) {\n        return;\n    }\n    template.content = document.createDocumentFragment();\n    let child;\n    while ((child = template.firstChild)) {\n        Node.prototype.appendChild.call(template.content, child);\n    }\n}\n\n/**\n * A simple tool for creating Web Components v0.\n *\n * Params\n * ------\n * template : An HTML string representing a template.  Should have an 'id'\n *     attribute which will become the new Web Component's tag name.\n * proto : The new Web Component's prototype object, as per spec.\n */\nexport function registerElement(templateString, styleString, proto) {\n    const template = importTemplate(templateString);\n    setTemplateContent(template);\n    if (styleString) {\n        template.innerHTML = `<style>${styleString.toString()}</style>` + template.innerHTML;\n    }\n    template.innerHTML = `<style id=\"psp_styles\" scope=\"${template.getAttribute(\"id\")}\">test{}</style>` + template.innerHTML;\n\n    const _perspective_element = class extends proto {\n        attributeChangedCallback(name, old, value) {\n            if (value === null) {\n                value = \"null\";\n            }\n            if (name[0] !== \"_\" && old != value && !!Object.getOwnPropertyDescriptor(proto.prototype, name).set) {\n                this[name] = value;\n            }\n        }\n\n        connectedCallback() {\n            if (this._initialized) {\n                return;\n            }\n            this._initializing = true;\n            var node = document.importNode(template.content, true);\n            this.attachShadow({mode: \"open\"});\n            this.shadowRoot.appendChild(node);\n\n            if (super.connectedCallback) {\n                super.connectedCallback();\n            }\n\n            // Call all attributes bound to setters on the proto\n            for (let key of Object.getOwnPropertyNames(proto.prototype)) {\n                if (key !== \"connectedCallback\") {\n                    if (this.hasAttribute(key) && key[0] !== \"_\" && !!Object.getOwnPropertyDescriptor(proto.prototype, key).set) {\n                        this[key] = this.getAttribute(key);\n                    }\n                }\n            }\n            this._initializing = false;\n            this._initialized = true;\n        }\n\n        static get observedAttributes() {\n            return Object.getOwnPropertyNames(proto.prototype);\n        }\n    };\n\n    for (let key of Object.getOwnPropertyNames(proto.prototype)) {\n        let descriptor = Object.getOwnPropertyDescriptor(proto.prototype, key);\n        if (descriptor && descriptor.set) {\n            let old = descriptor.set;\n            descriptor.set = function(val) {\n                if (!this.hasAttribute(key) || this.getAttribute(key) !== val) {\n                    this.setAttribute(key, val);\n                    return;\n                }\n                if (!this._initializing && !this._initialized) {\n                    return;\n                }\n                old.call(this, val);\n            };\n            Object.defineProperty(proto.prototype, key, descriptor);\n        }\n    }\n\n    let name = template.getAttribute(\"id\");\n    console.log(`Registered ${name}`);\n\n    window.customElements.define(name, _perspective_element);\n}\n\nexport function bindTemplate(template, ...styleStrings) {\n    const style = styleStrings.map(x => x.toString()).join(\"\\n\");\n    return function(cls) {\n        return registerElement(template, {toString: () => style}, cls);\n    };\n}\n\n/**\n * A decorator for declaring a setter property of an HTMLElement descendent\n * class as serialized JSON.  Handles converting these types before invoking\n * the underlying function/\n *\n * @param {object} _default the default value to supply the setter when\n * undefined, removed or invalid.\n */\nfunction _attribute(_default) {\n    return function(cls, name, desc) {\n        const old_set = desc.value;\n        desc.set = function(x) {\n            let attr = this.getAttribute(name);\n            try {\n                if (x === null || x === undefined || x === \"\") {\n                    x = _default();\n                }\n                if (typeof x !== \"string\") {\n                    x = JSON.stringify(x);\n                }\n                if (x !== attr) {\n                    attr = x;\n                }\n                attr = JSON.parse(attr);\n            } catch (e) {\n                console.warn(`Invalid value for attribute \"${name}\": ${x}`);\n                attr = _default();\n            }\n            old_set.call(this, attr);\n        };\n        desc.get = function() {\n            if (this.hasAttribute(name)) {\n                return JSON.parse(this.getAttribute(name));\n            } else {\n                return _default();\n            }\n        };\n        delete desc[\"value\"];\n        delete desc[\"writable\"];\n        return desc;\n    };\n}\n\n/**\n * Just like `setTimeout` except it returns a promise which resolves after the\n * callback has (also resolved).\n *\n * @param {func} cb\n * @param {*} timeout\n */\nexport async function setPromise(cb = async () => {}, timeout = 0) {\n    await new Promise(x => setTimeout(x, timeout));\n    return await cb();\n}\n\nexport const invertPromise = () => {\n    let _resolve;\n    const promise = new Promise(resolve => {\n        _resolve = resolve;\n    });\n\n    promise.resolve = _resolve;\n    return promise;\n};\n\nexport function throttlePromise(target, property, descriptor, clear = false) {\n    if (typeof target === \"boolean\") {\n        return function(target, property, descriptor) {\n            return throttlePromise(target, property, descriptor, true);\n        };\n    }\n\n    // Each call to `throttlePromise` has a unique `lock`\n    const lock = Symbol(\"private lock\");\n    const _super = descriptor.value;\n\n    async function throttleOnce(id) {\n        if (id !== this[lock].gen) {\n            // This invocation got de-duped with a later one, but it will\n            // wake up first, so if there is not a lock acquired here, push\n            // it to the back of the event queue.\n            if (!this[lock].lock) {\n                await new Promise(requestAnimationFrame);\n            }\n\n            // Now await the currently-processing invocation (which\n            // occurred after than this one) and return.\n            await this[lock].lock;\n            return true;\n        }\n    }\n\n    // Wrap the underlying function\n    descriptor.value = async function(...args) {\n        // Initialize the lock for this Object instance, if it has never been\n        // initialized.\n        this[lock] = this[lock] || {gen: 0};\n\n        // Assign this invocation a unique ID.\n        let id = ++this[lock].gen;\n\n        if (clear) {\n            await new Promise(requestAnimationFrame);\n        }\n\n        // If the `lock` property is defined, a previous invocation is still\n        // processing.\n        if (this[lock].lock) {\n            // `await` the previous call;  afterwards, the drawn state will be\n            // updated but we need to draw again to incorporate this\n            // invocation's state changes.\n            await this[lock].lock;\n\n            // We only want to execute the _last_ invocation, since each call\n            // precludes the previous ones if they are still queue-ed.\n            if (await throttleOnce.call(this, id)) {\n                return;\n            }\n        } else if (clear) {\n            // Even if the lock is clear, we need to debounce the queue-ed.\n            const debounced = await throttleOnce.call(this, id);\n            if (debounced) {\n                return;\n            }\n        }\n\n        // This invocation has made it to the render process, so \"acquire\" the\n        // lock.\n        this[lock].lock = invertPromise();\n\n        // Call the decorated function itself\n        let result;\n        try {\n            result = await _super.call(this, ...args);\n        } finally {\n            // Errors can leave promises which depend on this behavior\n            // dangling.\n            const l = this[lock].lock;\n            delete this[lock][\"lock\"];\n\n            // If this invocation is still the latest, clear the attribute\n            // state.\n            // TODO this is likely not he behavior we want for this event ..\n            if (id === this[lock].gen && clear) {\n                this.removeAttribute(\"updating\");\n                this.dispatchEvent(new Event(\"perspective-update-complete\"));\n            }\n\n            l.resolve();\n        }\n\n        return result;\n    };\n\n    // A function which clears the lock just like the main wrapper, but then\n    // does nothing.\n    descriptor.value.flush = async function(obj) {\n        if (obj[lock]?.lock) {\n            await obj[lock].lock;\n            await new Promise(requestAnimationFrame);\n            if (obj[lock]?.lock) {\n                await obj[lock].lock;\n            }\n        }\n    };\n\n    return descriptor;\n}\n\n/**\n * Swap 2 HTMLElements in a container.\n * @param {HTMLElement} container\n * @param {HTMLElement} elem1\n * @param {HTMLElement} elem2\n */\nexport function swap(container, ...elems) {\n    if (elems[0] === elems[1]) return;\n    if (elems.every(x => x.classList.contains(\"null-column\"))) return;\n    let [i, j] = elems.map(x => Array.prototype.slice.call(container.children).indexOf(x));\n    if (j < i) {\n        [i, j] = [j, i];\n        elems = elems.reverse();\n    }\n    container.insertBefore(elems[1], elems[0]);\n    if (j + 1 === container.children.length) {\n        container.appendChild(elems[0]);\n    } else {\n        container.insertBefore(elems[0], container.children[j + 1]);\n    }\n}\n\nexport const json_attribute = _attribute(() => ({}));\nexport const array_attribute = _attribute(() => []);\n\nexport const registerPlugin = (name, plugin) => {\n    if (global.registerPlugin) {\n        global.registerPlugin(name, plugin);\n    } else {\n        global.__perspective_plugins__ = global.__perspective_plugins__ || [];\n        global.__perspective_plugins__.push([name, plugin]);\n    }\n};\n\n/**\n * Given an expression, return its alias.\n *\n * @param {*} expression\n * @returns String\n */\nexport function getExpressionAlias(expression) {\n    const matches = expression.match(/\\/\\/(.+?)$/m);\n    let alias;\n\n    // Has an alias - use that to type check.\n    if (matches && matches.length == 2) {\n        alias = matches[1].trim();\n        return alias;\n    } else {\n        return expression;\n    }\n}\n\n/**\n * Adds an alias to the given expression and returns it.\n *\n * @param {*} expression\n * @returns String\n */\n// export function addExpressionAlias(expression) {\n//     let alias;\n//     expression.length > 20\n//         ? (alias =\n//               expression\n//                   .replace(\"\\n\", \" \")\n//                   .substr(0, 20)\n//                   .trim() + \"...\")\n//         : (alias = expression);\n//     return `//${alias}\\n${expression}`;\n// }\n\n/**\n * Given an alias and an array of string expressions, find the alias inside\n * the expressions array. This is important so we can map aliases back to\n * expressions inside _new_row.\n *\n * @param {String} alias\n * @param {Array<String>} expressions\n * @returns String\n */\nexport function findExpressionByAlias(alias, expressions) {\n    for (const expr of expressions) {\n        const expr_alias = getExpressionAlias(expr);\n        if (alias === expr_alias) {\n            return expr;\n        }\n    }\n}\n\n/**\n * Given an expression, strips the alias and returns the expression.\n *\n * @param {String} expression\n * @returns String\n */\nexport function getRawExpression(expression) {\n    return expression.replace(/\\/\\/(.+)\\n/, \"\");\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport chroma from \"chroma-js\";\n\nexport const PLUGIN_SYMBOL = Symbol(\"Plugin Symbol\");\n\nlet MENU = undefined;\n\nexport function activate_plugin_menu(regularTable, target, column_max) {\n    MENU = MENU || document.createElement(\"perspective-column-style\");\n    const target_meta = regularTable.getMeta(target);\n    const column_name = target_meta.column_header[target_meta.column_header.length - 1];\n    const column_type = this._schema[column_name];\n    const default_config = {\n        gradient: column_max,\n        pos_color: this._pos_color[0],\n        neg_color: this._neg_color[0]\n    };\n\n    if (column_type === \"float\") {\n        default_config.fixed = 2;\n    } else if (column_type === \"integer\") {\n        default_config.fixed = 0;\n    } else {\n        this._open_column_styles_menu.pop();\n        regularTable.draw();\n        return;\n    }\n\n    const scroll_handler = () => MENU.blur();\n    const update_handler = event => {\n        const config = event.detail;\n        if (config.pos_color) {\n            config.pos_color = [config.pos_color, ...chroma(config.pos_color).rgb()];\n            config.neg_color = [config.neg_color, ...chroma(config.neg_color).rgb()];\n        }\n\n        regularTable[PLUGIN_SYMBOL] = regularTable[PLUGIN_SYMBOL] || {};\n        regularTable[PLUGIN_SYMBOL][column_name] = config;\n        regularTable.draw({preserve_width: true});\n        regularTable.parentElement.dispatchEvent(new Event(\"perspective-config-update\"));\n    };\n\n    const blur_handler = async () => {\n        regularTable.removeEventListener(\"regular-table-scroll\", scroll_handler);\n        MENU.removeEventListener(\"perspective-column-style-change\", update_handler);\n        MENU.removeEventListener(\"blur\", blur_handler);\n        this._open_column_styles_menu.pop();\n        await regularTable.draw();\n        regularTable.parentElement.dispatchEvent(new Event(\"perspective-config-update\"));\n    };\n\n    MENU.addEventListener(\"perspective-column-style-change\", update_handler);\n    MENU.addEventListener(\"blur\", blur_handler);\n    regularTable.addEventListener(\"regular-table-scroll\", scroll_handler);\n\n    // Get the current column style config\n    const pset = regularTable[PLUGIN_SYMBOL] || {};\n    const config = Object.assign({}, (pset[column_name] = pset[column_name] || {}));\n    if (config.pos_color) {\n        config.pos_color = config.pos_color[0];\n        config.neg_color = config.neg_color[0];\n    }\n\n    // open the menu\n    MENU.open(target, config, default_config);\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport const PLUGIN_SYMBOL = Symbol(\"Plugin Symbol\");\n\n// AFAICT `chroma-js` has no alpha-aware blending? So we need a function to get\n// the color of a heatmap cell over the background.\nexport function rgbaToRgb([r, g, b, a], source = [255, 255, 255]) {\n    function f(i, c) {\n        return ((1 - a) * (source[i] / 255) + a * (c / 255)) * 255;\n    }\n\n    return [f(0, r), f(1, g), f(2, b)];\n}\n\n// Chroma does this but why bother?\nexport function infer_foreground_from_background([r, g, b]) {\n    // TODO Implement dark/light themes.\n    return Math.sqrt(r * r * 0.299 + g * g * 0.587 + b * b * 0.114) > 130 ? \"#161616\" : \"#ffffff\";\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {get_type_config} from \"@finos/perspective/dist/esm/config/index.js\";\nimport {activate_plugin_menu, PLUGIN_SYMBOL} from \"./plugin_menu.js\";\nimport {rgbaToRgb, infer_foreground_from_background} from \"./color_utils.js\";\n\nimport chroma from \"chroma-js\";\n\nfunction styleListener(regularTable) {\n    const header_depth = regularTable._view_cache.config.row_pivots.length - 1;\n    let group_headers = Array.from(regularTable.children[0].children[0].children);\n    let [col_headers] = group_headers.splice(group_headers.length - 1, 1);\n    const plugins = regularTable[PLUGIN_SYMBOL] || {};\n\n    for (const td of col_headers?.children) {\n        const metadata = regularTable.getMeta(td);\n        const column_name = metadata.column_header?.[metadata.column_header?.length - 1];\n        const sort = this._config.sort.find(x => x[0] === column_name);\n        let needs_border = metadata.row_header_x === header_depth;\n        const is_corner = typeof metadata.x === \"undefined\";\n        needs_border = needs_border || (metadata.x + 1) % this._config.columns.length === 0;\n        td.classList.toggle(\"psp-header-border\", needs_border);\n        td.classList.toggle(\"psp-header-group\", false);\n        td.classList.toggle(\"psp-header-leaf\", true);\n        td.classList.toggle(\"psp-is-top\", false);\n        td.classList.toggle(\"psp-header-corner\", is_corner);\n        td.classList.toggle(\"psp-header-sort-asc\", !!sort && sort[1] === \"asc\");\n        td.classList.toggle(\"psp-header-sort-desc\", !!sort && sort[1] === \"desc\");\n        td.classList.toggle(\"psp-header-sort-col-asc\", !!sort && sort[1] === \"col asc\");\n        td.classList.toggle(\"psp-header-sort-col-desc\", !!sort && sort[1] === \"col desc\");\n\n        let type = get_psp_type.call(this, metadata);\n        const is_numeric = type === \"integer\" || type === \"float\";\n        const float_val = is_numeric && metadata.user;\n        td.classList.toggle(\"psp-align-right\", is_numeric);\n        td.classList.toggle(\"psp-align-left\", !is_numeric);\n        td.classList.toggle(\"psp-positive\", float_val > 0);\n        td.classList.toggle(\"psp-negative\", float_val < 0);\n        td.classList.toggle(\"psp-menu-open\", this._open_column_styles_menu[0] === metadata._virtual_x);\n        td.classList.toggle(\"psp-menu-enabled\", is_numeric && !is_corner);\n\n        // Color plugin\n        // const plugin = plugins[column_name];\n        // if (plugin?.pos_color !== undefined) {\n        //     const [, r, g, b] = plugin.pos_color;\n        //     const foreground = infer_foreground_from_background([r, g, b]);\n        //     td.style.backgroundColor = plugin.pos_color[0];\n        //     td.style.color = foreground;\n        // } else {\n        //     td.style.backgroundColor = \"\";\n        //     td.style.color = \"\";\n        // }\n    }\n\n    const m = [];\n    let marked = new Set();\n    const table = regularTable.children[0];\n    for (let y = 0; y < group_headers.length; y++) {\n        let row = table.rows[y];\n        const tops = new Set();\n        for (let x = 0; x < row.cells.length; x++) {\n            const td = row.cells[x];\n            td.style.backgroundColor = \"\";\n            const metadata = regularTable.getMeta(td);\n            let needs_border = metadata.row_header_x === header_depth || metadata.x >= 0;\n            td.classList.toggle(\"psp-align-right\", false);\n            td.classList.toggle(\"psp-align-left\", false);\n            td.classList.toggle(\"psp-header-group\", true);\n            td.classList.toggle(\"psp-header-leaf\", false);\n            td.classList.toggle(\"psp-header-border\", needs_border);\n            td.classList.toggle(\"psp-header-group-corner\", typeof metadata.x === \"undefined\");\n            let cell = row.cells[x],\n                xx = x,\n                tx,\n                ty;\n\n            for (; m[y] && m[y][xx]; ++xx);\n            tops.add(xx);\n            for (tx = xx; tx < xx + cell.colSpan; ++tx) {\n                for (ty = y; ty < y + cell.rowSpan; ++ty) {\n                    if (!m[ty]) m[ty] = [];\n                    m[ty][tx] = true;\n                }\n            }\n\n            cell.classList.toggle(\"psp-is-top\", y === 0 || !marked.has(tx));\n        }\n        marked = tops;\n    }\n\n    // this._cached_range = this._cached_range || {};\n    for (const tr of regularTable.children[0].children[1].children) {\n        for (const td of tr.children) {\n            const metadata = regularTable.getMeta(td);\n            const column_name = metadata.column_header?.[metadata.column_header?.length - 1];\n            const plugin = plugins[column_name];\n\n            let type = get_psp_type.call(this, metadata);\n            const is_numeric = type === \"integer\" || type === \"float\";\n\n            if (is_numeric) {\n                const is_positive = metadata.user > 0;\n                const is_negative = metadata.user < 0;\n                const [hex, r, g, b] = (() => {\n                    if (plugin?.pos_color !== undefined) {\n                        return is_positive ? plugin.pos_color : is_negative ? plugin.neg_color : [\"\", 0, 0, 0];\n                    } else {\n                        return is_positive ? this._pos_color : is_negative ? this._neg_color : [\"\", 0, 0, 0];\n                    }\n                })();\n\n                if (plugin?.color_mode === \"background\") {\n                    const source = this._plugin_background;\n                    const foreground = infer_foreground_from_background(rgbaToRgb([r, g, b, 1], source));\n                    td.style.color = foreground;\n                    td.style.backgroundColor = hex;\n                } else if (plugin?.color_mode === \"gradient\") {\n                    const a = Math.max(0, Math.min(1, Math.abs(metadata.user / plugin.gradient)));\n                    const source = this._plugin_background;\n                    const foreground = infer_foreground_from_background(rgbaToRgb([r, g, b, a], source));\n                    td.style.color = foreground;\n                    td.style.backgroundColor = `rgba(${r},${g},${b},${a})`;\n                } else if (plugin?.color_mode === \"foreground\") {\n                    td.style.backgroundColor = \"\";\n                    td.style.color = hex;\n                } else {\n                    td.style.backgroundColor = \"\";\n                    td.style.color = \"\";\n                }\n            } else {\n                td.style.backgroundColor = \"\";\n                td.style.color = \"\";\n            }\n\n            const is_th = td.tagName === \"TH\";\n            if (is_th) {\n                const is_not_empty = !!metadata.value && metadata.value.toString().trim().length > 0;\n                const is_leaf = metadata.row_header_x >= this._config.row_pivots.length;\n                const next = regularTable.getMeta({dx: 0, dy: metadata.y - metadata.y0 + 1});\n                const is_collapse = next && next.row_header && typeof next.row_header[metadata.row_header_x + 1] !== \"undefined\";\n                td.classList.toggle(\"psp-tree-label\", is_not_empty && !is_leaf);\n                td.classList.toggle(\"psp-tree-label-expand\", is_not_empty && !is_leaf && !is_collapse);\n                td.classList.toggle(\"psp-tree-label-collapse\", is_not_empty && !is_leaf && is_collapse);\n                td.classList.toggle(\"psp-tree-leaf\", is_not_empty && is_leaf);\n            }\n\n            const float_val = is_numeric && metadata.user;\n            td.classList.toggle(\"psp-align-right\", !is_th && is_numeric);\n            td.classList.toggle(\"psp-align-left\", is_th || !is_numeric);\n            td.classList.toggle(\"psp-positive\", float_val > 0);\n            td.classList.toggle(\"psp-negative\", float_val < 0);\n        }\n    }\n}\n\nfunction get_psp_type(metadata) {\n    if (metadata.x >= 0) {\n        const column_path = this._column_paths[metadata.x];\n        const column_path_parts = column_path.split(\"|\");\n        return this._schema[column_path_parts[column_path_parts.length - 1]];\n    } else {\n        const column_path = this._config.row_pivots[metadata.row_header_x - 1];\n        return this._table_schema[column_path];\n    }\n}\n\nasync function sortHandler(regularTable, event, target) {\n    const meta = regularTable.getMeta(target);\n    const column_name = meta.column_header[meta.column_header.length - 1];\n    const sort_method = event.shiftKey ? append_sort : override_sort;\n    const sort = sort_method.call(this, column_name);\n    regularTable.dispatchEvent(new CustomEvent(\"regular-table-psp-sort\", {detail: {sort}}));\n}\n\nfunction append_sort(column_name) {\n    const sort = [];\n    let found = false;\n    for (const sort_term of this._config.sort) {\n        const [_column_name, _sort_dir] = sort_term;\n        if (_column_name === column_name) {\n            found = true;\n            const term = create_sort.call(this, column_name, _sort_dir);\n            if (term) {\n                sort.push(term);\n            }\n        } else {\n            sort.push(sort_term);\n        }\n    }\n    if (!found) {\n        sort.push([column_name, \"desc\"]);\n    }\n    return sort;\n}\nfunction override_sort(column_name) {\n    for (const [_column_name, _sort_dir] of this._config.sort) {\n        if (_column_name === column_name) {\n            const sort = create_sort.call(this, column_name, _sort_dir);\n            return sort ? [sort] : [];\n        }\n    }\n    return [[column_name, \"desc\"]];\n}\nfunction create_sort(column_name, sort_dir) {\n    const is_col_sortable = this._config.column_pivots.length > 0;\n    const order = is_col_sortable ? ROW_COL_SORT_ORDER : ROW_SORT_ORDER;\n    const inc_sort_dir = sort_dir ? order[sort_dir] : \"desc\";\n    if (inc_sort_dir) {\n        return [column_name, inc_sort_dir];\n    }\n}\n\nconst ROW_SORT_ORDER = {desc: \"asc\", asc: undefined};\nconst ROW_COL_SORT_ORDER = {desc: \"asc\", asc: \"col desc\", \"col desc\": \"col asc\", \"col asc\": undefined};\n\nasync function expandCollapseHandler(regularTable, event) {\n    const meta = regularTable.getMeta(event.target);\n    const is_collapse = event.target.classList.contains(\"psp-tree-label-collapse\");\n    if (event.shiftKey && is_collapse) {\n        this._view.set_depth(meta.row_header.filter(x => x !== undefined).length - 2);\n    } else if (event.shiftKey) {\n        this._view.set_depth(meta.row_header.filter(x => x !== undefined).length - 1);\n    } else if (is_collapse) {\n        this._view.collapse(meta.y);\n    } else {\n        this._view.expand(meta.y);\n    }\n    this._num_rows = await this._view.num_rows();\n    this._num_columns = await this._view.num_columns();\n    regularTable.draw();\n}\n\nasync function mousedownListener(regularTable, event) {\n    if (event.which !== 1) {\n        return;\n    }\n\n    let target = event.target;\n    while (target.tagName !== \"TD\" && target.tagName !== \"TH\") {\n        target = target.parentElement;\n        if (!regularTable.contains(target)) {\n            return;\n        }\n    }\n\n    if (target.classList.contains(\"psp-tree-label\") && event.offsetX < 26) {\n        expandCollapseHandler.call(this, regularTable, event);\n        event.stopImmediatePropagation();\n        return;\n    }\n\n    const rect = target.getBoundingClientRect();\n    if (target.classList.contains(\"psp-menu-enabled\") && event.clientY - rect.top > 16) {\n        const meta = regularTable.getMeta(target);\n        const column_name = meta.column_header?.[meta.column_header?.length - 1];\n        const [, max] = await this._view.get_min_max(column_name);\n        this._open_column_styles_menu.unshift(meta._virtual_x);\n        regularTable.draw();\n        activate_plugin_menu.call(this, regularTable, target, max);\n        event.preventDefault();\n        event.stopImmediatePropagation();\n    } else if (target.classList.contains(\"psp-header-leaf\") && !target.classList.contains(\"psp-header-corner\")) {\n        sortHandler.call(this, regularTable, event, target);\n        event.stopImmediatePropagation();\n    }\n}\n\nfunction clickListener(regularTable, event) {\n    if (event.which !== 1) {\n        return;\n    }\n\n    let target = event.target;\n    while (target.tagName !== \"TD\" && target.tagName !== \"TH\") {\n        target = target.parentElement;\n        if (!regularTable.contains(target)) {\n            return;\n        }\n    }\n\n    if (target.classList.contains(\"psp-tree-label\") && event.offsetX < 26) {\n        event.stopImmediatePropagation();\n    } else if (target.classList.contains(\"psp-header-leaf\") && !target.classList.contains(\"psp-header-corner\")) {\n        event.stopImmediatePropagation();\n    }\n}\n\nconst FORMATTERS = {};\n\nconst FORMATTER_CONS = {\n    datetime: Intl.DateTimeFormat,\n    date: Intl.DateTimeFormat,\n    integer: Intl.NumberFormat,\n    float: Intl.NumberFormat\n};\n\nexport const formatters = FORMATTERS;\n\nfunction _format(parts, val, plugins = {}, use_table_schema = false) {\n    if (val === null) {\n        return \"-\";\n    }\n\n    const title = parts[parts.length - 1];\n    const plugin = plugins[title];\n    const type = (use_table_schema && this._table_schema[title]) || this._schema[title] || \"string\";\n    const is_numeric = type === \"integer\" || type === \"float\";\n    const is_plugin_override = is_numeric && plugin && plugin.fixed !== undefined;\n    let formatter_key = is_plugin_override ? `${type}${plugin.fixed}` : type;\n    if (FORMATTERS[formatter_key] === undefined) {\n        const type_config = get_type_config(type);\n        if (is_plugin_override) {\n            const opts = {minimumFractionDigits: plugin.fixed, maximumFractionDigits: plugin.fixed};\n            FORMATTERS[formatter_key] = new FORMATTER_CONS[type](\"en-us\", opts);\n        } else if (FORMATTER_CONS[type] && type_config.format) {\n            FORMATTERS[formatter_key] = new FORMATTER_CONS[type](\"en-us\", type_config.format);\n        } else {\n            FORMATTERS[formatter_key] = false;\n        }\n    }\n\n    return FORMATTERS[formatter_key] ? FORMATTERS[formatter_key].format(val) : val;\n}\n\nfunction* _tree_header(paths = [], row_headers, regularTable) {\n    const plugins = regularTable[PLUGIN_SYMBOL];\n    for (let path of paths) {\n        path = [\"TOTAL\", ...path];\n        const last = path[path.length - 1];\n        path = path.slice(0, path.length - 1).fill(\"\");\n        const formatted = _format.call(this, [row_headers[path.length - 1]], last, plugins, true);\n        path = path.concat({toString: () => formatted});\n        path.length = row_headers.length + 1;\n        yield path;\n    }\n}\n\nasync function dataListener(regularTable, x0, y0, x1, y1) {\n    let columns = {};\n    if (x1 - x0 > 0 && y1 - y0 > 0) {\n        columns = await this._view.to_columns({\n            start_row: y0,\n            start_col: x0,\n            end_row: y1,\n            end_col: x1,\n            id: true\n        });\n        this._ids = columns.__ID__;\n    }\n    const data = [],\n        metadata = [];\n    const column_headers = [];\n    for (const path of this._column_paths.slice(x0, x1)) {\n        const path_parts = path.split(\"|\");\n        const column = columns[path] || new Array(y1 - y0).fill(null);\n        data.push(column.map(x => _format.call(this, path_parts, x, regularTable[PLUGIN_SYMBOL])));\n        metadata.push(column);\n        column_headers.push(path_parts);\n    }\n\n    return {\n        num_rows: this._num_rows,\n        num_columns: this._column_paths.length,\n        row_headers: Array.from(_tree_header.call(this, columns.__ROW_PATH__, this._config.row_pivots, regularTable)),\n        column_headers,\n        data,\n        metadata\n    };\n}\n\nfunction get_rule(regular, tag, def) {\n    let color = window\n        .getComputedStyle(regular)\n        .getPropertyValue(tag)\n        .trim();\n    if (color.length > 0) {\n        return color;\n    } else {\n        return def;\n    }\n}\n\nexport async function createModel(regular, table, view, extend = {}) {\n    const config = await view.get_config();\n\n    // Extract the entire expression string as typed by the user, so we can\n    // feed it into `validate_expressions` and get back the data types for\n    // each column without it being affected by a pivot.\n    const expressions = config.expressions.map(expr => expr[1]);\n\n    const [table_schema, validated_expressions, num_rows, schema, expression_schema, column_paths] = await Promise.all([\n        table.schema(),\n        table.validate_expressions(expressions),\n        view.num_rows(),\n        view.schema(),\n        view.expression_schema(),\n        view.column_paths()\n    ]);\n\n    const _plugin_background = chroma(get_rule(regular, \"--plugin--background\", \"#FFFFFF\")).rgb();\n    let _pos_color = get_rule(regular, \"--rt-pos-cell--color\", \"#0000ff\");\n    _pos_color = [_pos_color, ...chroma(_pos_color).rgb()];\n    let _neg_color = get_rule(regular, \"--rt-neg-cell--color\", \"#ff0000\");\n    _neg_color = [_neg_color, ...chroma(_neg_color).rgb()];\n    const model = Object.assign(extend, {\n        _view: view,\n        _table: table,\n        _table_schema: {...table_schema, ...validated_expressions.expression_schema},\n        _config: config,\n        _num_rows: num_rows,\n        _schema: {...schema, ...expression_schema},\n        _ids: [],\n        _open_column_styles_menu: [],\n        _plugin_background,\n        _pos_color,\n        _neg_color,\n        _column_paths: column_paths.filter(path => {\n            return path !== \"__ROW_PATH__\" && path !== \"__ID__\";\n        })\n    });\n    regular.setDataListener(dataListener.bind(model, regular));\n    return model;\n}\n\nexport async function configureRegularTable(regular, model) {\n    regular.addStyleListener(styleListener.bind(model, regular));\n    regular.addEventListener(\"mousedown\", mousedownListener.bind(model, regular));\n    regular.addEventListener(\"click\", clickListener.bind(model, regular));\n    await regular.draw();\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport default async function getCellConfig({_view, _config}, row_idx, col_idx) {\n    const row_pivots = _config.row_pivots;\n    const column_pivots = _config.column_pivots;\n    const start_row = row_idx >= 0 ? row_idx : 0;\n    const end_row = start_row + 1;\n    const r = await _view.to_json({start_row, end_row});\n    const row_paths = r.map(x => x.__ROW_PATH__);\n    const row_pivots_values = row_paths[0] || [];\n    const row_filters = row_pivots\n        .map((pivot, index) => {\n            const pivot_value = row_pivots_values[index];\n            return pivot_value ? [pivot, \"==\", pivot_value] : undefined;\n        })\n        .filter(x => x);\n\n    const column_index = row_pivots.length > 0 ? col_idx + 1 : col_idx;\n    const column_paths = Object.keys(r[0])[column_index];\n    const result = {row: r[0]};\n    let column_filters = [];\n    if (column_paths) {\n        const column_pivot_values = column_paths.split(\"|\");\n        result.column_names = [column_pivot_values[column_pivot_values.length - 1]];\n        column_filters = column_pivots\n            .map((pivot, index) => {\n                const pivot_value = column_pivot_values[index];\n                return pivot_value ? [pivot, \"==\", pivot_value] : undefined;\n            })\n            .filter(x => x)\n            .filter(([, , value]) => value !== \"__ROW_PATH__\");\n    }\n\n    const filters = _config.filter.concat(row_filters).concat(column_filters);\n    result.config = {filters};\n    return result;\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport getCellConfig from \"./getCellConfig\";\nconst selected_rows_map = new WeakMap();\n\nasync function selectionListener(regularTable, viewer, event) {\n    const meta = regularTable.getMeta(event.target);\n    if (!viewer.hasAttribute(\"selectable\")) return;\n    if (event.handled) return;\n    if (event.which !== 1) {\n        return;\n    }\n\n    if (!meta) {\n        return;\n    }\n\n    const id = this._ids[meta.y - meta.y0];\n    if (meta && meta.y >= 0) {\n        const selected = selected_rows_map.get(regularTable);\n        const key_match = !!selected && selected.reduce((agg, x, i) => agg && x === id[i], true);\n        const is_deselect = !!selected && id.length === selected.length && key_match;\n        let filters = [];\n        if (is_deselect) {\n            selected_rows_map.delete(regularTable);\n        } else {\n            selected_rows_map.set(regularTable, id);\n            filters = await getCellConfig(this, meta.y, meta.x);\n            filters = filters.config.filters;\n        }\n\n        await regularTable.draw();\n        event.handled = true;\n        viewer.dispatchEvent(\n            new CustomEvent(\"perspective-select\", {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    selected: !is_deselect,\n                    config: {filters}\n                }\n            })\n        );\n    }\n}\n\nfunction selectionStyleListener(regularTable, viewer) {\n    if (!viewer.hasAttribute(\"selectable\")) return;\n    const has_selected = selected_rows_map.has(regularTable);\n    const selected = selected_rows_map.get(regularTable);\n    for (const td of regularTable.querySelectorAll(\"td\")) {\n        if (!has_selected) {\n            td.classList.toggle(\"psp-row-selected\", false);\n            td.classList.toggle(\"psp-row-subselected\", false);\n        } else {\n            const meta = regularTable.getMeta(td);\n            const id = this._ids[meta.y - meta.y0];\n            const key_match = selected.reduce((agg, x, i) => agg && x === id[i], true);\n            td.classList.toggle(\"psp-row-selected\", id.length === selected.length && key_match);\n            td.classList.toggle(\"psp-row-subselected\", id.length !== selected.length && key_match);\n        }\n    }\n\n    for (const th of regularTable.querySelectorAll(\"tbody th\")) {\n        const meta = regularTable.getMeta(th);\n        const id = this._ids[meta.y - meta.y0];\n        if (!has_selected || !!id[meta.row_header_x]) {\n            th.classList.toggle(\"psp-row-selected\", false);\n            th.classList.toggle(\"psp-row-subselected\", false);\n        } else {\n            const key_match = selected.reduce((agg, x, i) => agg && x === id[i], true);\n            th.classList.toggle(\"psp-row-selected\", id.length === selected.length && key_match);\n            th.classList.toggle(\"psp-row-subselected\", id.length !== selected.length && key_match);\n        }\n    }\n}\n\nexport function configureRowSelectable(table, viewer) {\n    table.addStyleListener(selectionStyleListener.bind(this, table, viewer));\n    table.addEventListener(\"mousedown\", selectionListener.bind(this, table, viewer));\n}\n\nexport async function deselect(regularTable) {\n    selected_rows_map.delete(regularTable);\n    for (const td of regularTable.querySelectorAll(\"td,th\")) {\n        td.classList.toggle(\"psp-row-selected\", false);\n        td.classList.toggle(\"psp-row-subselected\", false);\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport getCellConfig from \"./getCellConfig\";\n\nasync function clickListener(table, viewer, event) {\n    const meta = table.getMeta(event.target);\n    if (!meta) return;\n    const {x, y} = meta;\n\n    const {row, column_names, config} = await getCellConfig(this, y, x);\n\n    viewer.dispatchEvent(\n        new CustomEvent(\"perspective-click\", {\n            bubbles: true,\n            composed: true,\n            detail: {\n                row,\n                column_names,\n                config\n            }\n        })\n    );\n}\n\nexport function configureClick(table, viewer) {\n    table.addEventListener(\"click\", clickListener.bind(this, table, viewer));\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nconst selected_position_map = new WeakMap();\n\nfunction lock(body) {\n    let lock;\n    return async function(...args) {\n        if (!!lock && (await lock) && !!lock) {\n            return;\n        }\n\n        let resolve;\n        lock = new Promise(x => (resolve = x));\n        await body.apply(this, args);\n        lock = undefined;\n        resolve();\n    };\n}\n\nfunction getPos() {\n    if (this.isContentEditable) {\n        let _range = document.getSelection().getRangeAt(0);\n        let range = _range.cloneRange();\n        range.selectNodeContents(this);\n        range.setEnd(_range.endContainer, _range.endOffset);\n        return range.toString().length;\n    } else {\n        return this.target.selectionStart;\n    }\n}\n\nfunction write(table, model, active_cell) {\n    const meta = table.getMeta(active_cell);\n    const type = model._schema[model._column_paths[meta.x]];\n    if (meta) {\n        let text = active_cell.textContent;\n        const id = model._ids[meta.y - meta.y0];\n        if (type === \"float\" || type === \"integer\") {\n            text = parseFloat(text.replace(/,/g, \"\"));\n            if (isNaN(text)) {\n                return false;\n            }\n        } else if (type === \"date\" || type === \"datetime\") {\n            text = Date.parse(text);\n            if (isNaN(text)) {\n                return false;\n            }\n        }\n\n        const msg = {\n            __INDEX__: id,\n            [model._column_paths[meta.x]]: text\n        };\n\n        model._table.update([msg], {port_id: model._edit_port});\n        return true;\n    }\n}\n\nfunction isEditable(viewer) {\n    const has_pivots = this._config.row_pivots.length === 0 && this._config.column_pivots.length === 0;\n    const selectable = viewer.hasAttribute(\"selectable\");\n    const editable = viewer.hasAttribute(\"editable\");\n    return has_pivots && !selectable && editable;\n}\n\nconst moveSelection = lock(async function(table, active_cell, dx, dy) {\n    const meta = table.getMeta(active_cell);\n    const num_columns = this._column_paths.length;\n    const num_rows = this._num_rows;\n    const selected_position = selected_position_map.get(table);\n    if (!selected_position) {\n        return;\n    }\n\n    if (meta.x + dx < num_columns && 0 <= meta.x + dx) {\n        selected_position.x = meta.x + dx;\n    }\n\n    if (meta.y + dy < num_rows && 0 <= meta.y + dy) {\n        selected_position.y = meta.y + dy;\n    }\n\n    const xmin = Math.max(meta.x0 - 10, 0);\n    const xmax = Math.min(meta.x0 + 10, num_columns);\n    const ymin = Math.max(meta.y0 - 5, 0);\n    const ymax = Math.min(meta.y0 + 10, num_rows);\n    let x = meta.x0 + dx,\n        y = meta.y0 + dy;\n    while (!focusStyleListener(table) && x >= xmin && x < xmax && y >= ymin && y < ymax) {\n        await table.scrollToCell(x, y, num_columns, num_rows);\n        selected_position_map.set(table, selected_position);\n        x += dx;\n        y += dy;\n    }\n});\n\n// Styles\n\nfunction editableStyleListener(table, viewer) {\n    // Independently check \"editable\" and `isEditable()`, so we can skip\n    // the styler entirely if editing was disabled at the time of element\n    // creation, but toggle in when e.g. pivots or selectable will\n    // affect editability.\n    if (!viewer.hasAttribute(\"editable\")) {\n        return;\n    }\n    const edit = isEditable.call(this, viewer);\n    for (const td of table.querySelectorAll(\"td\")) {\n        td.toggleAttribute(\"contenteditable\", edit);\n    }\n}\n\nconst focusStyleListener = table => {\n    const tds = table.querySelectorAll(\"td\");\n    const selected_position = selected_position_map.get(table);\n    if (selected_position) {\n        for (const td of tds) {\n            const meta = table.getMeta(td);\n            if (meta.x === selected_position.x && meta.y === selected_position.y) {\n                if (document.activeElement !== td) {\n                    td.focus({preventScroll: true});\n                }\n                return true;\n            }\n        }\n        if (document.activeElement !== document.body && table.contains(document.activeElement)) {\n            document.activeElement.blur();\n        }\n    }\n};\n\n// Events\n\nfunction keydownListener(table, viewer, event) {\n    if (!isEditable.call(this, viewer)) {\n        return;\n    }\n    const target = document.activeElement;\n    event.target.classList.remove(\"psp-error\");\n    switch (event.keyCode) {\n        case 13:\n            event.preventDefault();\n            if (event.shiftKey) {\n                moveSelection.call(this, table, target, 0, -1);\n            } else {\n                moveSelection.call(this, table, target, 0, 1);\n            }\n            break;\n        case 37:\n            if (getPos.call(target) == 0) {\n                event.preventDefault();\n                moveSelection.call(this, table, target, -1, 0);\n            }\n            break;\n        case 38:\n            event.preventDefault();\n            moveSelection.call(this, table, target, 0, -1);\n            break;\n        case 39:\n            if (getPos.call(target) == target.textContent.length) {\n                event.preventDefault();\n                moveSelection.call(this, table, target, 1, 0);\n            }\n            break;\n        case 40:\n            event.preventDefault();\n            moveSelection.call(this, table, target, 0, 1);\n            break;\n        default:\n    }\n}\n\nfunction focusoutListener(table, viewer, event) {\n    if (isEditable.call(this, viewer) && selected_position_map.has(table)) {\n        event.target.classList.remove(\"psp-error\");\n        const selectedPosition = selected_position_map.get(table);\n        selected_position_map.delete(table);\n        if (selectedPosition.content !== event.target.textContent) {\n            if (!write(table, this, event.target)) {\n                event.target.textContent = selectedPosition.content;\n                event.target.classList.add(\"psp-error\");\n                event.target.focus();\n            }\n        }\n    }\n}\n\nfunction focusinListener(table, viewer, event) {\n    const meta = table.getMeta(event.target);\n    if (meta) {\n        const new_state = {x: meta.x, y: meta.y, content: event.target.textContent};\n        selected_position_map.set(table, new_state);\n    }\n}\n\n// Plugin\n\nexport async function configureEditable(table, viewer) {\n    this._edit_port = await viewer.getEditPort();\n    table.addStyleListener(editableStyleListener.bind(this, table, viewer));\n    table.addStyleListener(focusStyleListener.bind(this, table, viewer));\n    table.addEventListener(\"focusin\", focusinListener.bind(this, table, viewer));\n    table.addEventListener(\"focusout\", focusoutListener.bind(this, table, viewer));\n    table.addEventListener(\"keydown\", keydownListener.bind(this, table, viewer));\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport async function configureSortable(table, viewer) {\n    table.addEventListener(\"regular-table-psp-sort\", event => {\n        this._preserve_focus_state = true;\n        viewer.setAttribute(\"sort\", JSON.stringify(event.detail.sort));\n    });\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {registerPlugin} from \"@finos/perspective-viewer/src/js/utils.js\";\n\nimport \"regular-table\";\nimport {createModel, configureRegularTable, formatters} from \"./regular_table_handlers.js\";\nimport MATERIAL_STYLE from \"../less/regular_table.less\";\n\nimport {configureRowSelectable, deselect} from \"./row_selection.js\";\nimport {configureClick} from \"./click.js\";\nimport {configureEditable} from \"./editing.js\";\nimport {configureSortable} from \"./sorting.js\";\nimport {PLUGIN_SYMBOL} from \"./plugin_menu.js\";\n\nconst VIEWER_MAP = new WeakMap();\nconst INSTALLED = new WeakMap();\n\nfunction lock(body) {\n    let lock;\n    return async function(...args) {\n        while (lock) {\n            await lock;\n        }\n\n        let resolve;\n        try {\n            lock = new Promise(x => (resolve = x));\n            await body.apply(this, args);\n        } finally {\n            lock = undefined;\n            resolve();\n        }\n    };\n}\n\nconst datagridPlugin = lock(async function(regular, viewer, view) {\n    const is_installed = INSTALLED.has(regular);\n    const table = viewer.table;\n    let model;\n    if (!is_installed) {\n        model = await createModel(regular, table, view);\n        configureRegularTable(regular, model);\n        await configureSortable.call(model, regular, viewer);\n        await configureRowSelectable.call(model, regular, viewer);\n        await configureEditable.call(model, regular, viewer);\n        await configureClick.call(model, regular, viewer);\n        INSTALLED.set(regular, model);\n    } else {\n        model = INSTALLED.get(regular);\n        await createModel(regular, table, view, model);\n    }\n\n    const draw = regular.draw({invalid_columns: true});\n    if (!model._preserve_focus_state) {\n        regular.scrollTop = 0;\n        regular.scrollLeft = 0;\n        deselect(regular, viewer);\n        regular._resetAutoSize();\n    } else {\n        model._preserve_focus_state = false;\n    }\n\n    await draw;\n});\n\n/**\n * Initializes a new datagrid renderer if needed, or returns an existing one\n * associated with a rendering `<div>` from a cache.\n *\n * @param {*} element\n * @param {*} div\n * @returns\n */\nfunction get_or_create_datagrid(element, div) {\n    let datagrid;\n    if (!VIEWER_MAP.has(div)) {\n        datagrid = document.createElement(\"regular-table\");\n        datagrid.formatters = formatters;\n        div.innerHTML = \"\";\n        div.appendChild(document.createElement(\"slot\"));\n        element.appendChild(datagrid);\n        VIEWER_MAP.set(div, datagrid);\n    } else {\n        datagrid = VIEWER_MAP.get(div);\n        if (!datagrid.isConnected) {\n            div.innerHTML = \"\";\n            div.appendChild(document.createElement(\"slot\"));\n            datagrid.clear();\n            element.appendChild(datagrid);\n        }\n    }\n\n    return datagrid;\n}\n\n/**\n * <perspective-viewer> plugin.\n *\n * @class DatagridPlugin\n */\nclass DatagridPlugin {\n    static name = \"Datagrid\";\n    static selectMode = \"toggle\";\n    static deselectMode = \"pivots\";\n\n    static async update(div) {\n        const datagrid = VIEWER_MAP.get(div);\n        const model = INSTALLED.get(datagrid);\n        model._num_rows = await model._view.num_rows();\n        await datagrid.draw();\n    }\n\n    static async create(div, view) {\n        const datagrid = get_or_create_datagrid(this, div);\n        await datagridPlugin(datagrid, this, view);\n    }\n\n    static async resize() {\n        if (this.view && VIEWER_MAP.has(this._datavis)) {\n            const datagrid = VIEWER_MAP.get(this._datavis);\n            if (INSTALLED.has(datagrid)) {\n                await datagrid.draw();\n            }\n        }\n    }\n\n    static delete() {\n        if (this.view && VIEWER_MAP.has(this._datavis)) {\n            const datagrid = VIEWER_MAP.get(this._datavis);\n            datagrid.clear();\n        }\n    }\n\n    static save() {\n        if (VIEWER_MAP.has(this._datavis)) {\n            const datagrid = VIEWER_MAP.get(this._datavis);\n            if (datagrid[PLUGIN_SYMBOL]) {\n                return JSON.parse(JSON.stringify(datagrid[PLUGIN_SYMBOL]));\n            }\n        }\n    }\n\n    static restore(token) {\n        const datagrid = get_or_create_datagrid(this, this._datavis);\n        datagrid[PLUGIN_SYMBOL] = token;\n    }\n}\n\n/**\n * Appends the default table CSS to `<head>`, should be run once on module\n * import.\n *\n */\nfunction _register_global_styles() {\n    const style = document.createElement(\"style\");\n    style.textContent = MATERIAL_STYLE;\n    document.head.appendChild(style);\n}\n\n/******************************************************************************\n *\n * Main\n *\n */\n\nregisterPlugin(\"datagrid\", DatagridPlugin);\n\n_register_global_styles();\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nconst DEFAULT_CONFIG = require(\"./settings.js\").default;\n\nmodule.exports.get_types = function() {\n    return Object.keys(module.exports.get_config().types);\n};\n\nmodule.exports.get_type_config = function(type) {\n    const config = {};\n    if (module.exports.get_config().types[type]) {\n        Object.assign(config, module.exports.get_config().types[type]);\n    }\n    if (config.type) {\n        const props = module.exports.get_type_config(config.type);\n        Object.assign(props, config);\n        return props;\n    } else {\n        return config;\n    }\n};\n\nfunction isObject(item) {\n    return item && typeof item === \"object\" && !Array.isArray(item);\n}\n\nfunction mergeDeep(target, ...sources) {\n    if (!sources.length) return target;\n    const source = sources.shift();\n\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!target[key]) Object.assign(target, {[key]: {}});\n                mergeDeep(target[key], source[key]);\n            } else {\n                Object.assign(target, {[key]: source[key]});\n            }\n        }\n    }\n\n    return mergeDeep(target, ...sources);\n}\n\nglobal.__PERSPECTIVE_CONFIG__ = undefined;\n\nmodule.exports.override_config = function(config) {\n    if (global.__PERSPECTIVE_CONFIG__) {\n        console.warn(\"Config already initialized!\");\n    }\n    global.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, config);\n};\n\nmodule.exports.get_config = function get_config() {\n    if (!global.__PERSPECTIVE_CONFIG__) {\n        global.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, global.__TEMPLATE_CONFIG__ || {});\n    }\n    return global.__PERSPECTIVE_CONFIG__;\n};\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\n/**\n * The default settings which populate `perspective.config.js`.\n */\nmodule.exports.default = {\n    /**\n     * `types` are the type-specific configuration options.  Each key is the\n     * name of a perspective type; their values are configuration objects for\n     * that type.\n     */\n    types: {\n        float: {\n            /**\n             * Which filter operator should be the default when a column of this\n             * type is pivotted.\n             */\n            filter_operator: \"==\",\n\n            /**\n             * Which aggregate should be the default when a column of this type\n             * is pivotted.\n             */\n            aggregate: \"sum\",\n\n            /**\n             * The format object for this type.  Can be either an\n             * `toLocaleString()` `options` object for this type (or supertype),\n             * or a function which returns the formatted string for this type.\n             */\n            format: {\n                style: \"decimal\",\n                minimumFractionDigits: 2,\n                maximumFractionDigits: 2\n            }\n        },\n        string: {\n            filter_operator: \"==\",\n            aggregate: \"count\"\n        },\n        integer: {\n            filter_operator: \"==\",\n            aggregate: \"sum\",\n            format: {}\n        },\n        boolean: {\n            filter_operator: \"==\",\n            aggregate: \"count\"\n        },\n        datetime: {\n            filter_operator: \"==\",\n            aggregate: \"count\",\n            format: {\n                week: \"numeric\",\n                year: \"numeric\",\n                month: \"numeric\",\n                day: \"numeric\",\n                hour: \"numeric\",\n                minute: \"numeric\",\n                second: \"numeric\"\n            },\n            null_value: -1\n        },\n        date: {\n            filter_operator: \"==\",\n            aggregate: \"count\",\n            format: {\n                week: \"numeric\",\n                year: \"numeric\",\n                month: \"numeric\",\n                day: \"numeric\"\n            },\n            null_value: -1\n        }\n    }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(9139);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};"],"sourceRoot":""}